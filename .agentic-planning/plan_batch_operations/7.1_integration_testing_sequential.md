# –≠—Ç–∞–ø 7.1: –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è –∏ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

**Execution Type:** `sequential` (–≤—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è –ø–æ—Å–ª–µ –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è —ç—Ç–∞–ø–æ–≤ 1-6)

**–¶–µ–ª—å:** –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è –≤—Å–µ—Ö –∏–∑–º–µ–Ω–µ–Ω–∏–π, –∫–æ–º–ø–ª–µ–∫—Å–Ω–æ–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ, –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π.

---

## ‚úÖ –ß–µ–∫-–ª–∏—Å—Ç –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è

- [ ] 1. –û–±–Ω–æ–≤–∏—Ç—å exports –≤ index —Ñ–∞–π–ª–∞—Ö
- [ ] 2. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å Dependency Injection (DI) –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ—Å—Ç—å
- [ ] 3. Integration —Ç–µ—Å—Ç—ã –¥–ª—è batch –æ–ø–µ—Ä–∞—Ü–∏–π
- [ ] 4. Smoke —Ç–µ—Å—Ç—ã end-to-end
- [ ] 5. –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø–æ–∫—Ä—ã—Ç–∏—è —Ç–µ—Å—Ç–∞–º–∏ (coverage)
- [ ] 6. –í–∞–ª–∏–¥–∞—Ü–∏—è –≤—Å–µ–≥–æ –ø—Ä–æ–µ–∫—Ç–∞
- [ ] 7. –ö–æ–º–º–∏—Ç –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–æ–Ω–Ω—ã—Ö –∏–∑–º–µ–Ω–µ–Ω–∏–π

---

## üìã –î–µ—Ç–∞–ª—å–Ω—ã–µ —à–∞–≥–∏

### –®–∞–≥ 1: –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ exports

**–ü—Ä–æ–≤–µ—Ä–∏—Ç—å –∏ –æ–±–Ω–æ–≤–∏—Ç—å index —Ñ–∞–π–ª—ã:**

1. **Operations index:**
   - `packages/servers/yandex-tracker/src/tracker_api/api_operations/index.ts`
   - –£–±–µ–¥–∏—Ç—å—Å—è, —á—Ç–æ –≤—Å–µ –Ω–æ–≤—ã–µ batch operations —ç–∫—Å–ø–æ—Ä—Ç–∏—Ä—É—é—Ç—Å—è

2. **Tools index:**
   - –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫—É—é —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—é —á–µ—Ä–µ–∑ compile-time –∏–Ω–¥–µ–∫—Å–∞—Ü–∏—é
   - –£–±–µ–¥–∏—Ç—å—Å—è, —á—Ç–æ –≤—Å–µ tools —Å –æ–±–Ω–æ–≤–ª–µ–Ω–Ω—ã–º–∏ metadata –≤–∫–ª—é—á–µ–Ω—ã

3. **DTO index:**
   - –≠–∫—Å–ø–æ—Ä—Ç–∏—Ä–æ–≤–∞—Ç—å –Ω–æ–≤—ã–µ batch input/output —Ç–∏–ø—ã

4. **Types index:**
   - –£–±–µ–¥–∏—Ç—å—Å—è, —á—Ç–æ BatchResult –∏ —Å–≤—è–∑–∞–Ω–Ω—ã–µ —Ç–∏–ø—ã —ç–∫—Å–ø–æ—Ä—Ç–∏—Ä—É—é—Ç—Å—è

---

### –®–∞–≥ 2: –ü—Ä–æ–≤–µ—Ä–∫–∞ Dependency Injection

**–§–∞–π–ª—ã –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏:**

1. **Composition Root:**
   - `packages/servers/yandex-tracker/src/composition-root/container.ts`
   - –£–±–µ–¥–∏—Ç—å—Å—è, —á—Ç–æ –≤—Å–µ operations —Å ParallelExecutor –ø–æ–ª—É—á–∞—é—Ç ServerConfig

2. **Services:**
   - –ü—Ä–æ–≤–µ—Ä–∏—Ç—å, —á—Ç–æ –Ω–æ–≤—ã–µ batch methods –¥–æ–±–∞–≤–ª–µ–Ω—ã –≤–æ –≤—Å–µ —Å–µ—Ä–≤–∏—Å—ã
   - CommentService, IssueLinkService, WorklogService, ChecklistService, IssueAttachmentService

3. **Facade:**
   - –£–±–µ–¥–∏—Ç—å—Å—è, —á—Ç–æ –≤—Å–µ `*Many()` –º–µ—Ç–æ–¥—ã –¥–æ–±–∞–≤–ª–µ–Ω—ã –≤ YandexTrackerFacade
   - –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ—Å—Ç—å –¥–µ–ª–µ–≥–∏—Ä–æ–≤–∞–Ω–∏—è –≤ —Å–µ—Ä–≤–∏—Å—ã

**–¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ DI:**
```typescript
// –ü—Ä–æ–≤–µ—Ä–∏—Ç—å, —á—Ç–æ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä —Ä–µ–∑–æ–ª–≤–∏—Ç –≤—Å–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏
const container = createContainer(config);
const facade = container.get<YandexTrackerFacade>(YandexTrackerFacade);
expect(facade).toBeDefined();
```

---

### –®–∞–≥ 3: Integration —Ç–µ—Å—Ç—ã

**–§–∞–π–ª –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è/–æ–±–Ω–æ–≤–ª–µ–Ω–∏—è:**
`packages/servers/yandex-tracker/tests/integration/batch-operations.integration.test.ts`

**–¢–µ—Å—Ç—ã:**

1. **GET –æ–ø–µ—Ä–∞—Ü–∏–∏ - batch —Ä–µ–∂–∏–º:**
```typescript
describe('Batch GET operations', () => {
  it('should get comments for multiple issues', async () => {
    // –†–µ–∞–ª—å–Ω—ã–µ HTTP mock –∏–ª–∏ test server
    // –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ø–æ–ª–Ω—ã–π flow: tool ‚Üí facade ‚Üí service ‚Üí operation ‚Üí API
  });

  it('should get links for multiple issues', async () => { ... });
  it('should get changelog for multiple issues', async () => { ... });
});
```

2. **POST/DELETE –æ–ø–µ—Ä–∞—Ü–∏–∏ - batch —Ä–µ–∂–∏–º:**
```typescript
describe('Batch POST/DELETE operations', () => {
  it('should add comments to multiple issues', async () => {
    // –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –∏–Ω–¥–∏–≤–∏–¥—É–∞–ª—å–Ω—ã–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã –¥–ª—è –∫–∞–∂–¥–æ–π –∑–∞–¥–∞—á–∏
  });

  it('should create links for multiple issues', async () => { ... });
  it('should delete links from multiple issues', async () => { ... });
});
```

3. **–ß–∞—Å—Ç–∏—á–Ω—ã–µ –æ—à–∏–±–∫–∏:**
```typescript
it('should handle partial failures gracefully', async () => {
  // Mock: –Ω–µ–∫–æ—Ç–æ—Ä—ã–µ –∑–∞–¥–∞—á–∏ —É—Å–ø–µ—à–Ω—ã, –Ω–µ–∫–æ—Ç–æ—Ä—ã–µ —Å –æ—à–∏–±–∫–∞–º–∏
  // –ü—Ä–æ–≤–µ—Ä–∏—Ç—å: successful + failed –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ —Ä–∞–∑–¥–µ–ª–µ–Ω—ã
});
```

4. **Concurrency limits:**
```typescript
it('should respect maxConcurrentRequests limit', async () => {
  // –ü—Ä–æ–≤–µ—Ä–∏—Ç—å, —á—Ç–æ ParallelExecutor –æ–≥—Ä–∞–Ω–∏—á–∏–≤–∞–µ—Ç –ø–∞—Ä–∞–ª–ª–µ–ª–∏–∑–º
  // Mock 10 –∑–∞–¥–∞—á, maxConcurrentRequests=3
  // –£–±–µ–¥–∏—Ç—å—Å—è, —á—Ç–æ –æ–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω–æ –Ω–µ –±–æ–ª–µ–µ 3 –∑–∞–ø—Ä–æ—Å–æ–≤
});
```

---

### –®–∞–≥ 4: Smoke —Ç–µ—Å—Ç—ã

**–§–∞–π–ª:** `packages/servers/yandex-tracker/tests/smoke/batch-operations.smoke.test.ts`

**End-to-end —Ç–µ—Å—Ç—ã —Å —Ä–µ–∞–ª—å–Ω—ã–º —Å–µ—Ä–≤–µ—Ä–æ–º (–∏–ª–∏ mock server):**

1. **–ü–æ–ª–Ω—ã–π —Å—Ü–µ–Ω–∞—Ä–∏–π GET:**
```typescript
it('E2E: get comments from multiple real issues', async () => {
  // –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —Ä–µ–∞–ª—å–Ω—ã–µ —Ç–µ—Å—Ç–æ–≤—ã–µ –∑–∞–¥–∞—á–∏ (–µ—Å–ª–∏ –µ—Å—Ç—å test environment)
  // –ò–ª–∏ –Ω–∞—Å—Ç—Ä–æ–∏—Ç—å nock/msw –¥–ª—è mock API
});
```

2. **–ü–æ–ª–Ω—ã–π —Å—Ü–µ–Ω–∞—Ä–∏–π POST:**
```typescript
it('E2E: add comments to multiple issues', async () => {
  // –°–æ–∑–¥–∞—Ç—å —Ç–µ—Å—Ç–æ–≤—ã–µ –∑–∞–¥–∞—á–∏
  // –î–æ–±–∞–≤–∏—Ç—å –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–∏ batch-–º–µ—Ç–æ–¥–æ–º
  // –ü—Ä–æ–≤–µ—Ä–∏—Ç—å, —á—Ç–æ –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–∏ —Å–æ–∑–¥–∞–Ω—ã
});
```

---

### –®–∞–≥ 5: –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø–æ–∫—Ä—ã—Ç–∏—è

```bash
npm run test:coverage
```

**–ü–æ—Ä–æ–≥–∏ (–∏–∑ CLAUDE.md):**
- Lines: 90%
- Functions: 90%
- Branches: 85%
- Statements: 90%

**–ï—Å–ª–∏ –ø–æ–∫—Ä—ã—Ç–∏–µ –Ω–∏–∂–µ:**
- –î–æ–±–∞–≤–∏—Ç—å –Ω–µ–¥–æ—Å—Ç–∞—é—â–∏–µ —Ç–µ—Å—Ç—ã
- –û—Å–æ–±–æ–µ –≤–Ω–∏–º–∞–Ω–∏–µ –Ω–∞ error paths –∏ edge cases

---

### –®–∞–≥ 6: –í–∞–ª–∏–¥–∞—Ü–∏—è –≤—Å–µ–≥–æ –ø—Ä–æ–µ–∫—Ç–∞

```bash
npm run validate
```

**–ü—Ä–æ–≤–µ—Ä–∏—Ç—å:**
- [ ] ESLint –ø—Ä–æ—Ö–æ–¥–∏—Ç (–≤—Å–µ workspaces)
- [ ] TypeScript type-check –ø—Ä–æ—Ö–æ–¥–∏—Ç
- [ ] –í—Å–µ —Ç–µ—Å—Ç—ã –ø—Ä–æ—Ö–æ–¥—è—Ç (unit + integration + smoke)
- [ ] CPD (Copy-Paste Detection) –ø—Ä–æ—Ö–æ–¥–∏—Ç
- [ ] Dependency cruiser –ø—Ä–æ—Ö–æ–¥–∏—Ç (–≥—Ä–∞—Ñ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π –∫–æ—Ä—Ä–µ–∫—Ç–µ–Ω)

**–ï—Å–ª–∏ –µ—Å—Ç—å –æ—à–∏–±–∫–∏:**
- –ò—Å–ø—Ä–∞–≤–∏—Ç—å –≤—Å–µ breaking changes
- –û–±–Ω–æ–≤–∏—Ç—å —Ç–∏–ø—ã, –µ—Å–ª–∏ –Ω—É–∂–Ω–æ
- –£–±–µ–¥–∏—Ç—å—Å—è, —á—Ç–æ –Ω–µ—Ç —Ü–∏–∫–ª–∏—á–µ—Å–∫–∏—Ö –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π

---

### –®–∞–≥ 7: –ö–æ–º–º–∏—Ç

**–§–æ—Ä–º–∞—Ç:**
```
feat(integration): –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è batch operations

–î–µ—Ç–∞–ª–∏:
- –û–±–Ω–æ–≤–ª–µ–Ω—ã exports –≤–æ –≤—Å–µ—Ö index —Ñ–∞–π–ª–∞—Ö
- –ü—Ä–æ–≤–µ—Ä–µ–Ω–∞ –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ—Å—Ç—å DI (composition root)
- –î–æ–±–∞–≤–ª–µ–Ω—ã integration —Ç–µ—Å—Ç—ã –¥–ª—è batch –æ–ø–µ—Ä–∞—Ü–∏–π
- –î–æ–±–∞–≤–ª–µ–Ω—ã smoke —Ç–µ—Å—Ç—ã end-to-end
- –ü–æ–∫—Ä—ã—Ç–∏–µ —Ç–µ—Å—Ç–∞–º–∏: >90% (unit + integration)
- –í—Å–µ –≤–∞–ª–∏–¥–∞—Ü–∏–∏ –ø—Ä–æ—Ö–æ–¥—è—Ç —É—Å–ø–µ—à–Ω–æ

–ü—Ä–æ–≤–µ—Ä–µ–Ω–æ:
- ParallelExecutor —Å–æ–±–ª—é–¥–∞–µ—Ç concurrency limits
- –ß–∞—Å—Ç–∏—á–Ω—ã–µ –æ—à–∏–±–∫–∏ –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞—é—Ç—Å—è –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ
- Unified batch result format –∫–æ–Ω—Å–∏—Å—Ç–µ–Ω—Ç–µ–Ω

ü§ñ Generated with Claude Code
Co-Authored-By: Claude <noreply@anthropic.com>
```

---

## üéØ –ö—Ä–∏—Ç–µ—Ä–∏–∏ –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è —ç—Ç–∞–ø–∞

1. ‚úÖ –í—Å–µ exports –æ–±–Ω–æ–≤–ª–µ–Ω—ã
2. ‚úÖ DI –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ –Ω–∞—Å—Ç—Ä–æ–µ–Ω
3. ‚úÖ Integration —Ç–µ—Å—Ç—ã –Ω–∞–ø–∏—Å–∞–Ω—ã –∏ –ø—Ä–æ—Ö–æ–¥—è—Ç
4. ‚úÖ Smoke —Ç–µ—Å—Ç—ã –ø—Ä–æ—Ö–æ–¥—è—Ç
5. ‚úÖ –ü–æ–∫—Ä—ã—Ç–∏–µ —Ç–µ—Å—Ç–∞–º–∏ ‚â•90%
6. ‚úÖ `npm run validate` —É—Å–ø–µ—à–Ω–∞
7. ‚úÖ –ò–∑–º–µ–Ω–µ–Ω–∏—è –∑–∞–∫–æ–º–º–∏—á–µ–Ω—ã

---

## üìö –°–ø—Ä–∞–≤–æ—á–Ω—ã–µ –º–∞—Ç–µ—Ä–∏–∞–ª—ã

**–°—É—â–µ—Å—Ç–≤—É—é—â–∏–µ integration —Ç–µ—Å—Ç—ã:**
- `packages/servers/yandex-tracker/tests/integration/` (–µ—Å–ª–∏ –µ—Å—Ç—å)
- –ü—Ä–∏–º–µ—Ä—ã DI —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è –≤ composition-root tests

**–î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è:**
- packages/servers/yandex-tracker/tests/README.md ‚Äî –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è
- CLAUDE.md ‚Äî –ø–æ—Ä–æ–≥–∏ –ø–æ–∫—Ä—ã—Ç–∏—è –∏ –ø—Ä–∞–≤–∏–ª–∞ –≤–∞–ª–∏–¥–∞—Ü–∏–∏
