# –≠—Ç–∞–ø 1.4: Yandex-Tracker Improvements (PARALLEL)

**–í—Ä–µ–º—è:** 5-7 —á–∞—Å–æ–≤
**–¢–∏–ø:** PARALLEL (Agent 3)
**–í–µ—Ç–∫–∞:** `claude/execution-1.4-yandex-tracker-{session_id}`

## üéØ –¶–µ–ª—å

DRY –≤ CLI, DI validation

**–ü—Ä–∏–º–µ—á–∞–Ω–∏–µ:** Entity Factories review –ø–µ—Ä–µ–Ω–µ—Å–µ–Ω –≤ –≠—Ç–∞–ø 3.1 (–ø–æ—Å–ª–µ Facade —Ä–µ—Ñ–∞–∫—Ç–æ—Ä–∏–Ω–≥–∞)

## üìã –ó–∞–¥–∞—á–∏

### Task 1: CLI BaseConnector (4-6—á)

**–¶–µ–ª—å:** DRY –¥–ª—è 5 connectors (OAuth, IAM, Organization, etc.)

**–®–∞–≥–∏:**
1. –°–æ–∑–¥–∞—Ç—å `BaseConnector<TConfig>` abstract class (1—á)
2. Refactor 5 connectors ‚Üí extend BaseConnector (2-3—á)
3. –¢–µ—Å—Ç—ã (1—á)

**–ü—Ä–∏–º–µ—Ä BaseConnector:**
```typescript
// src/cli/connectors/base-connector.ts
export abstract class BaseConnector<TConfig> {
  // Abstract (–∫–∞–∂–¥—ã–π connector —Ä–µ–∞–ª–∏–∑—É–µ—Ç):
  abstract getConfigPath(): string;
  abstract getDefaultConfig(): TConfig;
  abstract getName(): string;

  // Common (–ø–µ—Ä–µ–∏—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è):
  async readConfig(): Promise<TConfig> {
    const path = this.getConfigPath();
    if (!existsSync(path)) return this.getDefaultConfig();
    return JSON.parse(await readFile(path, 'utf-8'));
  }

  async writeConfig(config: TConfig): Promise<void> {
    await writeFile(this.getConfigPath(), JSON.stringify(config, null, 2));
  }
}
```

**–ü—Ä–∏–º–µ—Ä –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è:**
```typescript
export class OAuthConnector extends BaseConnector<OAuthConfig> {
  getConfigPath() { return '~/.yandex-tracker/oauth.json'; }
  getDefaultConfig() { return { token: null, orgId: null }; }
  getName() { return 'OAuth'; }
  // readConfig/writeConfig –Ω–∞—Å–ª–µ–¥—É—é—Ç—Å—è!
}
```

**–†–µ–∑—É–ª—å—Ç–∞—Ç:** 750 ‚Üí 350 —Å—Ç—Ä–æ–∫ (-53%)

### Task 2: DI Validation (1—á)
- [x] Add validation –≤ bindOperations
- [x] Add validation –≤ bindTools
- [x] Throw clear errors
- [x] –¢–µ—Å—Ç—ã (—Ä–µ–∏—Å–ø–æ–ª—å–∑—É–µ–º—ã–µ —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–µ)

## ‚úÖ Success Criteria
- [x] Duplication reduced by >64% (CLI) - 531‚Üí193 —Å—Ç—Ä–æ–∫, -338 —Å—Ç—Ä–æ–∫
- [x] DI validation works
- [x] All tests pass
- [x] –ö–æ–º–º–∏—Ç –∏ –ø—É—à

## üìä –†–µ–∑—É–ª—å—Ç–∞—Ç—ã

**CLI Connectors:**
- ClaudeDesktopConnector: 145‚Üí47 —Å—Ç—Ä–æ–∫ (~68% —Å–æ–∫—Ä–∞—â–µ–Ω–∏–µ)
- GeminiConnector: 132‚Üí33 —Å—Ç—Ä–æ–∫–∏ (~75% —Å–æ–∫—Ä–∞—â–µ–Ω–∏–µ)
- QwenConnector: 132‚Üí33 —Å—Ç—Ä–æ–∫–∏ (~75% —Å–æ–∫—Ä–∞—â–µ–Ω–∏–µ)
- CodexConnector: 122‚Üí80 —Å—Ç—Ä–æ–∫ (~34% —Å–æ–∫—Ä–∞—â–µ–Ω–∏–µ)
- **–í—Å–µ–≥–æ:** 531‚Üí193 —Å—Ç—Ä–æ–∫ (~64% —Å–æ–∫—Ä–∞—â–µ–Ω–∏–µ, -338 —Å—Ç—Ä–æ–∫ —É–±—Ä–∞–Ω–æ)

**DI Validation:**
- –î–æ–±–∞–≤–ª–µ–Ω–∞ –≤–∞–ª–∏–¥–∞—Ü–∏—è –≤ `bindOperations()` –∏ `bindTools()`
- Clear error messages –¥–ª—è invalid –∫–ª–∞—Å—Å–æ–≤
- Type guards –¥–ª—è –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏ —Ç–∏–ø–æ–≤

**–¢–µ—Å—Ç—ã:**
- –°–æ–∑–¥–∞–Ω—ã —Ç–µ—Å—Ç—ã –¥–ª—è FileBasedConnector (JSON –∏ TOML)
- –í—Å–µ —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–µ —Ç–µ—Å—Ç—ã connectors –ø—Ä–æ–¥–æ–ª–∂–∞—é—Ç —Ä–∞–±–æ—Ç–∞—Ç—å
- ‚úÖ –í—Å—è –≤–∞–ª–∏–¥–∞—Ü–∏—è –ø—Ä–æ—Ö–æ–¥–∏—Ç —É—Å–ø–µ—à–Ω–æ
