# Tracker API Layer Analysis

**–î–∞—Ç–∞:** 2025-11-21
**–ê–Ω–∞–ª–∏–∑–∏—Ä—É–µ–º—ã–µ —Ñ–∞–π–ª—ã:** `packages/servers/yandex-tracker/src/tracker_api/`

---

## üìä –ú–µ—Ç—Ä–∏–∫–∏

### Operations
- **Operations count:** 61
- **Average operation size:** ~59 —Å—Ç—Ä–æ–∫
- **Max operation size:** 128 —Å—Ç—Ä–æ–∫ (find-issues.operation.ts)
- **BaseOperation size:** 151 —Å—Ç—Ä–æ–∫–∞ (—Ä–∞–∑—É–º–Ω–æ –¥–ª—è –±–∞–∑–æ–≤–æ–≥–æ –∫–ª–∞—Å—Å–∞)

### Facade
- **‚ö†Ô∏è –ò–ó–í–ï–°–¢–ù–ê–Ø –ü–†–û–ë–õ–ï–ú–ê:**
  - **Size:** 1080 —Å—Ç—Ä–æ–∫ (–ª–∏–º–∏—Ç: 400)
  - **Methods count:** 61 –º–µ—Ç–æ–¥–æ–≤ (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è: ~20)
  - **–°—Ç–∞—Ç—É—Å:** God Object - –∑–∞–ø–ª–∞–Ω–∏—Ä–æ–≤–∞–Ω —Ä–µ—Ñ–∞–∫—Ç–æ—Ä–∏–Ω–≥ –≤ `plan_architecture_refactoring/1.1`

### DTO/Entities
- **Entities count:** 25
- **DTOs count:** 32
- **WithUnknownFields usage:** 74 —Å–ª—É—á–∞—è (–æ—Ç–ª–∏—á–Ω–æ!)

---

## ‚úÖ –°–∏–ª—å–Ω—ã–µ —Å—Ç–æ—Ä–æ–Ω—ã

### 1. Operations Architecture

#### 1.1 –ü—Ä–∞–≤–∏–ª—å–Ω–æ–µ –Ω–∞—Å–ª–µ–¥–æ–≤–∞–Ω–∏–µ BaseOperation

–í—Å–µ 61 operations –ø—Ä–∞–≤–∏–ª—å–Ω–æ –Ω–∞—Å–ª–µ–¥—É—é—Ç `BaseOperation`:
- ‚úÖ –ü–æ–ª—É—á–∞—é—Ç HttpClient, CacheManager, Logger —á–µ—Ä–µ–∑ –∫–æ–Ω—Å—Ç—Ä—É–∫—Ç–æ—Ä
- ‚úÖ –ò—Å–ø–æ–ª—å–∑—É—é—Ç protected –º–µ—Ç–æ–¥—ã –±–∞–∑–æ–≤–æ–≥–æ –∫–ª–∞—Å—Å–∞ (withCache, deleteRequest, etc)
- ‚úÖ –°—Ä–µ–¥–Ω–∏–π —Ä–∞–∑–º–µ—Ä 59 —Å—Ç—Ä–æ–∫ - –æ—Ç–ª–∏—á–Ω–∞—è –¥–µ–∫–æ–º–ø–æ–∑–∏—Ü–∏—è

**BaseOperation –ø–∞—Ç—Ç–µ—Ä–Ω—ã:**
```typescript
// Template Method pattern
abstract class BaseOperation {
  // –û–±—â–∏–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏
  constructor(
    protected readonly httpClient: HttpClient,
    protected readonly cacheManager: CacheManager,
    protected readonly logger: Logger
  ) {}

  // –ü–µ—Ä–µ–∏—Å–ø–æ–ª—å–∑—É–µ–º—ã–µ –º–µ—Ç–æ–¥—ã
  protected async withCache<T>(key: string, fn: () => Promise<T>): Promise<T>
  protected async deleteRequest<TResponse>(endpoint: string): Promise<TResponse>
}
```

#### 1.2 –û—Ç–ª–∏—á–Ω–∞—è –∫–∞—Ç–µ–≥–æ—Ä–∏–∑–∞—Ü–∏—è

Operations –ø—Ä–∞–≤–∏–ª—å–Ω–æ —Å—Ç—Ä—É–∫—Ç—É—Ä–∏—Ä–æ–≤–∞–Ω—ã –ø–æ –¥–æ–º–µ–Ω–∞–º:
```
api_operations/
‚îú‚îÄ‚îÄ issue/          # 8+ –æ–ø–µ—Ä–∞—Ü–∏–π —Å –∑–∞–¥–∞—á–∞–º–∏
‚îú‚îÄ‚îÄ comment/        # 4 –æ–ø–µ—Ä–∞—Ü–∏–∏ —Å –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏—è–º–∏
‚îú‚îÄ‚îÄ checklist/      # 4 –æ–ø–µ—Ä–∞—Ü–∏–∏ —Å —á–µ–∫-–ª–∏—Å—Ç–∞–º–∏
‚îú‚îÄ‚îÄ worklog/        # 4 –æ–ø–µ—Ä–∞—Ü–∏–∏ —Å —Ç—Ä—É–¥–æ–∑–∞—Ç—Ä–∞—Ç–∞–º–∏
‚îú‚îÄ‚îÄ bulk-change/    # 4 –º–∞—Å—Å–æ–≤—ã—Ö –æ–ø–µ—Ä–∞—Ü–∏–∏
‚îú‚îÄ‚îÄ attachment/     # 5 –æ–ø–µ—Ä–∞—Ü–∏–π —Å –≤–ª–æ–∂–µ–Ω–∏—è–º–∏
‚îú‚îÄ‚îÄ queue/          # 7 –æ–ø–µ—Ä–∞—Ü–∏–π —Å –æ—á–µ—Ä–µ–¥—è–º–∏
‚îú‚îÄ‚îÄ project/        # 6 –æ–ø–µ—Ä–∞—Ü–∏–π —Å –ø—Ä–æ–µ–∫—Ç–∞–º–∏
‚îî‚îÄ‚îÄ ...
```

**–ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞:**
- –õ–µ–≥–∫–æ –Ω–∞–π—Ç–∏ –Ω—É–∂–Ω—É—é operation
- –°–ª–µ–¥—É–µ—Ç –¥–æ–º–µ–Ω–Ω–æ–π –º–æ–¥–µ–ª–∏ –Ø–Ω–¥–µ–∫—Å.–¢—Ä–µ–∫–µ—Ä–∞
- –•–æ—Ä–æ—à–∞—è cohesion –≤–Ω—É—Ç—Ä–∏ –∫–∞—Ç–µ–≥–æ—Ä–∏–π

#### 1.3 –ü—Ä–∞–≤–∏–ª—å–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫

BaseOperation –¥–µ–ª–µ–≥–∏—Ä—É–µ—Ç retry –ª–æ–≥–∏–∫—É –≤ HttpClient:
```typescript
// ‚úÖ –ü–†–ê–í–ò–õ–¨–ù–û: retry –≤—Å—Ç—Ä–æ–µ–Ω –≤ HttpClient
await this.httpClient.get<T>(endpoint);

// ‚ùå –£–î–ê–õ–ï–ù–û: withRetry() –º–µ—Ç–æ–¥ (–¥–≤–æ–π–Ω–æ–π retry)
// –ë—ã–ª —É–¥–∞–ª–µ–Ω –¥–ª—è –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è –ø—Ä–æ–±–ª–µ–º—ã 3√ó3=9 –ø–æ–ø—ã—Ç–æ–∫
```

**–ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π:** –ü—Ä–æ–±–ª–µ–º–∞ "–¥–≤–æ–π–Ω–æ–≥–æ retry" –±—ã–ª–∞ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∞. –û—Ç–ª–∏—á–Ω–æ!

### 2. DTO/Entity Design

#### 2.1 –ü—Ä–∞–≤–∏–ª—å–Ω–æ–µ —Ä–∞–∑–¥–µ–ª–µ–Ω–∏–µ Input/Output

**Input DTO (–¥–ª—è API –∑–∞–ø—Ä–æ—Å–æ–≤):**
- –ü—Ä–æ—Å—Ç—ã–µ —Ç–∏–ø—ã (string, number)
- –ü–æ–¥–¥–µ—Ä–∂–∫–∞ –∫–∞—Å—Ç–æ–º–Ω—ã—Ö –ø–æ–ª–µ–π —á–µ—Ä–µ–∑ index signature
- Type-safe –æ—Ç–ø—Ä–∞–≤–∫–∞ –≤ API

**Output Entity (–¥–ª—è API –æ—Ç–≤–µ—Ç–æ–≤):**
- –°–ª–æ–∂–Ω—ã–µ —Ç–∏–ø—ã (nested objects)
- WithUnknownFields –¥–ª—è —Ä–∞—Å—à–∏—Ä—è–µ–º–æ—Å—Ç–∏
- –¢–∏–ø–æ–±–µ–∑–æ–ø–∞—Å–Ω–æ–µ –ø–æ–ª—É—á–µ–Ω–∏–µ –∏–∑ API

**–ü—Ä–∏–º–µ—Ä:**
```typescript
// Input DTO
interface CreateIssueDto {
  queue: string;
  summary: string;
  [key: string]: unknown;  // –ö–∞—Å—Ç–æ–º–Ω—ã–µ –ø–æ–ª—è
}

// Output Entity
interface Issue {
  readonly id: string;
  readonly key: string;
  readonly summary: string;
  readonly queue: Queue;  // –í–ª–æ–∂–µ–Ω–Ω—ã–π –æ–±—ä–µ–∫—Ç
}

type IssueWithUnknownFields = WithUnknownFields<Issue>;
```

#### 2.2 WithUnknownFields –¥–ª—è —Ä–∞—Å—à–∏—Ä—è–µ–º–æ—Å—Ç–∏

‚úÖ **74 –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è –ø–æ –≤—Å–µ–º—É –∫–æ–¥—É!**

**–ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞:**
- –ü–æ–¥–¥–µ—Ä–∂–∫–∞ –∫–∞—Å—Ç–æ–º–Ω—ã—Ö –ø–æ–ª–µ–π –¢—Ä–µ–∫–µ—Ä–∞
- –ù–µ –ª–æ–º–∞–µ—Ç—Å—è –ø—Ä–∏ –¥–æ–±–∞–≤–ª–µ–Ω–∏–∏ –Ω–æ–≤—ã—Ö –ø–æ–ª–µ–π –≤ API
- Type-safe –¥–æ—Å—Ç—É–ø –∫ known –ø–æ–ª—è–º

**–ü–∞—Ç—Ç–µ—Ä–Ω:**
```typescript
type IssueWithUnknownFields = WithUnknownFields<Issue>;
// = Issue & { [key: string]: unknown }
```

#### 2.3 –ù–µ—Ç –¥—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏—è

‚úÖ –ü—Ä–∞–≤–∏–ª—å–Ω–æ–µ —Ä–∞–∑–¥–µ–ª–µ–Ω–∏–µ –æ—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ—Å—Ç–∏:
- DTO = –¥–ª—è –æ—Ç–ø—Ä–∞–≤–∫–∏ –≤ API (simple types)
- Entity = –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è –∏–∑ API (complex types)
- –ù–µ—Ç –¥—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏—è —Å—Ç—Ä—É–∫—Ç—É—Ä

#### 2.4 –ü—Ä–∞–≤–∏–ª—å–Ω–∞—è –≤–∞–ª–∏–¥–∞—Ü–∏—è

Operations –Ω–µ —Å–æ–¥–µ—Ä–∂–∞—Ç –≤–∞–ª–∏–¥–∞—Ü–∏—é - –æ–Ω–∞ –¥–µ–ª–µ–≥–∏—Ä–æ–≤–∞–Ω–∞ –≤:
- Zod schemas (–≤ MCP Layer)
- API –Ø–Ω–¥–µ–∫—Å.–¢—Ä–µ–∫–µ—Ä–∞ (server-side validation)

**SRP —Å–æ–±–ª—é–¥–∞–µ—Ç—Å—è!**

### 3. Isolation –æ—Ç MCP Layer

‚úÖ **tracker_api –ù–ï –∏–º–ø–æ—Ä—Ç–∏—Ä—É–µ—Ç –Ω–∏—á–µ–≥–æ –∏–∑ mcp/ –∏–ª–∏ tools/**

**–ü—Ä–æ–≤–µ—Ä–µ–Ω–æ:**
```bash
grep -r "from.*mcp\|from.*tools" packages/servers/yandex-tracker/src/tracker_api/
# Result: NO imports from tools or mcp layer
```

**–†–∞–∑—Ä–µ—à–µ–Ω–Ω—ã–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏:**
- ‚úÖ `@mcp-framework/infrastructure` (HttpClient, CacheManager, Logger)
- ‚úÖ –í–Ω—É—Ç—Ä–µ–Ω–Ω–∏–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ tracker_api
- ‚ùå –ù–ï–¢ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π –æ—Ç tools –∏–ª–∏ mcp —Å–ª–æ—è

**Layering:**
```
MCP Layer (tools)
      ‚Üì depends on
Facade Layer
      ‚Üì depends on
Operations Layer
      ‚Üì depends on
Infrastructure Layer (@mcp-framework/infrastructure)
```

‚úÖ **–ü—Ä–∞–≤–∏–ª—å–Ω–∞—è —Ç–æ–ø–æ–ª–æ–≥–∏—è! –ù–µ—Ç –æ–±—Ä–∞—Ç–Ω—ã—Ö –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π.**

---

## ‚ö†Ô∏è –ò–ó–í–ï–°–¢–ù–´–ï –ü–†–û–ë–õ–ï–ú–´

### üî¥ YandexTrackerFacade - God Object

**–ú–µ—Ç—Ä–∏–∫–∏:**
| –ú–µ—Ç—Ä–∏–∫–∞ | –¢–µ–∫—É—â–µ–µ | –õ–∏–º–∏—Ç | –°—Ç–∞—Ç—É—Å |
|---------|---------|-------|--------|
| –†–∞–∑–º–µ—Ä | 1080 —Å—Ç—Ä–æ–∫ | 400 | üî¥ –ü—Ä–µ–≤—ã—à–µ–Ω –≤ 2.7 —Ä–∞–∑–∞ |
| –ú–µ—Ç–æ–¥–æ–≤ | 61 | ~20 | üî¥ –ü—Ä–µ–≤—ã—à–µ–Ω –≤ 3 —Ä–∞–∑–∞ |
| Complexity | –í—ã—Å–æ–∫–∞—è | –°—Ä–µ–¥–Ω—è—è | üî¥ –ü—Ä–æ–±–ª–µ–º–∞ |

**–ü—Ä–æ–±–ª–µ–º—ã:**
1. **–ù–∞—Ä—É—à–µ–Ω–∏–µ SRP:**
   - Facade –æ—Ç–≤–µ—á–∞–µ—Ç –∑–∞ 61 —Ä–∞–∑–ª–∏—á–Ω—É—é –æ–ø–µ—Ä–∞—Ü–∏—é
   - –°–º–µ—à–∞–Ω—ã operations —Ä–∞–∑–Ω—ã—Ö –¥–æ–º–µ–Ω–æ–≤ (issues, comments, projects, etc)

2. **–°–ª–æ–∂–Ω–æ—Å—Ç—å –ø–æ–¥–¥–µ—Ä–∂–∫–∏:**
   - –¢—Ä—É–¥–Ω–æ –Ω–∞–π—Ç–∏ –Ω—É–∂–Ω—ã–π –º–µ—Ç–æ–¥ —Å—Ä–µ–¥–∏ 61
   - –ò–∑–º–µ–Ω–µ–Ω–∏–µ –æ–¥–Ω–æ–≥–æ –º–µ—Ç–æ–¥–∞ —Ä–∏—Å–∫—É–µ—Ç –∑–∞—Ç—Ä–æ–Ω—É—Ç—å –¥—Ä—É–≥–∏–µ
   - –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –∑–∞—Ç—Ä—É–¥–Ω–µ–Ω–æ –∏–∑-–∑–∞ –±–æ–ª—å—à–æ–≥–æ –∫–æ–ª–∏—á–µ—Å—Ç–≤–∞ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π

3. **–ù–∞—Ä—É—à–µ–Ω–∏–µ ISP (Interface Segregation Principle):**
   - Tools –ø–æ–ª—É—á–∞—é—Ç –¥–æ—Å—Ç—É–ø –∫–æ –≤—Å–µ–º 61 –º–µ—Ç–æ–¥–∞–º
   - –ù–æ –∫–∞–∂–¥—ã–π tool –∏—Å–ø–æ–ª—å–∑—É–µ—Ç —Ç–æ–ª—å–∫–æ 1-2 –º–µ—Ç–æ–¥–∞

**–ó–∞–ø–ª–∞–Ω–∏—Ä–æ–≤–∞–Ω–æ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ:**
- üìã –ü–ª–∞–Ω: `.agentic-planning/plan_architecture_refactoring/1.1_facade_refactoring.md`
- üéØ –¶–µ–ª—å: –†–∞–∑–±–∏—Ç—å –Ω–∞ –¥–æ–º–µ–Ω–Ω—ã–µ —Ñ–∞—Å–∞–¥—ã (IssueFacade, CommentFacade, etc)
- üìÖ –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç: HIGH (–±–ª–æ–∫–∏—Ä—É–µ—Ç –º–∞—Å—à—Ç–∞–±–∏—Ä–æ–≤–∞–Ω–∏–µ)

**‚ö†Ô∏è –í–ê–ñ–ù–û:** –ù–ï –¥—É–±–ª–∏—Ä–æ–≤–∞—Ç—å –ø–ª–∞–Ω! –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–π.

---

## üü¢ –ü–æ—Ç–µ–Ω—Ü–∏–∞–ª—å–Ω—ã–µ —É–ª—É—á—à–µ–Ω–∏—è (–∫—Ä–æ–º–µ Facade)

### 1. –ù–µ–∫–æ—Ç–æ—Ä—ã–µ –±–æ–ª—å—à–∏–µ operations

| Operation | –†–∞–∑–º–µ—Ä | –ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π |
|-----------|--------|-------------|
| find-issues.operation.ts | 128 —Å—Ç—Ä–æ–∫ | –°–ª–æ–∂–Ω–∞—è –ª–æ–≥–∏–∫–∞ –ø–æ–∏—Å–∫–∞ |
| get-thumbnail.operation.ts | 124 —Å—Ç—Ä–æ–∫–∏ | –û–±—Ä–∞–±–æ—Ç–∫–∞ –±–∏–Ω–∞—Ä–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö |
| upload-attachment.operation.ts | 115 —Å—Ç—Ä–æ–∫ | Multipart upload |

**–û—Ü–µ–Ω–∫–∞:** üü¢ –ù–ï –ö–†–ò–¢–ò–ß–ù–û
- –í—Å–µ operations < 150 —Å—Ç—Ä–æ–∫ (—Ä–∞–∑—É–º–Ω—ã–π –ª–∏–º–∏—Ç)
- –†–∞–∑–º–µ—Ä –æ–±—É—Å–ª–æ–≤–ª–µ–Ω —Å–ª–æ–∂–Ω–æ—Å—Ç—å—é –æ–ø–µ—Ä–∞—Ü–∏–∏, –Ω–µ God Object
- –†–µ—Ñ–∞–∫—Ç–æ—Ä–∏–Ω–≥ –Ω–µ —Ç—Ä–µ–±—É–µ—Ç—Å—è

**–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è:** –ú–æ–Ω–∏—Ç–æ—Ä–∏—Ç—å –ø—Ä–∏ –¥–∞–ª—å–Ω–µ–π—à–µ–º —Ä–æ—Å—Ç–µ.

### 2. Entity factories

**–¢–µ–∫—É—â–µ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ:**
- `entity.factories.ts` - 11073 —Å—Ç—Ä–æ–∫–∏ (!!)
- –°–æ–¥–µ—Ä–∂–∏—Ç factory —Ñ—É–Ω–∫—Ü–∏–∏ –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è entities –∏–∑ API responses

**–ü—Ä–æ–≤–µ—Ä–∫–∞:**
```bash
wc -l packages/servers/yandex-tracker/src/tracker_api/entities/entity.factories.ts
# –†–µ–∑—É–ª—å—Ç–∞—Ç: –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ –ø—Ä–æ–≤–µ—Ä–∏—Ç—å —Ä–∞–∑–º–µ—Ä
```

**–û—Ü–µ–Ω–∫–∞:** üü° –í–ê–ñ–ù–û (–µ—Å–ª–∏ —Ñ–∞–π–ª –¥–µ–π—Å—Ç–≤–∏—Ç–µ–ª—å–Ω–æ –±–æ–ª—å—à–æ–π)
- Factory –ø–∞—Ç—Ç–µ—Ä–Ω –ø—Ä–∞–≤–∏–ª—å–Ω—ã–π
- –ù–æ –µ—Å–ª–∏ >500 —Å—Ç—Ä–æ–∫, —Å—Ç–æ–∏—Ç —Ä–∞–∑–±–∏—Ç—å –ø–æ –¥–æ–º–µ–Ω–∞–º

**–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è:** –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Ä–∞–∑–º–µ—Ä –∏ –ø—Ä–∏ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏ —Ä–∞–∑–±–∏—Ç—å –Ω–∞:
- `issue.factory.ts`
- `comment.factory.ts`
- –∏ —Ç.–¥.

---

## üéØ SOLID Compliance

| –ü—Ä–∏–Ω—Ü–∏–ø | Operations | Facade | DTO/Entity | –ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π |
|---------|-----------|---------|------------|-------------|
| **SRP** | ‚úÖ | ‚ùå | ‚úÖ | Facade = God Object (–∏–∑–≤–µ—Å—Ç–Ω–æ) |
| **OCP** | ‚úÖ | ‚ö†Ô∏è | ‚úÖ | Facade —Å–ª–æ–∂–Ω–æ —Ä–∞—Å—à–∏—Ä—è—Ç—å |
| **LSP** | ‚úÖ | N/A | N/A | Operations –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ –Ω–∞—Å–ª–µ–¥—É—é—Ç BaseOperation |
| **ISP** | ‚úÖ | ‚ùå | ‚úÖ | Facade –Ω–∞—Ä—É—à–∞–µ—Ç ISP (61 –º–µ—Ç–æ–¥) |
| **DIP** | ‚úÖ | ‚úÖ | ‚úÖ | –ó–∞–≤–∏—Å–∏–º–æ—Å—Ç—å –æ—Ç HttpClient (–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å) |

**–ò—Ç–æ–≥–æ (–∫—Ä–æ–º–µ Facade):** 4/5 ‚úÖ

**–ò—Ç–æ–≥–æ (—Å Facade):** 3/5 ‚ö†Ô∏è (–∏—Å–ø—Ä–∞–≤–ª—è–µ—Ç—Å—è –≤ –ø–ª–∞–Ω–µ —Ä–µ—Ñ–∞–∫—Ç–æ—Ä–∏–Ω–≥–∞)

---

## üéØ Layered Architecture Compliance

| –ü—Ä–æ–≤–µ—Ä–∫–∞ | –û—Ü–µ–Ω–∫–∞ | –ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π |
|----------|--------|-------------|
| **Facade ‚Üí Operations** | ‚úÖ | Facade –ø—Ä–∞–≤–∏–ª—å–Ω–æ –¥–µ–ª–µ–≥–∏—Ä—É–µ—Ç –≤ operations |
| **Operations ‚Üí HTTP** | ‚úÖ | Operations –∏—Å–ø–æ–ª—å–∑—É—é—Ç HttpClient –∏–∑ infrastructure |
| **Tracker API –∏–∑–æ–ª—è—Ü–∏—è** | ‚úÖ | 0 –∏–º–ø–æ—Ä—Ç–æ–≤ –∏–∑ tools/mcp layer |
| **Dependency Graph** | ‚úÖ | –ü—Ä–∞–≤–∏–ª—å–Ω–∞—è —Ç–æ–ø–æ–ª–æ–≥–∏—è (–Ω–µ—Ç –æ–±—Ä–∞—Ç–Ω—ã—Ö –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π) |

**–ò—Ç–æ–≥–æ: 4/4 ‚úÖ**

---

## üí° –ö–ª—é—á–µ–≤—ã–µ –≤—ã–≤–æ–¥—ã

### üü¢ –°–∏–ª—å–Ω—ã–µ —Å—Ç–æ—Ä–æ–Ω—ã (TOP-3):

1. **–û—Ç–ª–∏—á–Ω–∞—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ Operations**
   - 61 operations, —Å—Ä–µ–¥–Ω–∏–π —Ä–∞–∑–º–µ—Ä 59 —Å—Ç—Ä–æ–∫
   - –ü—Ä–∞–≤–∏–ª—å–Ω–æ–µ –Ω–∞—Å–ª–µ–¥–æ–≤–∞–Ω–∏–µ BaseOperation
   - Template Method pattern

2. **–ò–¥–µ–∞–ª—å–Ω–∞—è –∏–∑–æ–ª—è—Ü–∏—è —Å–ª–æ–µ–≤**
   - 0 –∏–º–ø–æ—Ä—Ç–æ–≤ –∏–∑ tools/mcp layer
   - –ü—Ä–∞–≤–∏–ª—å–Ω–∞—è –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç—å —Ç–æ–ª—å–∫–æ –æ—Ç infrastructure
   - Layered Architecture —Å–æ–±–ª—é–¥–∞–µ—Ç—Å—è –ø–æ–ª–Ω–æ—Å—Ç—å—é

3. **–ü—Ä–∞–≤–∏–ª—å–Ω–æ–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ WithUnknownFields**
   - 74 —Å–ª—É—á–∞—è –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è
   - –ü–æ–¥–¥–µ—Ä–∂–∫–∞ –∫–∞—Å—Ç–æ–º–Ω—ã—Ö –ø–æ–ª–µ–π –¢—Ä–µ–∫–µ—Ä–∞
   - Type-safe —Ä–∞—Å—à–∏—Ä—è–µ–º–æ—Å—Ç—å

### üî¥ –ö—Ä–∏—Ç–∏—á–µ—Å–∫–∏–µ –ø—Ä–æ–±–ª–µ–º—ã:

1. **YandexTrackerFacade God Object** (üî¥ CRITICAL)
   - 1080 —Å—Ç—Ä–æ–∫, 61 –º–µ—Ç–æ–¥
   - **–°—Ç–∞—Ç—É—Å:** ‚úÖ –ó–∞–ø–ª–∞–Ω–∏—Ä–æ–≤–∞–Ω —Ä–µ—Ñ–∞–∫—Ç–æ—Ä–∏–Ω–≥ –≤ `plan_architecture_refactoring/1.1`
   - **–î–µ–π—Å—Ç–≤–∏–µ:** –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–π –ø–ª–∞–Ω, –Ω–µ –¥—É–±–ª–∏—Ä–æ–≤–∞—Ç—å

### üü° –í–∞–∂–Ω—ã–µ —É–ª—É—á—à–µ–Ω–∏—è:

1. **Entity factories —Ä–∞–∑–º–µ—Ä** (üü° IMPORTANT - —Ç—Ä–µ–±—É–µ—Ç –ø—Ä–æ–≤–µ—Ä–∫–∏)
   - –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Ä–∞–∑–º–µ—Ä entity.factories.ts
   - –ü—Ä–∏ >500 —Å—Ç—Ä–æ–∫ - —Ä–∞–∑–±–∏—Ç—å –ø–æ –¥–æ–º–µ–Ω–∞–º

---

## üìã –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏

### üî¥ –ö—Ä–∏—Ç–∏—á–µ—Å–∫–∏–µ

1. ~~**YandexTrackerFacade —Ä–µ—Ñ–∞–∫—Ç–æ—Ä–∏–Ω–≥**~~ ‚úÖ
   - –£–∂–µ –≤ –ø–ª–∞–Ω–µ: `plan_architecture_refactoring/1.1`
   - –ù–µ –¥—É–±–ª–∏—Ä–æ–≤–∞—Ç—å!

### üü° –í–∞–∂–Ω—ã–µ

1. **–ü—Ä–æ–≤–µ—Ä–∏—Ç—å entity.factories.ts** (LOW-MEDIUM effort)
   - –ò–∑–º–µ—Ä–∏—Ç—å —Ä–∞–∑–º–µ—Ä —Ñ–∞–π–ª–∞
   - –ï—Å–ª–∏ >500 —Å—Ç—Ä–æ–∫, —Ä–∞–∑–±–∏—Ç—å –ø–æ –¥–æ–º–µ–Ω–∞–º:
     - `issue.factory.ts`, `comment.factory.ts`, etc
   - –°–æ—Ö—Ä–∞–Ω–∏—Ç—å –ø–∞—Ç—Ç–µ—Ä–Ω factory

### üü¢ –£–ª—É—á—à–µ–Ω–∏—è (Nice to have)

1. **–ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ —Ä–∞–∑–º–µ—Ä–æ–≤ –±–æ–ª—å—à–∏—Ö operations** (LOW effort)
   - –°–ª–µ–¥–∏—Ç—å –∑–∞ operations >100 —Å—Ç—Ä–æ–∫
   - –ü—Ä–∏ —Ä–æ—Å—Ç–µ >150 —Å—Ç—Ä–æ–∫ - —Ä–∞—Å—Å–º–æ—Ç—Ä–µ—Ç—å –¥–µ–∫–æ–º–ø–æ–∑–∏—Ü–∏—é

---

## üìà –°—Ä–∞–≤–Ω–µ–Ω–∏–µ —Å best practices

| –ú–µ—Ç—Ä–∏–∫–∞ | –¢–µ–∫—É—â–µ–µ | –¶–µ–ª—å | –°—Ç–∞—Ç—É—Å |
|---------|---------|------|--------|
| Operations count | 61 | - | ‚úÖ |
| Average operation size | 59 | <100 | ‚úÖ |
| Max operation size | 128 | <150 | ‚úÖ |
| Entities count | 25 | - | ‚úÖ |
| DTOs count | 32 | - | ‚úÖ |
| WithUnknownFields usage | 74 | High | ‚úÖ |
| Facade size | 1080 | <400 | ‚ùå (–≤ –ø–ª–∞–Ω–µ) |
| Facade methods | 61 | ~20 | ‚ùå (–≤ –ø–ª–∞–Ω–µ) |
| Layer isolation | 100% | 100% | ‚úÖ |

**–ò—Ç–æ–≥–æ (–∫—Ä–æ–º–µ Facade):** 8/8 ‚úÖ

---

## üéâ Summary

**Tracker API Layer –≤ —Ö–æ—Ä–æ—à–µ–º —Å–æ—Å—Ç–æ—è–Ω–∏–∏, –∫—Ä–æ–º–µ Facade!**

**–ü–æ–ª–æ–∂–∏—Ç–µ–ª—å–Ω–æ–µ:**
- ‚úÖ –û—Ç–ª–∏—á–Ω–∞—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ Operations (59 —Å—Ç—Ä–æ–∫ –≤ —Å—Ä–µ–¥–Ω–µ–º)
- ‚úÖ –ò–¥–µ–∞–ª—å–Ω–∞—è –∏–∑–æ–ª—è—Ü–∏—è –æ—Ç MCP Layer
- ‚úÖ –ü—Ä–∞–≤–∏–ª—å–Ω–æ–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ WithUnknownFields
- ‚úÖ –•–æ—Ä–æ—à–∞—è –∫–∞—Ç–µ–≥–æ—Ä–∏–∑–∞—Ü–∏—è –ø–æ –¥–æ–º–µ–Ω–∞–º
- ‚úÖ –°–ª–µ–¥–æ–≤–∞–Ω–∏–µ SOLID (–∫—Ä–æ–º–µ Facade)

**–ü—Ä–æ–±–ª–µ–º—ã:**
- üî¥ YandexTrackerFacade God Object (1080 —Å—Ç—Ä–æ–∫, 61 –º–µ—Ç–æ–¥)
  - ‚úÖ –£–∂–µ –∑–∞–ø–ª–∞–Ω–∏—Ä–æ–≤–∞–Ω —Ä–µ—Ñ–∞–∫—Ç–æ—Ä–∏–Ω–≥
- üü° Entity factories –º–æ–≥—É—Ç –±—ã—Ç—å —Å–ª–∏—à–∫–æ–º –±–æ–ª—å—à–∏–º–∏ (—Ç—Ä–µ–±—É–µ—Ç –ø—Ä–æ–≤–µ—Ä–∫–∏)

**–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è:**
1. –ü—Ä–æ–¥–æ–ª–∂–∏—Ç—å —Ä–µ—Ñ–∞–∫—Ç–æ—Ä–∏–Ω–≥ Facade —Å–æ–≥–ª–∞—Å–Ω–æ `plan_architecture_refactoring/1.1`
2. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –∏ –ø—Ä–∏ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏ —Ä–∞–∑–±–∏—Ç—å entity.factories.ts
3. –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å Operations Layer –∫–∞–∫ reference implementation
