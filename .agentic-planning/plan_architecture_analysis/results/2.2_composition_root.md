# Composition Root (DI) Analysis

**–î–∞—Ç–∞:** 2025-11-21
**–ê–Ω–∞–ª–∏–∑–∏—Ä—É–µ–º—ã–µ —Ñ–∞–π–ª—ã:** `packages/servers/yandex-tracker/src/composition-root/`

---

## üìä –ú–µ—Ç—Ä–∏–∫–∏

- **Total LoC:** 624 —Å—Ç—Ä–æ–∫–∏ (–≤—Å–µ —Ñ–∞–π–ª—ã –∫—Ä–æ–º–µ index.ts)
- **Files:**
  - `container.ts` - 269 —Å—Ç—Ä–æ–∫ (–æ—Å–Ω–æ–≤–Ω–æ–π –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä)
  - `types.ts` - 59 —Å—Ç—Ä–æ–∫ (DI tokens)
  - `operation-definitions.ts` - 173 —Å—Ç—Ä–æ–∫–∏ (—Å–ø–∏—Å–æ–∫ operations)
  - `tool-definitions.ts` - 123 —Å—Ç—Ä–æ–∫–∏ (—Å–ø–∏—Å–æ–∫ tools)
- **Registered services:** ~120 (61 operations + 49 tools + infrastructure)
- **Symbol tokens:** 100% (–≤—Å–µ –∏—Å–ø–æ–ª—å–∑—É—é—Ç Symbol.for())

---

## ‚úÖ –°–∏–ª—å–Ω—ã–µ —Å—Ç–æ—Ä–æ–Ω—ã

### 1. Symbol-based Tokens

‚úÖ **100% –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ Symbol.for() –≤–º–µ—Å—Ç–æ —Å—Ç—Ä–æ–∫!**

**–ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞:**
```typescript
export const TYPES = {
  // –ò–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä–Ω—ã–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ (—Ä—É—á–Ω—ã–µ)
  ServerConfig: Symbol.for('ServerConfig'),
  Logger: Symbol.for('Logger'),
  HttpClient: Symbol.for('HttpClient'),

  // Operations (–∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —Å–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞–Ω—ã)
  ...OPERATION_SYMBOLS,

  // Tools (–∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —Å–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞–Ω—ã)
  ...TOOL_SYMBOLS,
} as const;
```

**–ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞:**
- ‚úÖ –¢–∏–ø–æ–±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å (–Ω–µ—Ç –æ–ø–µ—á–∞—Ç–æ–∫ –≤ —Å—Ç—Ä–æ–∫–∞—Ö)
- ‚úÖ –¶–µ–Ω—Ç—Ä–∞–ª–∏–∑–æ–≤–∞–Ω–Ω—ã–µ —Ç–æ–∫–µ–Ω—ã –≤ –æ–¥–Ω–æ–º —Ñ–∞–π–ª–µ
- ‚úÖ –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –≥–µ–Ω–µ—Ä–∞—Ü–∏—è –¥–ª—è Operations/Tools
- ‚úÖ –£–Ω–∏–∫–∞–ª—å–Ω–æ—Å—Ç—å —Å–∏–º–≤–æ–ª–æ–≤ –≥–∞—Ä–∞–Ω—Ç–∏—Ä–æ–≤–∞–Ω–∞

### 2. –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è Operations/Tools

‚úÖ **–ü–∞—Ç—Ç–µ—Ä–Ω "Convention over Configuration"**

**–î–ª—è –¥–æ–±–∞–≤–ª–µ–Ω–∏—è –Ω–æ–≤–æ–π Operation:**
```typescript
// 1. –°–æ–∑–¥–∞—Ç—å –∫–ª–∞—Å—Å Operation
export class MyNewOperation extends BaseOperation { ... }

// 2. –î–æ–±–∞–≤–∏—Ç—å –≤ operation-definitions.ts
export const OPERATION_CLASSES = [
  // ...existing operations
  MyNewOperation,  // ‚Üê –¢–û–õ–¨–ö–û –≠–¢–û!
];

// 3. –í—Å—ë –æ—Å—Ç–∞–ª—å–Ω–æ–µ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏:
// - Symbol.for('MyNewOperation') —Å–æ–∑–¥–∞—ë—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏
// - –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è –≤ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–µ —á–µ—Ä–µ–∑ —Ü–∏–∫–ª
// - Dependency injection (HttpClient, CacheManager, Logger)
```

**–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è:**
```typescript
function bindOperations(container: Container): void {
  for (const OperationClass of OPERATION_CLASSES) {
    const symbol = Symbol.for(OperationClass.name);

    container.bind(symbol).toDynamicValue(() => {
      // –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –∏–∑–≤–ª–µ—á–µ–Ω–∏–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π
      const httpClient = container.get<HttpClient>(TYPES.HttpClient);
      const cacheManager = container.get<CacheManager>(TYPES.CacheManager);
      const logger = container.get<Logger>(TYPES.Logger);
      const config = container.get<ServerConfig>(TYPES.ServerConfig);

      return new OperationClass(httpClient, cacheManager, logger, config);
    });
  }
}
```

**–ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞:**
- ‚úÖ DRY –ø—Ä–∏–Ω—Ü–∏–ø (–Ω–µ—Ç –¥—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏—è —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏)
- ‚úÖ –ú–∞—Å—à—Ç–∞–±–∏—Ä—É–µ—Ç—Å—è –¥–æ 100+ operations –ë–ï–ó –∏–∑–º–µ–Ω–µ–Ω–∏—è bindOperations()
- ‚úÖ –ù–µ–≤–æ–∑–º–æ–∂–Ω–æ –∑–∞–±—ã—Ç—å –∑–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞—Ç—å operation
- ‚úÖ –ï–¥–∏–Ω–æ–æ–±—Ä–∞–∑–Ω–∞—è —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è –≤—Å–µ—Ö operations

**–¢–æ –∂–µ —Å–∞–º–æ–µ –¥–ª—è Tools:**
```typescript
function bindTools(container: Container): void {
  for (const ToolClass of TOOL_CLASSES) {
    const symbol = Symbol.for(ToolClass.name);

    // –°–ø–µ—Ü–∏–∞–ª—å–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ SearchToolsTool
    if (ToolClass.name === 'SearchToolsTool') continue;

    container.bind(symbol).toDynamicValue(() => {
      const facade = container.get<YandexTrackerFacade>(TYPES.YandexTrackerFacade);
      const logger = container.get<Logger>(TYPES.Logger);
      return new ToolClass(facade, logger);
    });
  }
}
```

### 3. –ü—Ä–∞–≤–∏–ª—å–Ω–∞—è –∏–∑–æ–ª—è—Ü–∏—è Composition Root

‚úÖ **Composition Root –Ω–∞ –≤–µ—Ä—à–∏–Ω–µ –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—ã!**

**–ü—Ä–æ–≤–µ—Ä–∫–∞ –∏–º–ø–æ—Ä—Ç–æ–≤:**
```bash
grep -r "from.*composition-root" packages/servers/yandex-tracker/src/
# –†–µ–∑—É–ª—å—Ç–∞—Ç: –∏–º–ø–æ—Ä—Ç–∏—Ä—É–µ—Ç—Å—è –¢–û–õ–¨–ö–û –∏–∑ index.ts
```

**–¢–æ–ø–æ–ª–æ–≥–∏—è (–ø—Ä–∞–≤–∏–ª—å–Ω–∞—è):**
```
index.ts (entry point)
    ‚Üì imports
Composition Root (DI container setup)
    ‚Üì registers
All other layers (tools, tracker_api, infrastructure)
```

**–ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞:**
- ‚úÖ –ù–∞—Ä—É—à–∞–µ—Ç —Ü–∏—Ä–∫—É–ª—è—Ä–Ω—ã–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏
- ‚úÖ –ï–¥–∏–Ω–∞—è —Ç–æ—á–∫–∞ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏
- ‚úÖ –ë–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫–∞ –Ω–µ –∑–∞–≤–∏—Å–∏—Ç –æ—Ç DI

### 4. Dependency Inversion Principle (DIP)

‚úÖ **–í—Å–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ —á–µ—Ä–µ–∑ DI, –Ω–µ—Ç –ø—Ä—è–º–æ–≥–æ new Class()**

**–ü—Ä–æ–≤–µ—Ä–∫–∞:**
```bash
# –ù–ï–¢ –ø—Ä—è–º–æ–≥–æ —Å–æ–∑–¥–∞–Ω–∏—è Operations/Tools –≤ –±–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫–µ
grep -r "new.*Operation\|new.*Tool" src/tools src/tracker_api
# Result: 0 matches (–∫—Ä–æ–º–µ new Date, new Error)
```

**–ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞:**
```
Tools ‚Üí depend on ‚Üí YandexTrackerFacade (injected)
     ‚Üì
Operations ‚Üí depend on ‚Üí HttpClient, CacheManager (injected)
     ‚Üì
Infrastructure ‚Üí concrete implementations
```

**–ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞:**
- ‚úÖ –í—ã—Å–æ–∫–æ—É—Ä–æ–≤–Ω–µ–≤—ã–µ –º–æ–¥—É–ª–∏ –Ω–µ –∑–∞–≤–∏—Å—è—Ç –æ—Ç –Ω–∏–∑–∫–æ—É—Ä–æ–≤–Ω–µ–≤—ã—Ö
- ‚úÖ –ó–∞–≤–∏—Å–∏–º–æ—Å—Ç—å –æ—Ç –∞–±—Å—Ç—Ä–∞–∫—Ü–∏–π (HttpClient interface)
- ‚úÖ –õ–µ–≥–∫–æ –∑–∞–º–µ–Ω–∏—Ç—å —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—é (–Ω–∞–ø—Ä–∏–º–µ—Ä, MockHttpClient –¥–ª—è —Ç–µ—Å—Ç–æ–≤)

### 5. –õ–µ–Ω–∏–≤–∞—è –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –≤ Facade

‚úÖ **Facade –ø–æ–ª—É—á–∞–µ—Ç –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä, –Ω–µ 61 –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç—å**

**–î–æ (–ø—Ä–æ–±–ª–µ–º–∞):**
```typescript
// ‚ùå –ü–õ–û–•–û: Facade –∑–∞–≤–∏—Å–∏—Ç –æ—Ç 61 operation
constructor(
  op1: Operation1,
  op2: Operation2,
  // ... 59 –¥—Ä—É–≥–∏—Ö operations
) {}
```

**–ü–æ—Å–ª–µ (–ø—Ä–∞–≤–∏–ª—å–Ω–æ):**
```typescript
// ‚úÖ –•–û–†–û–®–û: Facade –ø–æ–ª—É—á–∞–µ—Ç –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä
constructor(private container: Container) {}

// –õ–µ–Ω–∏–≤–æ–µ –∏–∑–≤–ª–µ—á–µ–Ω–∏–µ operations
async createIssue(data: CreateIssueDto) {
  const op = this.container.get<CreateIssueOperation>(
    Symbol.for('CreateIssueOperation')
  );
  return op.execute(data);
}
```

**–ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞:**
- ‚úÖ –ú–∞—Å—à—Ç–∞–±–∏—Ä—É–µ—Ç—Å—è –¥–æ 100+ operations –ë–ï–ó –∏–∑–º–µ–Ω–µ–Ω–∏—è –∫–æ–Ω—Å—Ç—Ä—É–∫—Ç–æ—Ä–∞
- ‚úÖ Operations —Å–æ–∑–¥–∞—é—Ç—Å—è —Ç–æ–ª—å–∫–æ –∫–æ–≥–¥–∞ –Ω—É–∂–Ω—ã
- ‚úÖ –ù–µ –Ω—É–∂–Ω–æ –º–æ–¥–∏—Ñ–∏—Ü–∏—Ä–æ–≤–∞—Ç—å Facade –ø—Ä–∏ –¥–æ–±–∞–≤–ª–µ–Ω–∏–∏ operation

### 6. –ü—Ä–∞–≤–∏–ª—å–Ω—ã–µ scopes

‚úÖ **toDynamicValue() –¥–ª—è –ø—Ä–∞–≤–∏–ª—å–Ω—ã—Ö lifecycle**

**–ü—Ä–∏–º–µ—Ä—ã:**
```typescript
// Logger - —Å–æ–∑–¥–∞—ë—Ç—Å—è –Ω–∞ –æ—Å–Ω–æ–≤–µ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏
container.bind<Logger>(TYPES.Logger).toDynamicValue(() => {
  return new Logger({ level: config.logLevel, ... });
});

// HttpClient - —Å–æ–∑–¥–∞—ë—Ç—Å—è —Å –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç—è–º–∏
container.bind<HttpClient>(TYPES.HttpClient).toDynamicValue(() => {
  const retry = container.get<RetryStrategy>(TYPES.RetryStrategy);
  const logger = container.get<Logger>(TYPES.Logger);
  return new HttpClient(config, logger, retry);
});
```

**–ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞:**
- ‚úÖ –ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ —Ä–∞–∑—Ä–µ—à–∞—é—Ç—Å—è –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ
- ‚úÖ –ü—Ä–∞–≤–∏–ª—å–Ω—ã–π –ø–æ—Ä—è–¥–æ–∫ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏
- ‚úÖ –î–æ—Å—Ç—É–ø –∫ –¥—Ä—É–≥–∏–º –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç—è–º –∏–∑ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞

### 7. –ß–∏—Å—Ç–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ —Ñ–∞–π–ª–æ–≤

‚úÖ **–õ–æ–≥–∏—á–µ—Å–∫–æ–µ —Ä–∞–∑–¥–µ–ª–µ–Ω–∏–µ –ø–æ –æ—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ—Å—Ç—è–º**

```
composition-root/
‚îú‚îÄ‚îÄ container.ts           # DI container setup + bind functions
‚îú‚îÄ‚îÄ types.ts               # Symbol tokens (–∞–≤—Ç–æ–≥–µ–Ω–µ—Ä–∞—Ü–∏—è)
‚îî‚îÄ‚îÄ definitions/
    ‚îú‚îÄ‚îÄ operation-definitions.ts  # –°–ø–∏—Å–æ–∫ operations
    ‚îî‚îÄ‚îÄ tool-definitions.ts       # –°–ø–∏—Å–æ–∫ tools
```

**–ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞:**
- ‚úÖ –õ–µ–≥–∫–æ –Ω–∞–π—Ç–∏ –≥–¥–µ –∑–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞–Ω –∫–æ–º–ø–æ–Ω–µ–Ω—Ç
- ‚úÖ –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –Ω–æ–≤–æ–π operation = 1 —Å—Ç—Ä–æ–∫–∞ –≤ definitions
- ‚úÖ –ù–µ—Ç –¥—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏—è —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–æ–Ω–Ω–æ–π –ª–æ–≥–∏–∫–∏

---

## üü¢ –ü–æ—Ç–µ–Ω—Ü–∏–∞–ª—å–Ω—ã–µ —É–ª—É—á—à–µ–Ω–∏—è

### 1. –û—Ç—Å—É—Ç—Å—Ç–≤–∏–µ @inject decorators

**–¢–µ–∫—É—â–µ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ:**
```typescript
// –î–µ–∫–æ—Ä–∞—Ç–æ—Ä—ã –ù–ï –∏—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è
class MyOperation extends BaseOperation {
  constructor(
    protected readonly httpClient: HttpClient,
    protected readonly cacheManager: CacheManager,
    protected readonly logger: Logger
  ) {
    super(httpClient, cacheManager, logger);
  }
}
```

**–ê–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–∞ —Å –¥–µ–∫–æ—Ä–∞—Ç–æ—Ä–∞–º–∏:**
```typescript
@injectable()
class MyOperation extends BaseOperation {
  constructor(
    @inject(TYPES.HttpClient) httpClient: HttpClient,
    @inject(TYPES.CacheManager) cacheManager: CacheManager,
    @inject(TYPES.Logger) logger: Logger
  ) {
    super(httpClient, cacheManager, logger);
  }
}
```

**–û—Ü–µ–Ω–∫–∞:** üü¢ –ù–ï –ö–†–ò–¢–ò–ß–ù–û
- InversifyJS v7 –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç DI –ë–ï–ó –¥–µ–∫–æ—Ä–∞—Ç–æ—Ä–æ–≤
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è —á–µ—Ä–µ–∑ toDynamicValue() —Ä–∞–±–æ—Ç–∞–µ—Ç –æ—Ç–ª–∏—á–Ω–æ
- –î–µ–∫–æ—Ä–∞—Ç–æ—Ä—ã –Ω–µ –¥–∞–¥—É—Ç –ø—Ä–µ–∏–º—É—â–µ—Å—Ç–≤ –ø—Ä–∏ —Ç–µ–∫—É—â–µ–π –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–µ

**–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è:** –û—Å—Ç–∞–≤–∏—Ç—å –∫–∞–∫ –µ—Å—Ç—å. –¢–µ–∫—É—â–∏–π –ø–æ–¥—Ö–æ–¥ –ø—Ä–æ—â–µ –∏ —á–∏—Ç–∞–±–µ–ª—å–Ω–µ–µ.

### 2. –°–ø–µ—Ü–∏–∞–ª—å–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ SearchToolsTool

**–¢–µ–∫—É—â–µ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ:**
```typescript
function bindTools(container: Container): void {
  for (const ToolClass of TOOL_CLASSES) {
    // –ü—Ä–æ–ø—É—Å–∫–∞–µ–º SearchToolsTool (—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä—É–µ—Ç—Å—è –æ—Ç–¥–µ–ª—å–Ω–æ)
    if (ToolClass.name === 'SearchToolsTool') {
      continue;
    }

    // ... —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è –æ—Å—Ç–∞–ª—å–Ω—ã—Ö tools
  }
}
```

**–ü—Ä–æ–±–ª–µ–º–∞:**
- SearchToolsTool –∏–º–µ–µ—Ç –¥—Ä—É–≥–æ–π –∫–æ–Ω—Å—Ç—Ä—É–∫—Ç–æ—Ä: `(searchEngine, logger)`
- –û—Å—Ç–∞–ª—å–Ω—ã–µ tools: `(facade, logger)`
- –ù—É–∂–Ω–∞ —Å–ø–µ—Ü–∏–∞–ª—å–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞

**–û—Ü–µ–Ω–∫–∞:** üü¢ –ü–†–ò–ï–ú–õ–ï–ú–û
- –¢–æ–ª—å–∫–æ 1 –∏—Å–∫–ª—é—á–µ–Ω–∏–µ –∏–∑ 49 tools (2%)
- –°–ø–µ—Ü–∏–∞–ª—å–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ –¥–æ–∫—É–º–µ–Ω—Ç–∏—Ä–æ–≤–∞–Ω–∞
- –ù–µ —É—Å–ª–æ–∂–Ω—è–µ—Ç –∫–æ–¥ –∑–Ω–∞—á–∏—Ç–µ–ª—å–Ω–æ

**–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è:** –û—Å—Ç–∞–≤–∏—Ç—å –∫–∞–∫ –µ—Å—Ç—å. –ê–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–∞ (factory –ø–∞—Ç—Ç–µ—Ä–Ω) —É—Å–ª–æ–∂–Ω–∏—Ç –∫–æ–¥ –±–æ–ª—å—à–µ.

---

## üéØ SOLID Compliance

| –ü—Ä–∏–Ω—Ü–∏–ø | –û—Ü–µ–Ω–∫–∞ | –ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π |
|---------|--------|-------------|
| **SRP** | ‚úÖ | –ö–∞–∂–¥–∞—è bind —Ñ—É–Ω–∫—Ü–∏—è –æ—Ç–≤–µ—á–∞–µ—Ç –∑–∞ –æ–¥–∏–Ω —Å–ª–æ–π |
| **OCP** | ‚úÖ | –î–æ–±–∞–≤–ª–µ–Ω–∏–µ operation = 1 —Å—Ç—Ä–æ–∫–∞, –ë–ï–ó –∏–∑–º–µ–Ω–µ–Ω–∏—è bindOperations() |
| **LSP** | ‚úÖ | –í—Å–µ operations/tools –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ –Ω–∞—Å–ª–µ–¥—É—é—Ç –±–∞–∑–æ–≤—ã–µ –∫–ª–∞—Å—Å—ã |
| **ISP** | ‚úÖ | –ö–∞–∂–¥—ã–π –∫–ª–∞—Å—Å –ø–æ–ª—É—á–∞–µ—Ç —Ç–æ–ª—å–∫–æ –Ω—É–∂–Ω—ã–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ |
| **DIP** | ‚úÖ | 100% –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç—å –æ—Ç –∞–±—Å—Ç—Ä–∞–∫—Ü–∏–π —á–µ—Ä–µ–∑ DI |

**–ò—Ç–æ–≥–æ: 5/5 ‚úÖ**

---

## üéØ –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–Ω—ã–µ –ø–∞—Ç—Ç–µ—Ä–Ω—ã

| –ü–∞—Ç—Ç–µ—Ä–Ω | –ü—Ä–∏–º–µ–Ω–µ–Ω–∏–µ | –û—Ü–µ–Ω–∫–∞ |
|---------|-----------|--------|
| **Composition Root** | ‚úÖ –ù–∞ –≤–µ—Ä—à–∏–Ω–µ –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—ã | ‚úÖ |
| **Dependency Injection** | ‚úÖ InversifyJS v7 | ‚úÖ |
| **Factory Method** | ‚úÖ toDynamicValue() –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è instances | ‚úÖ |
| **Service Locator** | ‚ö†Ô∏è Facade –ø–æ–ª—É—á–∞–µ—Ç –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä | ‚ö†Ô∏è –î–æ–ø—É—Å—Ç–∏–º–æ |
| **Convention over Configuration** | ‚úÖ –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è | ‚úÖ |

**–ò—Ç–æ–≥–æ: 5/5 ‚úÖ**

**–ü—Ä–∏–º–µ—á–∞–Ω–∏–µ –æ Service Locator:**
- Facade –ø–æ–ª—É—á–∞–µ—Ç –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä –¥–ª—è –ª–µ–Ω–∏–≤–æ–≥–æ –∏–∑–≤–ª–µ—á–µ–Ω–∏—è operations
- –û–±—ã—á–Ω–æ Service Locator = anti-pattern
- –ù–û –≤ –¥–∞–Ω–Ω–æ–º —Å–ª—É—á–∞–µ –æ–ø—Ä–∞–≤–¥–∞–Ω–æ –¥–ª—è –º–∞—Å—à—Ç–∞–±–∏—Ä—É–µ–º–æ—Å—Ç–∏ (61 operation)
- –ê–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–∞ (61 –ø–∞—Ä–∞–º–µ—Ç—Ä –∫–æ–Ω—Å—Ç—Ä—É–∫—Ç–æ—Ä–∞) —Ö—É–∂–µ

---

## üí° –ö–ª—é—á–µ–≤—ã–µ –≤—ã–≤–æ–¥—ã

### üü¢ –°–∏–ª—å–Ω—ã–µ —Å—Ç–æ—Ä–æ–Ω—ã (TOP-3):

1. **–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è Operations/Tools**
   - Convention over Configuration
   - –ú–∞—Å—à—Ç–∞–±–∏—Ä—É–µ—Ç—Å—è –¥–æ 100+ –±–µ–∑ –∏–∑–º–µ–Ω–µ–Ω–∏–π
   - –ù–µ–≤–æ–∑–º–æ–∂–Ω–æ –∑–∞–±—ã—Ç—å –∑–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞—Ç—å

2. **100% Symbol-based tokens**
   - –¢–∏–ø–æ–±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å
   - –ê–≤—Ç–æ–≥–µ–Ω–µ—Ä–∞—Ü–∏—è –∏–∑ –∏–º–µ–Ω –∫–ª–∞—Å—Å–æ–≤
   - –ù–µ—Ç –æ–ø–µ—á–∞—Ç–æ–∫ –≤ —Å—Ç—Ä–æ–∫–∞—Ö

3. **–ü—Ä–∞–≤–∏–ª—å–Ω–∞—è —Ç–æ–ø–æ–ª–æ–≥–∏—è Composition Root**
   - –ù–∞ –≤–µ—Ä—à–∏–Ω–µ –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—ã
   - –ò–∑–æ–ª–∏—Ä–æ–≤–∞–Ω –æ—Ç –±–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫–∏
   - –ï–¥–∏–Ω–∞—è —Ç–æ—á–∫–∞ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏

### üéØ –ü—Ä–æ–±–ª–µ–º—ã: –ù–ï–¢

**Composition Root –Ω–µ –∏–º–µ–µ—Ç –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏—Ö –∏–ª–∏ –≤–∞–∂–Ω—ã—Ö –ø—Ä–æ–±–ª–µ–º!**

---

## üìã –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏

### üü¢ –£–ª—É—á—à–µ–Ω–∏—è (Nice to have)

1. **–î–æ–∫—É–º–µ–Ω—Ç–∏—Ä–æ–≤–∞—Ç—å –ø–∞—Ç—Ç–µ—Ä–Ω Service Locator –≤ Facade** (LOW effort)
   - –î–æ–±–∞–≤–∏—Ç—å –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π –ø–æ—á–µ–º—É Facade –ø–æ–ª—É—á–∞–µ—Ç –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä
   - –û–±—ä—è—Å–Ω–∏—Ç—å —á—Ç–æ —ç—Ç–æ –ù–ï anti-pattern –≤ –¥–∞–Ω–Ω–æ–º —Å–ª—É—á–∞–µ
   - –£–∫–∞–∑–∞—Ç—å –∞–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤—ã –∏ –ø–æ—á–µ–º—É –æ–Ω–∏ —Ö—É–∂–µ

2. **–î–æ–±–∞–≤–∏—Ç—å validation –ø—Ä–∏ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏** (LOW effort)
   - –ü—Ä–æ–≤–µ—Ä—è—Ç—å —á—Ç–æ –≤—Å–µ OPERATION_CLASSES –¥–µ–π—Å—Ç–≤–∏—Ç–µ–ª—å–Ω–æ –Ω–∞—Å–ª–µ–¥—É—é—Ç BaseOperation
   - –ü—Ä–æ–≤–µ—Ä—è—Ç—å —á—Ç–æ –≤—Å–µ TOOL_CLASSES –¥–µ–π—Å—Ç–≤–∏—Ç–µ–ª—å–Ω–æ –Ω–∞—Å–ª–µ–¥—É—é—Ç BaseTool
   - –í—ã–±—Ä–∞—Å—ã–≤–∞—Ç—å –ø–æ–Ω—è—Ç–Ω—É—é –æ—à–∏–±–∫—É –ø—Ä–∏ —Å—Ç–∞—Ä—Ç–µ –µ—Å–ª–∏ –Ω–µ —Ç–∞–∫

---

## üìà –°—Ä–∞–≤–Ω–µ–Ω–∏–µ —Å best practices

| –ú–µ—Ç—Ä–∏–∫–∞ | –¢–µ–∫—É—â–µ–µ | –¶–µ–ª—å | –°—Ç–∞—Ç—É—Å |
|---------|---------|------|--------|
| Symbol-based tokens | 100% | 100% | ‚úÖ |
| –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è | 100% | 100% | ‚úÖ |
| Composition Root –∏–∑–æ–ª—è—Ü–∏—è | 100% | 100% | ‚úÖ |
| DIP compliance | 100% | 100% | ‚úÖ |
| –ü—Ä—è–º–æ–µ new Class() –≤ –±–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫–µ | 0% | 0% | ‚úÖ |
| Total LoC | 624 | <800 | ‚úÖ |
| Registered services | ~120 | - | ‚úÖ |

**–ò—Ç–æ–≥–æ: 7/7 ‚úÖ**

---

## üéâ Summary

**Composition Root –Ω–∞—Ö–æ–¥–∏—Ç—Å—è –≤ –û–¢–õ–ò–ß–ù–û–ú —Å–æ—Å—Ç–æ—è–Ω–∏–∏!**

**–ü–æ–ª–æ–∂–∏—Ç–µ–ª—å–Ω–æ–µ:**
- ‚úÖ –ò–¥–µ–∞–ª—å–Ω–∞—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è DI —Å InversifyJS
- ‚úÖ –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è –º–∞—Å—à—Ç–∞–±–∏—Ä—É–µ—Ç—Å—è –¥–æ 100+ components
- ‚úÖ 100% Symbol-based tokens (—Ç–∏–ø–æ–±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å)
- ‚úÖ –ü—Ä–∞–≤–∏–ª—å–Ω–∞—è —Ç–æ–ø–æ–ª–æ–≥–∏—è (Composition Root –Ω–∞ –≤–µ—Ä—à–∏–Ω–µ)
- ‚úÖ 100% —Å–æ–±–ª—é–¥–µ–Ω–∏–µ DIP (Dependency Inversion Principle)
- ‚úÖ –ù–µ—Ç –ø—Ä—è–º–æ–≥–æ new Class() –≤ –±–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫–µ
- ‚úÖ –õ–µ–Ω–∏–≤–∞—è –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –≤ Facade

**–ü—Ä–æ–±–ª–µ–º—ã:**
- –ù–µ—Ç –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏—Ö –ø—Ä–æ–±–ª–µ–º
- –ù–µ—Ç –≤–∞–∂–Ω—ã—Ö –ø—Ä–æ–±–ª–µ–º
- –¢–æ–ª—å–∫–æ minor —É–ª—É—á—à–µ–Ω–∏—è (–¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è, validation)

**–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è:**
1. –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å Composition Root –∫–∞–∫ reference implementation –¥–ª—è –¥—Ä—É–≥–∏—Ö –ø—Ä–æ–µ–∫—Ç–æ–≤
2. –î–æ–±–∞–≤–∏—Ç—å validation –ø—Ä–∏ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏ (nice to have)
3. –î–æ–∫—É–º–µ–Ω—Ç–∏—Ä–æ–≤–∞—Ç—å –ø–∞—Ç—Ç–µ—Ä–Ω Service Locator –≤ Facade (nice to have)

**‚≠ê Composition Root - –æ–¥–∏–Ω –∏–∑ –ª—É—á—à–∏—Ö –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤ –ø—Ä–æ–µ–∫—Ç–∞!**
