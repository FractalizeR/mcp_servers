# Test Coverage Metrics Analysis

**–î–∞—Ç–∞:** 2025-11-21

## Overall Coverage

| –ü–∞–∫–µ—Ç | Lines | Functions | Branches | Statements | Grade |
|-------|-------|-----------|----------|------------|-------|
| Infrastructure | 84.79% | 88.42% | 81.37% | 85.02% | C |
| Core | 92.3% | 94.28% | 84.9% | 92.48% | B |
| Search | 89.77% | 87.17% | 79.43% | 89.02% | C |
| Yandex-Tracker | 89.29% | 89.51% | 91.61% | 89.44% | B |
| **AVERAGE** | **89.04%** | **89.85%** | **84.33%** | **89.00%** | **B-** |

**–ü–æ—Ä–æ–≥–∏:** Lines ‚â•90%, Functions ‚â•90%, Branches ‚â•85%

### Status –ø–æ –ø–∞–∫–µ—Ç–∞–º

- ‚ùå **Infrastructure**: –ù–µ –ø—Ä–æ—à–µ–ª 4 –∏–∑ 4 –ø–æ—Ä–æ–≥–æ–≤
- ‚ö†Ô∏è **Core**: –ü—Ä–æ—à–µ–ª 3 –∏–∑ 4 (branches 84.9% < 85%)
- ‚ùå **Search**: –ù–µ –ø—Ä–æ—à–µ–ª 4 –∏–∑ 4 –ø–æ—Ä–æ–≥–æ–≤
- ‚ö†Ô∏è **Yandex-Tracker**: –ü—Ä–æ—à–µ–ª 1 –∏–∑ 4 (lines, functions, statements < 90%)

## Detailed Analysis by Package

### Infrastructure (Grade: C)

**Coverage:**
- Lines: 84.79% (‚ùå need +5.21%)
- Functions: 88.42% (‚ùå need +1.58%)
- Branches: 81.37% (‚ùå need +3.63%)
- Statements: 85.02% (‚ùå need +4.98%)

**Low Coverage Files:**

| File | Lines | Coverage Issue |
|------|-------|----------------|
| `src/config.ts` | 75.92% | –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è - —Å—Ç—Ä–æ–∫–∏ 104-107,201-241 |
| `src/http/client/http-client.ts` | 69.69% | HTTP –∫–ª–∏–µ–Ω—Ç - —Å—Ç—Ä–æ–∫–∏ 66-71,78-84,145 |
| `src/logging/logger.ts` | 75.8% | –õ–æ–≥–≥–µ—Ä - —Å—Ç—Ä–æ–∫–∏ 58,89-91,94,134,165,178-179,218,228 |

**–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏:**
1. üî¥ **CRITICAL**: HttpClient (69.69%) - –Ω–µ–ø–æ–∫—Ä—ã—Ç—ã error paths –∏ edge cases
2. üü° **IMPORTANT**: Logger (75.8%) - –¥–æ–±–∞–≤–∏—Ç—å —Ç–µ—Å—Ç—ã –¥–ª—è –≤—Å–µ—Ö —É—Ä–æ–≤–Ω–µ–π –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è
3. üü¢ **NICE TO HAVE**: Config (75.92%) - –ø–æ–∫—Ä—ã—Ç—å –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–æ–Ω–Ω—ã–µ —Å—Ü–µ–Ω–∞—Ä–∏–∏

### Core (Grade: B)

**Coverage:**
- Lines: 92.3% (‚úÖ)
- Functions: 94.28% (‚úÖ)
- Branches: 84.9% (‚ùå need +0.1%)
- Statements: 92.48% (‚úÖ)

**Low Coverage Files:**

| File | Lines | Coverage Issue |
|------|-------|----------------|
| `src/definition/zod-json-schema-adapter.ts` | 53.84% | Schema adapter - —Å—Ç—Ä–æ–∫–∏ 69-75,86-101,106,133-149 |

**–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏:**
1. üî¥ **CRITICAL**: ZodJsonSchemaAdapter (53.84%) - –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏ –Ω–∏–∑–∫–æ–µ –ø–æ–∫—Ä—ã—Ç–∏–µ –¥–ª—è –≥–µ–Ω–µ—Ä–∞—Ç–æ—Ä–∞ schema
2. üü° **IMPORTANT**: Branches (84.9%) - –æ—á–µ–Ω—å –±–ª–∏–∑–∫–æ –∫ –ø–æ—Ä–æ–≥—É, –Ω—É–∂–µ–Ω +1 —Ç–µ—Å—Ç

**–ü—Ä–∏–º–µ—á–∞–Ω–∏–µ:** Core –ø–æ—á—Ç–∏ –∏–¥–µ–∞–ª–µ–Ω, —Ç–æ–ª—å–∫–æ –æ–¥–∏–Ω –ø—Ä–æ–±–ª–µ–º–Ω—ã–π —Ñ–∞–π–ª –∏ –º–∏–Ω–∏–º–∞–ª—å–Ω—ã–π gap –≤ branches.

### Search (Grade: C)

**Coverage:**
- Lines: 89.77% (‚ùå need +0.23%)
- Functions: 87.17% (‚ùå need +2.83%)
- Branches: 79.43% (‚ùå need +5.57%)
- Statements: 89.02% (‚ùå need +0.98%)

**Low Coverage Files:**

| File | Lines | Coverage Issue |
|------|-------|----------------|
| `src/engine/tool-search-engine.ts` | 71.42% | –î–≤–∏–∂–æ–∫ –ø–æ–∏—Å–∫–∞ - —Å—Ç—Ä–æ–∫–∏ 56-108,152,207 |

**–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏:**
1. üî¥ **CRITICAL**: ToolSearchEngine (71.42%) - —ç—Ç–æ –≥–ª–∞–≤–Ω—ã–π –∫–ª–∞—Å—Å –ø–∞–∫–µ—Ç–∞, –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å 95%+
2. üü° **IMPORTANT**: –í—Å–µ —Å—Ç—Ä–∞—Ç–µ–≥–∏–∏ –±–ª–∏–∑–∫–∏ –∫ –ø–æ—Ä–æ–≥—É, –Ω—É–∂–Ω—ã edge case tests

### Yandex-Tracker (Grade: B)

**Coverage:**
- Lines: 89.29% (‚ùå need +0.71%)
- Functions: 89.51% (‚ùå need +0.49%)
- Branches: 91.61% (‚úÖ)
- Statements: 89.44% (‚ùå need +0.56%)

**–°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ —Ç–µ—Å—Ç–æ–≤:**
- Test Files: 142 passed
- Tests: 1855 passed, 3 skipped
- Duration: 19.61s

**Low Coverage Areas:**

–ü–æ –≤—ã–≤–æ–¥—É coverage –≤–∏–¥–Ω–æ, —á—Ç–æ –±–æ–ª—å—à–∏–Ω—Å—Ç–≤–æ —Ñ–∞–π–ª–æ–≤ –∏–º–µ—é—Ç —Ö–æ—Ä–æ—à–µ–µ –ø–æ–∫—Ä—ã—Ç–∏–µ (>90%), –Ω–æ –Ω–µ–∫–æ—Ç–æ—Ä—ã–µ –æ–±–ª–∞—Å—Ç–∏ —Ç—Ä–µ–±—É—é—Ç –≤–Ω–∏–º–∞–Ω–∏—è:

| –û–±–ª–∞—Å—Ç—å | Coverage | –ü—Ä–∏–º–µ—á–∞–Ω–∏–µ |
|---------|----------|------------|
| CLI Connectors | 95%+ | ‚úÖ –û—Ç–ª–∏—á–Ω–æ–µ –ø–æ–∫—Ä—ã—Ç–∏–µ |
| API Operations | 90%+ | ‚úÖ –•–æ—Ä–æ—à–µ–µ –ø–æ–∫—Ä—ã—Ç–∏–µ |
| Tools | 90%+ | ‚úÖ –•–æ—Ä–æ—à–µ–µ –ø–æ–∫—Ä—ã—Ç–∏–µ |
| Tracker API | 85-90% | ‚ö†Ô∏è –ú–æ–∂–Ω–æ —É–ª—É—á—à–∏—Ç—å |

**–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏:**
1. üü¢ **NICE TO HAVE**: –î–æ–≤–µ—Å—Ç–∏ –¥–æ 90%+ –ø–æ –≤—Å–µ–º –º–µ—Ç—Ä–∏–∫–∞–º (~1% gap)
2. üü¢ **NICE TO HAVE**: Branches —É–∂–µ –≤—ã—à–µ –ø–æ—Ä–æ–≥–∞ (91.61%), –æ—Ç–ª–∏—á–Ω—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç

## Uncovered Code Analysis

### Critical Gaps

**–ü–æ –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç—É:**

1. **Core: ZodJsonSchemaAdapter** (53.84%)
   - **–ö—Ä–∏—Ç–∏—á–Ω–æ—Å—Ç—å:** üî¥ HIGH
   - **–ü—Ä–∏—á–∏–Ω–∞:** –ì–µ–Ω–µ—Ä–∞—Ü–∏—è MCP definitions - –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏–π –∫–æ–º–ø–æ–Ω–µ–Ω—Ç
   - **–ù–µ–ø–æ–∫—Ä—ã—Ç—ã–µ —Å—Ç—Ä–æ–∫–∏:** 69-75,86-101,106,133-149
   - **–î–µ–π—Å—Ç–≤–∏–µ:** –î–æ–±–∞–≤–∏—Ç—å —Ç–µ—Å—Ç—ã –¥–ª—è –≤—Å–µ—Ö —Ç–∏–ø–æ–≤ Zod schemas

2. **Search: ToolSearchEngine** (71.42%)
   - **–ö—Ä–∏—Ç–∏—á–Ω–æ—Å—Ç—å:** üî¥ HIGH
   - **–ü—Ä–∏—á–∏–Ω–∞:** –û—Å–Ω–æ–≤–Ω–æ–π –¥–≤–∏–∂–æ–∫ –ø–æ–∏—Å–∫–∞ –ø–∞–∫–µ—Ç–∞
   - **–ù–µ–ø–æ–∫—Ä—ã—Ç—ã–µ —Å—Ç—Ä–æ–∫–∏:** 56-108,152,207
   - **–î–µ–π—Å—Ç–≤–∏–µ:** –ü–æ–∫—Ä—ã—Ç—å –ø–æ–∏—Å–∫–æ–≤—ã–µ —Å—Ç—Ä–∞—Ç–µ–≥–∏–∏ –∏ edge cases

3. **Infrastructure: HttpClient** (69.69%)
   - **–ö—Ä–∏—Ç–∏—á–Ω–æ—Å—Ç—å:** üî¥ HIGH
   - **–ü—Ä–∏—á–∏–Ω–∞:** –ë–∞–∑–æ–≤—ã–π HTTP –∫–ª–∏–µ–Ω—Ç –¥–ª—è –≤—Å–µ—Ö API –∑–∞–ø—Ä–æ—Å–æ–≤
   - **–ù–µ–ø–æ–∫—Ä—ã—Ç—ã–µ —Å—Ç—Ä–æ–∫–∏:** 66-71,78-84,145
   - **–î–µ–π—Å—Ç–≤–∏–µ:** –¢–µ—Å—Ç—ã –¥–ª—è retry logic, error handling, timeouts

4. **Infrastructure: Logger** (75.8%)
   - **–ö—Ä–∏—Ç–∏—á–Ω–æ—Å—Ç—å:** üü° MEDIUM
   - **–ü—Ä–∏—á–∏–Ω–∞:** –í–∞–∂–Ω–æ –¥–ª—è debugging, –Ω–æ –Ω–µ –∫—Ä–∏—Ç–∏—á–Ω–æ –¥–ª—è —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç–∏
   - **–ù–µ–ø–æ–∫—Ä—ã—Ç—ã–µ —Å—Ç—Ä–æ–∫–∏:** 58,89-91,94,134,165,178-179,218,228
   - **–î–µ–π—Å—Ç–≤–∏–µ:** –ü–æ–∫—Ä—ã—Ç—å –≤—Å–µ log levels –∏ —Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

5. **Infrastructure: Config** (75.92%)
   - **–ö—Ä–∏—Ç–∏—á–Ω–æ—Å—Ç—å:** üü° MEDIUM
   - **–ü—Ä–∏—á–∏–Ω–∞:** –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è - –≤–∞–∂–Ω–∞, –Ω–æ —Å—Ç–∞–±–∏–ª—å–Ω–∞
   - **–ù–µ–ø–æ–∫—Ä—ã—Ç—ã–µ —Å—Ç—Ä–æ–∫–∏:** 104-107,201-241
   - **–î–µ–π—Å—Ç–≤–∏–µ:** –¢–µ—Å—Ç—ã –¥–ª—è edge cases –≤ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏

### Missing Tests for Public API

**Framework packages (–¥–æ–ª–∂–Ω—ã –±—ã—Ç—å 95%+):**

- ‚ùå **Core: ZodJsonSchemaAdapter** - –ø—É–±–ª–∏—á–Ω—ã–π API –¥–ª—è schema generation
- ‚ö†Ô∏è **Infrastructure: HttpClient** - –ø—É–±–ª–∏—á–Ω—ã–π API –¥–ª—è HTTP requests
- ‚ö†Ô∏è **Search: ToolSearchEngine** - –ø—É–±–ª–∏—á–Ω—ã–π API –¥–ª—è –ø–æ–∏—Å–∫–∞ tools

## Coverage Trends

### –ù–æ–≤—ã–π –∫–æ–¥ –±–µ–∑ —Ç–µ—Å—Ç–æ–≤

```bash
# –ü—Ä–æ–≤–µ—Ä–∏–º —Ñ–∞–π–ª—ã –¥–æ–±–∞–≤–ª–µ–Ω–Ω—ã–µ –∑–∞ –ø–æ—Å–ª–µ–¥–Ω–∏–π –º–µ—Å—è—Ü –±–µ–∑ —Ç–µ—Å—Ç–æ–≤
```

**–§–∞–π–ª—ã –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏:** (—Ç—Ä–µ–±—É–µ—Ç—Å—è —Ä—É—á–Ω–æ–π –∞–Ω–∞–ª–∏–∑ git log)

- –ù–æ–≤—ã–µ tools –≤ yandex-tracker
- –ò–∑–º–µ–Ω–µ–Ω–∏—è –≤ framework packages
- –ù–æ–≤—ã–µ –æ–ø–µ—Ä–∞—Ü–∏–∏ API

## Summary

### ‚úÖ –°–∏–ª—å–Ω—ã–µ —Å—Ç–æ—Ä–æ–Ω—ã

1. **Yandex-Tracker branches**: 91.61% - –æ—Ç–ª–∏—á–Ω—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç
2. **Core —Ñ—É–Ω–∫—Ü–∏–∏**: 94.28% - –ø–æ—á—Ç–∏ –∏–¥–µ–∞–ª—å–Ω–æ
3. **–û–±—â–µ–µ –ø–æ–∫—Ä—ã—Ç–∏–µ**: 89% average - —Ö–æ—Ä–æ—à–∏–π baseline
4. **–ö–æ–ª–∏—á–µ—Å—Ç–≤–æ —Ç–µ—Å—Ç–æ–≤**: 1855 –≤ yandex-tracker, 244 –≤ infrastructure

### ‚ö†Ô∏è –ü—Ä–æ–±–ª–µ–º–Ω—ã–µ –∑–æ–Ω—ã

1. **Infrastructure branches**: 81.37% - –Ω—É–∂–Ω–æ +3.63%
2. **Search engine**: 71.42% - –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏ –Ω–∏–∑–∫–æ –¥–ª—è core component
3. **ZodJsonSchemaAdapter**: 53.84% - –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏ –Ω–∏–∑–∫–æ –¥–ª—è –≥–µ–Ω–µ—Ä–∞—Ç–æ—Ä–∞
4. **Infrastructure functions**: 88.42% - –±–ª–∏–∑–∫–æ, –Ω–æ –Ω–∏–∂–µ –ø–æ—Ä–æ–≥–∞

### üéØ –¶–µ–ª–µ–≤—ã–µ –ø–æ–∫–∞–∑–∞—Ç–µ–ª–∏

**–¢–µ–∫—É—â–∏–µ vs –¶–µ–ª–µ–≤—ã–µ:**

| –ú–µ—Ç—Ä–∏–∫–∞ | –¢–µ–∫—É—â–∏–π | –¶–µ–ª–µ–≤–æ–π | Gap |
|---------|---------|---------|-----|
| Lines | 89.04% | 90% | +0.96% |
| Functions | 89.85% | 90% | +0.15% |
| Branches | 84.33% | 85% | +0.67% |
| Statements | 89.00% | 90% | +1.00% |

**–û—Ü–µ–Ω–∫–∞:** –ü—Ä–æ–µ–∫—Ç –æ—á–µ–Ω—å –±–ª–∏–∑–æ–∫ –∫ —Ü–µ–ª–µ–≤—ã–º –ø–æ–∫–∞–∑–∞—Ç–µ–ª—è–º. –û—Å–Ω–æ–≤–Ω–∞—è —Ä–∞–±–æ—Ç–∞ - 3 –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏—Ö —Ñ–∞–π–ª–∞.

## –†–µ–∫–æ–º–µ–Ω–¥—É–µ–º—ã–µ –¥–µ–π—Å—Ç–≤–∏—è

### Phase 1: Critical Gaps (–Ω–µ–º–µ–¥–ª–µ–Ω–Ω–æ)

1. **Core: ZodJsonSchemaAdapter** - –¥–æ–±–∞–≤–∏—Ç—å ~20 —Ç–µ—Å—Ç–æ–≤ –¥–ª—è –≤—Å–µ—Ö Zod —Ç–∏–ø–æ–≤
2. **Search: ToolSearchEngine** - –¥–æ–±–∞–≤–∏—Ç—å ~15 —Ç–µ—Å—Ç–æ–≤ –¥–ª—è search strategies
3. **Infrastructure: HttpClient** - –¥–æ–±–∞–≤–∏—Ç—å ~10 —Ç–µ—Å—Ç–æ–≤ –¥–ª—è error cases

**–û—Ü–µ–Ω–∫–∞ –≤—Ä–µ–º–µ–Ω–∏:** 4-6 —á–∞—Å–æ–≤
**Impact:** +5-7% –æ–±—â–µ–≥–æ –ø–æ–∫—Ä—ã—Ç–∏—è

### Phase 2: Framework Packages (–ø–æ—Å–ª–µ Phase 1)

1. **Infrastructure: Logger** - –¥–æ–±–∞–≤–∏—Ç—å —Ç–µ—Å—Ç—ã –¥–ª—è edge cases
2. **Infrastructure: Config** - –ø–æ–∫—Ä—ã—Ç—å –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–æ–Ω–Ω—ã–µ —Å—Ü–µ–Ω–∞—Ä–∏–∏
3. **Core: branches** - –¥–æ–±–∞–≤–∏—Ç—å 1-2 —Ç–µ—Å—Ç–∞ –¥–ª—è –¥–æ—Å—Ç–∏–∂–µ–Ω–∏—è 85%

**–û—Ü–µ–Ω–∫–∞ –≤—Ä–µ–º–µ–Ω–∏:** 2-3 —á–∞—Å–∞
**Impact:** +2-3% –æ–±—â–µ–≥–æ –ø–æ–∫—Ä—ã—Ç–∏—è

### Phase 3: Polish (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)

1. –î–æ–≤–µ—Å—Ç–∏ –≤—Å–µ –ø–∞–∫–µ—Ç—ã –¥–æ 95%+
2. –£–¥–∞–ª–∏—Ç—å `@coverage-ignore` –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–∏
3. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –≤—Å–µ skipped tests

**–û—Ü–µ–Ω–∫–∞ –≤—Ä–µ–º–µ–Ω–∏:** 4-6 —á–∞—Å–æ–≤
**Impact:** –ü—Ä–æ—Ñ–µ—Å—Å–∏–æ–Ω–∞–ª—å–Ω–æ–µ –∫–∞—á–µ—Å—Ç–≤–æ

## –ú–µ—Ç—Ä–∏–∫–∏ –∫–∞—á–µ—Å—Ç–≤–∞

**Coverage quality score: B- (7.5/10)**

–î–µ–∫–æ–º–ø–æ–∑–∏—Ü–∏—è:
- Quantity: 8/10 (89% average)
- Critical paths: 6/10 (–Ω–µ—Å–∫–æ–ª—å–∫–æ critical gaps)
- Consistency: 7/10 (—Ä–∞–∑–±—Ä–æ—Å –º–µ–∂–¥—É –ø–∞–∫–µ—Ç–∞–º–∏)
- Trend: 8/10 (—Ö–æ—Ä–æ—à–∞—è baseline, –Ω—É–∂–Ω–∞ –ø–æ–¥–¥–µ—Ä–∂–∫–∞)
