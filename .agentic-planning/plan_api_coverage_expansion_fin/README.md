# План завершения расширения покрытия API Яндекс.Трекер

**Статус:** ✅ **ПОЛНОСТЬЮ ЗАВЕРШЁН** (2025-11-19)
**Release:** v2.0.0 опубликован

## 🎉 Итоговое состояние

**✅ Реализовано (9 API):**
- ✅ Comments API - 4 tools (100% готово)
- ✅ Links API - 3 tools (100% готово)
- ✅ Queues API - 6 tools (100% готово)
- ✅ Attachments API - 5 tools (100% готово)
- ✅ Checklists API - 4 tools (100% готово)
- ✅ Worklog API - 4 tools (100% готово)
- ✅ Projects API - 5 tools (100% готово)
- ✅ Components API - 4 tools (100% готово)
- ✅ Issues API - 7 tools (было реализовано ранее)

**📊 Финальные метрики:**
- ✅ 42 MCP tools реализованы и протестированы
- ✅ 9 API категорий покрыты (53% покрытие Yandex.Tracker API)
- ✅ 1443/1448 тестов проходят (99.7% успешности)
- ✅ 5 тестов пропущены (E2E workflows - по дизайну)
- ✅ npm run validate:quiet - успешна
- ✅ Release v2.0.0 создан и опубликован

**✅ Вся работа завершена:**
- ~~16 тестов Links API~~ - исправлены в предыдущих сессиях
- Проверено 2025-11-19: все тесты проходят

## 📋 Структура нового плана

### Этап 0: Критические исправления (последовательно)
**Файл:** `1.0_critical_fixes_sequential.md`
- Исправить проблемы с импортами @mcp-framework (39 падающих тестов)
- Исправить тестовую инфраструктуру
- Запустить успешно `npm run validate`

**Время:** 1-2 дня
**Блокирует:** Все последующие этапы

---

### Этап 1: Завершение начатых API (параллельно после Этапа 0)

#### 1.1 Дописать Comments API
**Файл:** `2.1_complete_comments_api_parallel.md`
- Тесты для MCP tools (unit + integration)
- Документация
- Валидация

**Время:** 1-2 дня
**Параллельность:** ✅ Да

#### 1.2 Дописать Links API (КРИТИЧНО!)
**Файл:** `2.2_complete_links_api_parallel.md`
- Тесты для operations (unit)
- Тесты для MCP tools (unit + integration)
- Fixtures
- Документация
- Валидация

**Время:** 2-3 дня (много тестов)
**Параллельность:** ✅ Да

#### 1.3 Дописать Queues API (КРИТИЧНО!)
**Файл:** `2.3_complete_queues_api_parallel.md`
- Тесты для operations (unit)
- Тесты для MCP tools (unit + integration)
- Fixtures
- Документация
- Валидация

**Время:** 2-3 дня (много тестов, 6 tools)
**Параллельность:** ✅ Да

#### 1.4 Доделать Attachments API
**Файл:** `2.4_finalize_attachments_api_parallel.md`
- Финализировать документацию
- Проверить покрытие
- Валидация

**Время:** 0.5-1 день
**Параллельность:** ✅ Да

---

### Этап 2: Новые API - простые (параллельно)

#### 2.1 Checklists API
**Файл:** `3.1_checklists_api_parallel.md`
- Entity, DTO, Operations, Tools (4 tools)
- Полное покрытие тестами
- Документация

**Время:** 3-4 дня
**Зависимости:** Этап 0 завершен
**Параллельность:** ✅ Да

#### 2.2 Worklog API
**Файл:** `3.2_worklog_api_parallel.md`
- Entity, DTO, Operations, Tools (4 tools)
- Duration utility
- Полное покрытие тестами
- Документация

**Время:** 3-4 дня
**Зависимости:** Этап 0 завершен
**Параллельность:** ✅ Да

---

### Этап 3: Новые API - зависимые от Queues (последовательно)

#### 3.1 Projects API
**Файл:** `4.1_projects_api_sequential.md`
- Entity, DTO, Operations, Tools (5 tools)
- Полное покрытие тестами
- Документация

**Время:** 4-5 дней
**Зависимости:** Queues API полностью завершен (Этап 1.3)
**Параллельность:** ⚠️ Может выполняться параллельно с Components

#### 3.2 Components API
**Файл:** `4.2_components_api_sequential.md`
- Entity, DTO, Operations, Tools (4 tools)
- Полное покрытие тестами
- Документация

**Время:** 3-4 дня
**Зависимости:** Queues API полностью завершен (Этап 1.3)
**Параллельность:** ⚠️ Может выполняться параллельно с Projects

---

### Этап 4: Финализация (последовательно)

**Файл:** `5.0_final_integration_sequential.md`
- E2E тесты всех workflow
- Интеграционное тестирование всех API
- Обновление всей документации
- CHANGELOG и release notes
- Финальная валидация
- Релиз v2.0.0

**Время:** 3-4 дня
**Зависимости:** Все предыдущие этапы
**Параллельность:** ❌ Нет

---

## 📊 Граф зависимостей

```
┌────────────────────────────────┐
│ 1.0 Critical Fixes             │
│ (БЛОКИРУЕТ ВСЁ!)               │
└────────────┬───────────────────┘
             │
      ┌──────┴──────────────────────────────────┐
      │                                          │
      ▼                                          ▼
┌─────────────────────┐              ┌──────────────────────┐
│ ЭТАП 1              │              │ ЭТАП 2               │
│ (Параллельно)       │              │ (Параллельно)        │
├─────────────────────┤              ├──────────────────────┤
│ 2.1 Comments (1-2д) │              │ 3.1 Checklists (3-4д)│
│ 2.2 Links (2-3д)    │────┐         │ 3.2 Worklog (3-4д)   │
│ 2.3 Queues (2-3д)   │────┼─────┐   └──────────────────────┘
│ 2.4 Attachments (1д)│    │     │            │
└─────────────────────┘    │     │            │
                           │     │            │
                           │     └────────────┼──────┐
                           │                  │      │
                           ▼                  ▼      ▼
                    ┌──────────────────────────────────┐
                    │ ЭТАП 3 (После Queues)            │
                    │ (Параллельно между собой)        │
                    ├──────────────────────────────────┤
                    │ 4.1 Projects (4-5д)              │
                    │ 4.2 Components (3-4д)            │
                    └─────────────┬────────────────────┘
                                  │
                                  ▼
                    ┌──────────────────────────────────┐
                    │ 5.0 Final Integration (3-4д)     │
                    │ (Последовательно)                │
                    └──────────────────────────────────┘
```

---

## ⏱️ Оценка времени

### Сценарий 1: Максимальная параллелизация (4-5 агентов)
- Этап 0: 2 дня (1 агент, последовательно)
- Этап 1: 3 дня (4 агента параллельно: Comments, Links, Queues, Attachments)
- Этап 2: 4 дня (2 агента параллельно: Checklists, Worklog)
- Этап 3: 5 дней (2 агента параллельно: Projects, Components)
- Этап 4: 4 дня (1 агент, последовательно)
**ИТОГО: ~18 дней**

### Сценарий 2: Реалистичный (2-3 агента)
- Этап 0: 2 дня
- Этап 1: 6 дней (2-3 агента)
- Этап 2: 6 дней (2 агента)
- Этап 3: 8 дней (2 агента)
- Этап 4: 4 дня
**ИТОГО: ~26 дней**

### Сценарий 3: Консервативный (1 агент последовательно)
- Этап 0: 2 дня
- Этап 1: 8 дней (2+3+3+1)
- Этап 2: 8 дней (4+4)
- Этап 3: 9 дней (5+4)
- Этап 4: 4 дня
**ИТОГО: ~31 день**

---

## 🎯 Критерии готовности всего плана

### Функциональность
- ✅ 8 API категорий полностью реализованы
- ✅ 35+ MCP инструментов работают
- ✅ Все operations, entities, DTO созданы

### Качество
- ✅ Покрытие тестами ≥90% для ВСЕХ модулей
- ✅ Все unit-тесты проходят
- ✅ Все integration-тесты проходят
- ✅ `npm run validate` успешно
- ✅ `npm run depcruise` без нарушений
- ✅ `npm run cpd` ≤5% дублирования

### Документация
- ✅ Все README обновлены
- ✅ Примеры для всех инструментов
- ✅ CHANGELOG v2.0.0
- ✅ Release notes готовы

### Релиз
- ✅ Version bump выполнен
- ✅ Git tag создан
- ✅ Все изменения закоммичены и запушены

---

## 📁 Файлы плана

### Обязательные
- `README.md` - этот файл
- `0.0_overview.md` - обзор с метриками и статусом

### Этапы
1. `1.0_critical_fixes_sequential.md` - исправление критических проблем
2. `2.1_complete_comments_api_parallel.md` - завершение Comments API
3. `2.2_complete_links_api_parallel.md` - завершение Links API
4. `2.3_complete_queues_api_parallel.md` - завершение Queues API
5. `2.4_finalize_attachments_api_parallel.md` - финализация Attachments API
6. `3.1_checklists_api_parallel.md` - реализация Checklists API
7. `3.2_worklog_api_parallel.md` - реализация Worklog API
8. `4.1_projects_api_sequential.md` - реализация Projects API
9. `4.2_components_api_sequential.md` - реализация Components API
10. `5.0_final_integration_sequential.md` - финальная интеграция

---

## 🚀 Быстрый старт

### 1. Начать с критических исправлений (ОБЯЗАТЕЛЬНО!)
```bash
# Открыть и выполнить:
.agentic-planning/plan_api_coverage_expansion_fin/1.0_critical_fixes_sequential.md
```

### 2. После исправлений, запустить параллельно Этап 1:
- Агент A: `2.1_complete_comments_api_parallel.md`
- Агент B: `2.2_complete_links_api_parallel.md`
- Агент C: `2.3_complete_queues_api_parallel.md`
- Агент D: `2.4_finalize_attachments_api_parallel.md`

### 3. Параллельно (можно начать до завершения Этапа 1):
- Агент E: `3.1_checklists_api_parallel.md`
- Агент F: `3.2_worklog_api_parallel.md`

### 4. После завершения Queues (2.3):
- Агент G: `4.1_projects_api_sequential.md`
- Агент H: `4.2_components_api_sequential.md`

### 5. Финализация (после всего):
```bash
.agentic-planning/plan_api_coverage_expansion_fin/5.0_final_integration_sequential.md
```

---

## ⚠️ Важные правила

1. **Этап 0 (Critical Fixes) - ОБЯЗАТЕЛЕН ПЕРВЫМ!**
   - Без него все тесты будут падать
   - Блокирует всю остальную работу

2. **Тестирование обязательно для КАЖДОГО этапа**
   - Unit-тесты для operations
   - Unit-тесты для tools
   - Integration-тесты для tools
   - Покрытие ≥90%

3. **Документация обязательна для КАЖДОГО этапа**
   - Обновить entities/README.md
   - Обновить api_operations/README.md
   - Обновить tools/README.md
   - Примеры использования

4. **Валидация ПОСЛЕ КАЖДОГО этапа**
   - `npm run validate` успешно
   - `npm run test:coverage` ≥90%
   - Коммит и push

5. **Зависимости критичны**
   - Projects и Components требуют ПОЛНОСТЬЮ завершенный Queues API
   - Нельзя начинать Этап 4 (Projects/Components) до завершения 2.3 (Queues)

---

**Создано:** 2025-11-18
**Версия плана:** 2.0 (финальный)
