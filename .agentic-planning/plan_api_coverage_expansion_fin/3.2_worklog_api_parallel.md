# –≠—Ç–∞–ø 2.2: Worklog API - –ü–æ–ª–Ω–∞—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è (Parallel)

**–°—Ç–∞—Ç—É—Å:** ‚è™ –ù–µ –Ω–∞—á–∞—Ç
**–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç:** –í—ã—Å–æ–∫–∏–π
**–í—Ä–µ–º—è:** 3-4 –¥–Ω—è
**–ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏:** –≠—Ç–∞–ø 0
**–ü–∞—Ä–∞–ª–ª–µ–ª—å–Ω–æ—Å—Ç—å:** ‚úÖ –î–ê

## üéØ –¶–µ–ª—å

–ü–æ–ª–Ω–æ—Å—Ç—å—é —Ä–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å Worklog API (—É—á–µ—Ç –≤—Ä–µ–º–µ–Ω–∏).

## API Endpoints

| –ú–µ—Ç–æ–¥ | Endpoint | –û–ø–∏—Å–∞–Ω–∏–µ |
|-------|----------|----------|
| GET | `/v2/issues/{issueId}/worklog` | –ü–æ–ª—É—á–∏—Ç—å –∑–∞–ø–∏—Å–∏ –≤—Ä–µ–º–µ–Ω–∏ |
| POST | `/v2/issues/{issueId}/worklog` | –î–æ–±–∞–≤–∏—Ç—å –∑–∞–ø–∏—Å—å |
| PATCH | `/v2/issues/{issueId}/worklog/{worklogId}` | –ò–∑–º–µ–Ω–∏—Ç—å –∑–∞–ø–∏—Å—å |
| DELETE | `/v2/issues/{issueId}/worklog/{worklogId}` | –£–¥–∞–ª–∏—Ç—å –∑–∞–ø–∏—Å—å |

## MCP Tools (4)

1. `yandex_tracker_get_worklog`
2. `yandex_tracker_add_worklog`
3. `yandex_tracker_update_worklog`
4. `yandex_tracker_delete_worklog`

---

## ‚úÖ –ß–µ–∫-–ª–∏—Å—Ç –∑–∞–¥–∞—á

### 1. Entities

- [ ] **1.1** –°–æ–∑–¥–∞—Ç—å `worklog.entity.ts`
```typescript
export interface Worklog extends WithUnknownFields {
  id: string;
  self: string;
  issue: { id: string; key: string; display: string };
  comment?: string;
  createdBy: UserRef;
  createdAt: string;
  start: string;        // ISO 8601
  duration: string;     // "PT1H30M" (ISO 8601 duration)
}
```

### 2. Utilities (–í–ê–ñ–ù–û!)

- [ ] **2.1** –°–æ–∑–¥–∞—Ç—å `duration.util.ts` - –∫–æ–Ω–≤–µ—Ä—Ç–∞—Ü–∏—è "1h 30m" ‚Üî "PT1H30M"
```typescript
export class DurationUtil {
  static parseHumanReadable(duration: string): string; // "1h 30m" -> "PT1H30M"
  static toHumanReadable(iso: string): string;         // "PT1H30M" -> "1h 30m"
}
```
- [ ] **2.2** Unit-—Ç–µ—Å—Ç—ã –¥–ª—è DurationUtil (–ö–†–ò–¢–ò–ß–ù–û!)

### 3. DTO

- [ ] **3.1** `add-worklog.input.ts` (start, duration, comment)
- [ ] **3.2** `update-worklog.input.ts`
- [ ] **3.3** Output DTO

### 4. Operations (4)

- [ ] **4.1-4.4** GetWorklog, AddWorklog, UpdateWorklog, DeleteWorklog
- [ ] **4.5** Unit-—Ç–µ—Å—Ç—ã

### 5. MCP Tools (4)

- [ ] **5.1-5.4** –°–æ–∑–¥–∞—Ç—å 4 tools —Å —Ç–µ—Å—Ç–∞–º–∏
  - add-worklog –ø—Ä–∏–Ω–∏–º–∞–µ—Ç "1h", "30m", "2h 15m" –∏ –∫–æ–Ω–≤–µ—Ä—Ç–∏—Ä—É–µ—Ç –≤ ISO

### 6. Infrastructure + Docs + Validation

- [ ] **6.1** DI, Fixtures, –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è
- [ ] **6.2** Coverage ‚â•90%, validate —É—Å–ø–µ—à–Ω–æ

### 7. –ö–æ–º–º–∏—Ç

```
feat: —Ä–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å –ø–æ–ª–Ω—É—é –ø–æ–¥–¥–µ—Ä–∂–∫—É Worklog API

–î–æ–±–∞–≤–ª–µ–Ω—ã:
- Worklog entity
- DurationUtil –¥–ª—è –∫–æ–Ω–≤–µ—Ä—Ç–∞—Ü–∏–∏ —Ñ–æ—Ä–º–∞—Ç–æ–≤ –≤—Ä–µ–º–µ–Ω–∏
- 4 operations
- 4 MCP tools (–ø–æ–¥–¥–µ—Ä–∂–∫–∞ human-readable duration)
- –ü–æ–ª–Ω–æ–µ –ø–æ–∫—Ä—ã—Ç–∏–µ —Ç–µ—Å—Ç–∞–º–∏ ‚â•90%

ü§ñ Generated with Claude Code
Co-Authored-By: Claude <noreply@anthropic.com>
```

---

**–°–æ–∑–¥–∞–Ω–æ:** 2025-11-18
