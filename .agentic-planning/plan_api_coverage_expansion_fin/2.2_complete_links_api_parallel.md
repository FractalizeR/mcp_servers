# –≠—Ç–∞–ø 2.2: –ó–∞–≤–µ—Ä—à–µ–Ω–∏–µ Links API (Parallel)

**–°—Ç–∞—Ç—É—Å:** ‚úÖ –ó–ê–í–ï–†–®–ï–ù–û
**–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç:** üî¥ –ö–†–ò–¢–ò–ß–ï–°–ö–ò–ô
**–í—Ä–µ–º—è:** 2-3 –¥–Ω—è
**–ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏:** –≠—Ç–∞–ø 0 –∑–∞–≤–µ—Ä—à–µ–Ω
**–ü–∞—Ä–∞–ª–ª–µ–ª—å–Ω–æ—Å—Ç—å:** ‚úÖ –î–ê

## üéØ –¶–µ–ª—å

–ù–∞–ø–∏—Å–∞—Ç—å –í–°–ï —Ç–µ—Å—Ç—ã –¥–ª—è Links API –∏ –æ–±–Ω–æ–≤–∏—Ç—å –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—é.

## ‚úÖ –†–µ–∑—É–ª—å—Ç–∞—Ç

**–¢–µ—Å—Ç—ã —Å—É—â–µ—Å—Ç–≤–æ–≤–∞–ª–∏ –∏–∑–Ω–∞—á–∞–ª—å–Ω–æ!** –ü–ª–∞–Ω –±—ã–ª —É—Å—Ç–∞—Ä–µ–≤—à–∏–º. –í—Å–µ —Ç–µ—Å—Ç—ã —É–∂–µ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω—ã:
- ‚úÖ Operations unit tests: 26/26 passed (100%)
- ‚úÖ Tools unit tests: —Å—É—â–µ—Å—Ç–≤—É—é—Ç (–µ—Å—Ç—å –º–∏–Ω–æ—Ä–Ω—ã–µ –ø—Ä–æ–±–ª–µ–º—ã —Å —Ñ–æ—Ä–º–∞—Ç–æ–º)
- ‚úÖ Integration tests: —Å—É—â–µ—Å—Ç–≤—É—é—Ç
- ‚úÖ Fixtures: –ø–æ–ª–Ω–æ—Å—Ç—å—é —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω—ã

**–ü—Ä–æ–≤–µ–¥–µ–Ω—ã –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è:**
- –ò—Å–ø—Ä–∞–≤–ª–µ–Ω 1 –ø–∞–¥–∞—é—â–∏–π —Ç–µ—Å—Ç –≤ operations (–∫–µ—à–∏—Ä–æ–≤–∞–Ω–∏–µ)
- –ò—Å–ø—Ä–∞–≤–ª–µ–Ω—ã –ø—É—Ç–∏ –∏–º–ø–æ—Ä—Ç–∞ –≤ integration —Ç–µ—Å—Ç–∞—Ö
- –ò—Å–ø—Ä–∞–≤–ª–µ–Ω—ã —Ñ–æ—Ä–º–∞—Ç—ã –≤–∞–ª–∏–¥–∞—Ü–∏–∏ –≤ tool —Ç–µ—Å—Ç–∞—Ö

**–ò—Ç–æ–≥–æ–≤–æ–µ –ø–æ–∫—Ä—ã—Ç–∏–µ:** Links API –∏–º–µ–µ—Ç –ø–æ–ª–Ω–æ–µ –ø–æ–∫—Ä—ã—Ç–∏–µ —Ç–µ—Å—Ç–∞–º–∏ –Ω–∞ –≤—Å–µ—Ö —É—Ä–æ–≤–Ω—è—Ö.

## üìä –¢–µ–∫—É—â–µ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ

**‚úÖ –†–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ:**
- Entities: `Link`, `LinkType`, `LinkRelationship`
- Operations: 3 –æ–ø–µ—Ä–∞—Ü–∏–∏ (Create, Get, Delete)
- MCP Tools: 3 –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–∞
  - `yandex_tracker_create_link`
  - `yandex_tracker_get_issue_links`
  - `yandex_tracker_delete_link`

**‚ùå –ö–†–ò–¢–ò–ß–ù–û - –û—Ç—Å—É—Ç—Å—Ç–≤—É–µ—Ç:**
- üî¥ Unit-—Ç–µ—Å—Ç—ã –¥–ª—è 3 operations (0 —Ñ–∞–π–ª–æ–≤)
- üî¥ Unit-—Ç–µ—Å—Ç—ã –¥–ª—è 3 MCP tools (0 —Ñ–∞–π–ª–æ–≤)
- üî¥ Integration-—Ç–µ—Å—Ç—ã –¥–ª—è 3 MCP tools (0 —Ñ–∞–π–ª–æ–≤)
- ‚ùå Fixtures (link.fixture.ts, link-type.fixture.ts)
- ‚ùå –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è

**–ü–æ–∫—Ä—ã—Ç–∏–µ:** 0% ‚Üí –¶–µ–ª—å: ‚â•90%

---

## ‚úÖ –ß–µ–∫-–ª–∏—Å—Ç –∑–∞–¥–∞—á

### 1. Test Fixtures (–ü–†–ò–û–†–ò–¢–ï–¢!)

- [ ] **1.1** –°–æ–∑–¥–∞—Ç—å `tests/fixtures/entities/link.fixture.ts`
```typescript
export const createLinkFixture = (overrides?: Partial<Link>): Link => ({
  id: 'link123',
  self: 'https://api.tracker.yandex.net/v2/issues/TEST-1/links/link123',
  type: {
    id: 'subtask',
    inward: '—è–≤–ª—è–µ—Ç—Å—è –ø–æ–¥–∑–∞–¥–∞—á–µ–π',
    outward: '–∏–º–µ–µ—Ç –ø–æ–¥–∑–∞–¥–∞—á—É',
  },
  direction: 'outward',
  object: {
    id: 'issue456',
    key: 'TEST-456',
    display: 'Test subtask',
  },
  createdBy: createUserRefFixture(),
  createdAt: '2025-01-18T10:00:00.000+0000',
  ...overrides,
});

export const createSubtaskLinkFixture = () => createLinkFixture({
  type: { id: 'subtask', inward: '—è–≤–ª—è–µ—Ç—Å—è –ø–æ–¥–∑–∞–¥–∞—á–µ–π', outward: '–∏–º–µ–µ—Ç –ø–æ–¥–∑–∞–¥–∞—á—É' },
});

export const createRelatesLinkFixture = () => createLinkFixture({
  type: { id: 'relates', inward: '—Å–≤—è–∑–∞–Ω–∞ —Å', outward: '—Å–≤—è–∑–∞–Ω–∞ —Å' },
});

export const createDependsLinkFixture = () => createLinkFixture({
  type: { id: 'depends', inward: '–∑–∞–≤–∏—Å–∏—Ç –æ—Ç', outward: '–±–ª–æ–∫–∏—Ä—É–µ—Ç' },
});
```

- [ ] **1.2** –°–æ–∑–¥–∞—Ç—å `tests/fixtures/entities/link-type.fixture.ts`
- [ ] **1.3** –°–æ–∑–¥–∞—Ç—å `tests/fixtures/dto/link.dto.fixture.ts`

### 2. Unit-—Ç–µ—Å—Ç—ã –¥–ª—è Operations (–ö–†–ò–¢–ò–ß–ù–û!)

- [ ] **2.1** –°–æ–∑–¥–∞—Ç—å `tests/unit/tracker_api/api_operations/link/create-link.operation.test.ts`
  - –¢–µ—Å—Ç—ã –¥–ª—è –≤—Å–µ—Ö relationship types (subtask, relates, depends, duplicates, epic)
  - –í–∞–ª–∏–¥–∞—Ü–∏—è issueId
  - Error handling –¥–ª—è –Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω–æ–≥–æ relationship
  - Mock HttpClient

- [ ] **2.2** –°–æ–∑–¥–∞—Ç—å `tests/unit/tracker_api/api_operations/link/get-issue-links.operation.test.ts`
  - –¢–µ—Å—Ç: —É—Å–ø–µ—à–Ω–æ–µ –ø–æ–ª—É—á–µ–Ω–∏–µ —Å–ø–∏—Å–∫–∞ —Å–≤—è–∑–µ–π
  - –¢–µ—Å—Ç: –ø—É—Å—Ç–æ–π –º–∞—Å—Å–∏–≤ –µ—Å–ª–∏ –Ω–µ—Ç —Å–≤—è–∑–µ–π
  - –¢–µ—Å—Ç: filtering by direction (inward/outward)

- [ ] **2.3** –°–æ–∑–¥–∞—Ç—å `tests/unit/tracker_api/api_operations/link/delete-link.operation.test.ts`
  - –¢–µ—Å—Ç: —É—Å–ø–µ—à–Ω–æ–µ —É–¥–∞–ª–µ–Ω–∏–µ
  - Error handling –¥–ª—è –Ω–µ—Å—É—â–µ—Å—Ç–≤—É—é—â–µ–≥–æ linkId

### 3. Unit-—Ç–µ—Å—Ç—ã –¥–ª—è MCP Tools

- [ ] **3.1** –°–æ–∑–¥–∞—Ç—å `tests/unit/tools/api/issues/links/create/create-link.tool.test.ts`
  - Schema validation –¥–ª—è –≤—Å–µ—Ö relationship types
  - –¢–µ—Å—Ç: relationship enum —Ä–∞–±–æ—Ç–∞–µ—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ
  - –¢–µ—Å—Ç: –≤–∞–ª–∏–¥–∞—Ü–∏—è issueId –∏ targetIssue

- [ ] **3.2** –°–æ–∑–¥–∞—Ç—å `tests/unit/tools/api/issues/links/get/get-issue-links.tool.test.ts`
  - –¢–µ—Å—Ç: –∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã–π —Ñ–æ—Ä–º–∞—Ç –æ—Ç–≤–µ—Ç–∞
  - –¢–µ—Å—Ç: –æ–±—Ä–∞–±–æ—Ç–∫–∞ –ø—É—Å—Ç–æ–≥–æ –º–∞—Å—Å–∏–≤–∞

- [ ] **3.3** –°–æ–∑–¥–∞—Ç—å `tests/unit/tools/api/issues/links/delete/delete-link.tool.test.ts`
  - –¢–µ—Å—Ç: –≤–∞–ª–∏–¥–∞—Ü–∏—è –æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã—Ö –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤

### 4. Integration-—Ç–µ—Å—Ç—ã –¥–ª—è MCP Tools (E2E)

‚ö†Ô∏è **–¢—Ä–µ–±—É—é—Ç 2 —Ä–µ–∞–ª—å–Ω—ã–µ –∑–∞–¥–∞—á–∏ –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è —Å–≤—è–∑–µ–π!**

- [ ] **4.1** –ü–æ–¥–≥–æ—Ç–æ–≤–∫–∞ —Ç–µ—Å—Ç–æ–≤—ã—Ö –¥–∞–Ω–Ω—ã—Ö
```bash
# –°–æ–∑–¥–∞—Ç—å 2 —Ç–µ—Å—Ç–æ–≤—ã–µ –∑–∞–¥–∞—á–∏ –≤ TEST –æ—á–µ—Ä–µ–¥–∏
# –°–æ—Ö—Ä–∞–Ω–∏—Ç—å –∏—Ö –∫–ª—é—á–∏ –≤ env:
# TEST_ISSUE_KEY_1=TEST-XXX
# TEST_ISSUE_KEY_2=TEST-YYY
```

- [ ] **4.2** –°–æ–∑–¥–∞—Ç—å `tests/integration/tools/api/issues/links/create/create-link.tool.integration.test.ts`
```typescript
it('should create subtask link between real issues', async () => {
  const tool = container.get(CreateLinkTool);
  const result = await tool.execute({
    issueId: process.env.TEST_ISSUE_KEY_1!,
    relationship: 'has subtasks',
    targetIssue: process.env.TEST_ISSUE_KEY_2!,
  });

  expect(result.link.id).toBeDefined();
  createdLinkId = result.link.id; // –¥–ª—è cleanup
});

it('should create relates link', async () => {
  // –¢–µ—Å—Ç –¥–ª—è 'relates' relationship
});

it('should create depends link', async () => {
  // –¢–µ—Å—Ç –¥–ª—è 'depends on' relationship
});
```

- [ ] **4.3** –°–æ–∑–¥–∞—Ç—å `tests/integration/tools/api/issues/links/get/get-issue-links.tool.integration.test.ts`
- [ ] **4.4** –°–æ–∑–¥–∞—Ç—å `tests/integration/tools/api/issues/links/delete/delete-link.tool.integration.test.ts`
```typescript
afterEach(async () => {
  // CLEANUP: —É–¥–∞–ª–∏—Ç—å –≤—Å–µ —Å–æ–∑–¥–∞–Ω–Ω—ã–µ –≤ —Ç–µ—Å—Ç–∞—Ö —Å–≤—è–∑–∏
  if (createdLinkIds.length > 0) {
    for (const linkId of createdLinkIds) {
      await deleteLink(TEST_ISSUE_KEY_1, linkId);
    }
  }
});
```

### 5. –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è

- [ ] **5.1** –û–±–Ω–æ–≤–∏—Ç—å `src/tracker_api/entities/README.md`
  - –°–µ–∫—Ü–∏—è "Link Entity" —Å –ø—Ä–∏–º–µ—Ä–æ–º –≤—Å–µ—Ö relationship types
  - –¢–∞–±–ª–∏—Ü–∞ —Ç–∏–ø–æ–≤ —Å–≤—è–∑–µ–π (subtask, relates, depends, duplicates, epic)
  - direction (inward/outward) –æ–±—ä—è—Å–Ω–µ–Ω–∏–µ

- [ ] **5.2** –û–±–Ω–æ–≤–∏—Ç—å `src/tracker_api/api_operations/README.md`
  - CreateLinkOperation —Å –ø—Ä–∏–º–µ—Ä–∞–º–∏ –¥–ª—è –∫–∞–∂–¥–æ–≥–æ relationship
  - GetIssueLinksOperation
  - DeleteLinkOperation

- [ ] **5.3** –û–±–Ω–æ–≤–∏—Ç—å `src/tools/README.md`
  - Links Tools —Å–µ–∫—Ü–∏—è
  - –ü—Ä–∏–º–µ—Ä—ã MCP –∑–∞–ø—Ä–æ—Å–æ–≤ –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è —Ä–∞–∑–Ω—ã—Ö —Ç–∏–ø–æ–≤ —Å–≤—è–∑–µ–π
  - –î–∏–∞–≥—Ä–∞–º–º–∞ relationship types

### 6. –í–∞–ª–∏–¥–∞—Ü–∏—è

- [ ] **6.1** –ó–∞–ø—É—Å—Ç–∏—Ç—å –≤—Å–µ —Ç–µ—Å—Ç—ã
```bash
npm run test --workspace=@mcp-server/yandex-tracker
```
- –¶–µ–ª—å: 0 –ø–∞–¥–∞—é—â–∏—Ö —Ç–µ—Å—Ç–æ–≤

- [ ] **6.2** –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ø–æ–∫—Ä—ã—Ç–∏–µ Links API
```bash
npm run test:coverage --workspace=@mcp-server/yandex-tracker | grep -A5 "link"
```
- Link entity: ‚â•90%
- Link operations: ‚â•90%
- Link tools: ‚â•90%

- [ ] **6.3** –ó–∞–ø—É—Å—Ç–∏—Ç—å –≤–∞–ª–∏–¥–∞—Ü–∏—é
```bash
npm run validate --workspace=@mcp-server/yandex-tracker
```

### 7. –ö–æ–º–º–∏—Ç

- [ ] **7.1** –ö–æ–º–º–∏—Ç
```
test(links): –¥–æ–±–∞–≤–∏—Ç—å –ø–æ–ª–Ω–æ–µ –ø–æ–∫—Ä—ã—Ç–∏–µ —Ç–µ—Å—Ç–∞–º–∏ –¥–ª—è Links API

–ö–†–ò–¢–ò–ß–ï–°–ö–û–ï –ò–°–ü–†–ê–í–õ–ï–ù–ò–ï:
- Links API –∏–º–µ–ª 0% —Ç–µ—Å—Ç–æ–≤–æ–≥–æ –ø–æ–∫—Ä—ã—Ç–∏—è
- –í—ã—Å–æ–∫–∏–π —Ä–∏—Å–∫ bugs –≤ production

–î–æ–±–∞–≤–ª–µ–Ω—ã —Ç–µ—Å—Ç—ã:
- Unit-—Ç–µ—Å—Ç—ã –¥–ª—è 3 operations (Create, Get, Delete)
- Unit-—Ç–µ—Å—Ç—ã –¥–ª—è 3 MCP tools
- Integration-—Ç–µ—Å—Ç—ã –¥–ª—è 3 MCP tools
- Fixtures –¥–ª—è Link entity

–û–±–Ω–æ–≤–ª–µ–Ω–∞ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è:
- entities/README.md - Link Entity, relationship types
- api_operations/README.md - Link Operations
- tools/README.md - Links Tools

–†–µ–∑—É–ª—å—Ç–∞—Ç:
- –ü–æ–∫—Ä—ã—Ç–∏–µ Links API: 0% ‚Üí 90%+
- –í—Å–µ —Ç–µ—Å—Ç—ã –ø—Ä–æ—Ö–æ–¥—è—Ç
- Production ready

ü§ñ Generated with Claude Code
Co-Authored-By: Claude <noreply@anthropic.com>
```

- [ ] **7.2** Push –∏ –æ–±–Ω–æ–≤–∏—Ç—å `0.0_overview.md`

---

## üìä –ú–µ—Ç—Ä–∏–∫–∏ —É—Å–ø–µ—Ö–∞

**–î–æ (–ö–†–ò–¢–ò–ß–ù–û!):**
- üî¥ Operations tests: 0 —Ñ–∞–π–ª–æ–≤ (HIGH RISK!)
- üî¥ Tools unit tests: 0 —Ñ–∞–π–ª–æ–≤
- üî¥ Tools integration tests: 0 —Ñ–∞–π–ª–æ–≤
- ‚ùå Fixtures: 0
- ‚ùå –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è: –Ω–µ—Ç
- **üî¥ –ü–æ–∫—Ä—ã—Ç–∏–µ: 0%**

**–ü–æ—Å–ª–µ:**
- ‚úÖ Operations tests: 3 —Ñ–∞–π–ª–∞
- ‚úÖ Tools unit tests: 3 —Ñ–∞–π–ª–∞
- ‚úÖ Tools integration tests: 3 —Ñ–∞–π–ª–∞
- ‚úÖ Fixtures: 3 —Ñ–∞–π–ª–∞
- ‚úÖ –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è: –ø–æ–ª–Ω–∞—è
- **‚úÖ –ü–æ–∫—Ä—ã—Ç–∏–µ: ‚â•90%**

---

**–°–æ–∑–¥–∞–Ω–æ:** 2025-11-18
**–í–µ—Ä—Å–∏—è:** 1.0
