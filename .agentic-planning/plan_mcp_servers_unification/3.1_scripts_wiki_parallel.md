# –≠—Ç–∞–ø 3.1: –°–ª—É–∂–µ–±–Ω—ã–µ —Å–∫—Ä–∏–ø—Ç—ã –¥–ª—è Yandex Wiki (parallel)

**–í—Ä–µ–º—è:** ~1-2 —á–∞—Å–∞
**–ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏:** –≠—Ç–∞–ø 2.1 (smoke —Ç–µ—Å—Ç—ã wiki)
**–ü–∞—Ä–∞–ª–ª–µ–ª—å–Ω–æ —Å:** 3.2 (TickTick —Å–∫—Ä–∏–ø—Ç—ã)

---

## –ó–∞–¥–∞—á–∞

–î–æ–±–∞–≤–∏—Ç—å —Å–ª—É–∂–µ–±–Ω—ã–µ —Å–∫—Ä–∏–ø—Ç—ã –≤ yandex-wiki:
1. `scripts/generate-tool-index.ts`
2. `scripts/validate-tool-registration.ts`

---

## –ß–µ–∫–ª–∏—Å—Ç

### –°–∫—Ä–∏–ø—Ç—ã
- [x] –°–æ–∑–¥–∞—Ç—å `scripts/generate-tool-index.ts`
- [x] –°–æ–∑–¥–∞—Ç—å `scripts/validate-tool-registration.ts`

### package.json
- [x] –î–æ–±–∞–≤–∏—Ç—å `"prebuild": "npm run generate:index"`
- [x] –î–æ–±–∞–≤–∏—Ç—å `"generate:index": "tsx scripts/generate-tool-index.ts"`
- [x] –î–æ–±–∞–≤–∏—Ç—å `"validate:tools": "tsx scripts/validate-tool-registration.ts"`

### –í–∞–ª–∏–¥–∞—Ü–∏—è
- [x] `npm run generate:index` —Ä–∞–±–æ—Ç–∞–µ—Ç
- [x] `npm run validate:tools` —Ä–∞–±–æ—Ç–∞–µ—Ç
- [x] `npm run build` –≤–∫–ª—é—á–∞–µ—Ç prebuild

---

## –ò—Å—Ç–æ—á–Ω–∏–∫–∏ –¥–ª—è –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏—è

**–ò–∑ yandex-tracker:**
- `scripts/generate-tool-index.ts`
- `scripts/validate-tool-registration.ts`

---

## generate-tool-index.ts

### –ê–¥–∞–ø—Ç–∞—Ü–∏–∏

```typescript
// –ö–æ–Ω—Å—Ç–∞–Ω—Ç—ã –¥–ª—è Wiki
const TOOLS_DIR = path.join(__dirname, '../src/tools');
const OUTPUT_FILE = path.join(TOOLS_DIR, 'generated-index.ts');
const TOOL_FILE_PATTERN = /\.tool\.ts$/;

// –ü—Ä–µ—Ñ–∏–∫—Å –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–æ–≤ Wiki
const TOOL_PREFIX = 'yw_';  // –∏–ª–∏ –∫–∞–∫–æ–π –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è
```

### –ß—Ç–æ –¥–µ–ª–∞–µ—Ç —Å–∫—Ä–∏–ø—Ç

1. –°–∫–∞–Ω–∏—Ä—É–µ—Ç `src/tools/` —Ä–µ–∫—É—Ä—Å–∏–≤–Ω–æ
2. –ù–∞—Ö–æ–¥–∏—Ç –≤—Å–µ —Ñ–∞–π–ª—ã `*.tool.ts`
3. –ì–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç `generated-index.ts` —Å —ç–∫—Å–ø–æ—Ä—Ç–∞–º–∏ –≤—Å–µ—Ö Tool –∫–ª–∞—Å—Å–æ–≤

### –ü—Ä–∏–º–µ—Ä –≤—ã–≤–æ–¥–∞

```typescript
// generated-index.ts - –ê–í–¢–û–ì–ï–ù–ï–†–ò–†–û–í–ê–ù–ù–´–ô –§–ê–ô–õ
// –ù–µ —Ä–µ–¥–∞–∫—Ç–∏—Ä—É–π—Ç–µ –≤—Ä—É—á–Ω—É—é! –ó–∞–ø—É—Å—Ç–∏—Ç–µ: npm run generate:index

export { PingTool } from './helpers/ping/ping.tool.js';
export { GetPageTool } from './api/pages/get/get-page.tool.js';
export { CreatePageTool } from './api/pages/create/create-page.tool.js';
// ... –≤—Å–µ tools
```

---

## validate-tool-registration.ts

### –ê–¥–∞–ø—Ç–∞—Ü–∏–∏

```typescript
// –ò–º–ø–æ—Ä—Ç—ã –¥–ª—è Wiki
import { TOOL_CLASSES } from '../src/composition-root/definitions/tool-definitions.js';

// –ü—É—Ç—å –∫ tools
const TOOLS_DIR = path.join(__dirname, '../src/tools');
```

### –ß—Ç–æ –ø—Ä–æ–≤–µ—Ä—è–µ—Ç —Å–∫—Ä–∏–ø—Ç

1. –í—Å–µ `*.tool.ts` —Ñ–∞–π–ª—ã –Ω–∞–π–¥–µ–Ω—ã
2. –ö–∞–∂–¥—ã–π Tool –∫–ª–∞—Å—Å –¥–æ–±–∞–≤–ª–µ–Ω –≤ `TOOL_CLASSES`
3. –ö–∞–∂–¥—ã–π Tool –∏–º–µ–µ—Ç static `METADATA`
4. –ö–∞–∂–¥—ã–π Tool –∏–º–µ–µ—Ç –º–µ—Ç–æ–¥ `getParamsSchema()`

### –ü—Ä–∏–º–µ—Ä –≤—ã–≤–æ–¥–∞

```
üîç –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏ –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–æ–≤...

‚úÖ –ù–∞–π–¥–µ–Ω–æ 18 —Ñ–∞–π–ª–æ–≤ *.tool.ts
‚úÖ –ó–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞–Ω–æ 18 –∫–ª–∞—Å—Å–æ–≤ –≤ TOOL_CLASSES

‚úÖ –í—Å–µ –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ –∑–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞–Ω—ã!
```

---

## –ò–∑–º–µ–Ω–µ–Ω–∏—è –≤ package.json

```json
{
  "scripts": {
    "prebuild": "npm run generate:index",
    "generate:index": "tsx scripts/generate-tool-index.ts",
    "validate:tools": "tsx scripts/validate-tool-registration.ts"
  }
}
```

---

## –í–∞–ª–∏–¥–∞—Ü–∏—è

```bash
cd packages/servers/yandex-wiki

# –ì–µ–Ω–µ—Ä–∞—Ü–∏—è –∏–Ω–¥–µ–∫—Å–∞
npm run generate:index
# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —á—Ç–æ —Å–æ–∑–¥–∞–Ω src/tools/generated-index.ts

# –í–∞–ª–∏–¥–∞—Ü–∏—è —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏
npm run validate:tools
# –î–æ–ª–∂–Ω–æ –≤—ã–≤–µ—Å—Ç–∏: "–í—Å–µ –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ –∑–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞–Ω—ã!"

# –ü–æ–ª–Ω–∞—è —Å–±–æ—Ä–∫–∞ (–≤–∫–ª—é—á–∞–µ—Ç prebuild)
npm run build
```

---

## –ö–æ–º–º–∏—Ç

```
feat(wiki): –¥–æ–±–∞–≤–∏—Ç—å —Å–ª—É–∂–µ–±–Ω—ã–µ —Å–∫—Ä–∏–ø—Ç—ã

–î–æ–±–∞–≤–ª–µ–Ω—ã —Å–∫—Ä–∏–ø—Ç—ã:
- generate-tool-index.ts - –∞–≤—Ç–æ–≥–µ–Ω–µ—Ä–∞—Ü–∏—è –∏–Ω–¥–µ–∫—Å–∞ tools
- validate-tool-registration.ts - –ø—Ä–æ–≤–µ—Ä–∫–∞ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏ tools

–û–±–Ω–æ–≤–ª—ë–Ω package.json:
- –î–æ–±–∞–≤–ª–µ–Ω prebuild –¥–ª—è –∞–≤—Ç–æ–≥–µ–Ω–µ—Ä–∞—Ü–∏–∏
- –î–æ–±–∞–≤–ª–µ–Ω–∞ –∫–æ–º–∞–Ω–¥–∞ validate:tools
```
