# Этап 3.1: Checklists API (Чеклисты)

**Статус:** ⏪ Не начат
**Приоритет:** Важный
**Время:** 3-5 дней
**Зависимости:** `1.1_preparation.md`
**Параллельность:** ✅ Да

## Цель
Реализовать работу с чеклистами в задачах - создание, получение, обновление, удаление элементов.

## API Endpoints

| Метод | Endpoint | Описание |
|-------|----------|----------|
| GET | `/v3/issues/{issueId}/checklistItems` | Получить чеклист |
| POST | `/v3/issues/{issueId}/checklistItems` | Добавить элемент |
| PATCH | `/v3/issues/{issueId}/checklistItems/{checklistId}` | Изменить элемент |
| DELETE | `/v3/issues/{issueId}/checklistItems/{checklistId}` | Удалить элемент |

## MCP Tools (4)

1. `yandex_tracker_get_checklist`
2. `yandex_tracker_add_checklist_item`
3. `yandex_tracker_update_checklist_item`
4. `yandex_tracker_delete_checklist_item`

---

## Структура реализации

### 1. Entities
- [ ] `checklist-item.entity.ts`
  ```typescript
  export interface ChecklistItem extends WithUnknownFields {
    id: string;
    text: string;
    checked: boolean;
    assignee?: UserRef;
    deadline?: string;  // ISO 8601
  }
  ```

### 2. DTO
- [ ] `add-checklist-item.input.ts` - text, assignee?, deadline?
- [ ] `update-checklist-item.input.ts` - Partial (text, checked, assignee, deadline)
- [ ] Output DTO

### 3. Operations (4)
- [ ] GetChecklistOperation
- [ ] AddChecklistItemOperation
- [ ] UpdateChecklistItemOperation
- [ ] DeleteChecklistItemOperation
- [ ] Unit-тесты

### 4. Tools (4)
- [ ] get-checklist tool + tests
- [ ] add-checklist-item tool + tests
- [ ] update-checklist-item tool + tests
- [ ] delete-checklist-item tool + tests

### 5. Infrastructure
- [ ] DI registration
- [ ] Fixtures
- [ ] Документация

### 6. Validation & Tests
- [ ] Unit tests ≥90%
- [ ] Integration tests (E2E checklist workflow)
- [ ] `npm run validate`

### 7. Commit
- [ ] `feat: добавить поддержку Checklists API`
- [ ] Push + update overview

---

## Примеры

```json
// Добавить элемент чеклиста
{
  "name": "yandex_tracker_add_checklist_item",
  "arguments": {
    "issueId": "TEST-123",
    "text": "Review code",
    "assignee": "john.doe",
    "deadline": "2025-02-01"
  }
}

// Отметить выполненным
{
  "name": "yandex_tracker_update_checklist_item",
  "arguments": {
    "issueId": "TEST-123",
    "checklistId": "abc123",
    "checked": true
  }
}
```

---

**Создано:** 2025-01-18
