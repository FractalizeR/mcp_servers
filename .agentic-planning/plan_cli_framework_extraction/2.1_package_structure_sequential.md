# 2.1 Создание структуры пакета @mcp-framework/cli

**Тип:** Sequential
**Зависимости:** Этап 1 (все)
**Время:** ~30 минут

---

## Задача

Создать базовую структуру нового пакета `@mcp-framework/cli` со всеми необходимыми файлами конфигурации.

---

## Действия

### 1. Создать директорию

```bash
mkdir -p packages/framework/cli/src
mkdir -p packages/framework/cli/tests
```

### 2. Создать package.json

**Базовая конфигурация:**
- name: `@mcp-framework/cli`
- version: `2.0.0` (следуем версии monorepo)
- description: Generic CLI for MCP server connection management
- keywords: mcp, cli, claude, connector
- dependencies: только infrastructure + npm пакеты (inquirer, chalk, ora, commander)
- devDependencies: те же что в других framework пакетах

**Обязательные npm scripts:** (из CLAUDE.md)
- build, clean, lint, lint:fix, lint:quiet
- format, format:check
- test, test:coverage, test:quiet, test:verbose, test:watch
- typecheck, validate, validate:quiet

### 3. Создать tsconfig.json

**Наследуется от корневого:**
```json
{
  "extends": "../../../tsconfig.base.json",
  "compilerOptions": {
    "outDir": "./dist",
    "rootDir": "./src",
    "paths": {
      "#cli/*": ["./src/*"],
      "#types": ["./src/types.ts"]
    }
  },
  "include": ["src/**/*"],
  "exclude": ["node_modules", "dist", "tests"]
}
```

### 4. Создать .eslintrc.cjs

**Копировать конфигурацию из других framework пакетов**

### 5. Создать README.md

**Структура:**
- Overview
- Installation
- Quick Start (пример для generic MCP server)
- API Reference (link to API.md)
- Supported Clients
- Adding New Client
- Architecture

### 6. Создать директории для кода

```
packages/framework/cli/src/
├── connectors/
│   ├── base/
│   ├── claude-desktop/
│   ├── claude-code/
│   ├── codex/
│   ├── gemini/
│   ├── qwen/
│   └── index.ts
├── commands/
│   └── index.ts
├── utils/
│   └── index.ts
├── types.ts
└── index.ts (main export)
```

### 7. Обновить корневой package.json

**Добавить workspace:**
```json
{
  "workspaces": [
    "packages/framework/infrastructure",
    "packages/framework/core",
    "packages/framework/search",
    "packages/framework/cli",  // ← новый
    "packages/servers/yandex-tracker"
  ]
}
```

### 8. Обновить turbo.json

**Добавить CLI в pipeline** (если нужны специфичные правила)

### 9. Создать начальные файлы

**src/index.ts:**
```typescript
/**
 * @mcp-framework/cli
 * Generic CLI for MCP server connection management
 */

export * from './types.js';
export * from './connectors/index.js';
export * from './commands/index.js';
export * from './utils/index.js';
```

**src/types.ts:**
```typescript
/**
 * Core types for MCP CLI
 */

// Будет заполнен на основе API_DESIGN.md из этапа 1.3
```

---

## Результат

**Готовая структура пакета:**
- [ ] Директория создана
- [ ] package.json сконфигурирован
- [ ] tsconfig.json создан
- [ ] Все обязательные npm scripts добавлены
- [ ] README.md с базовым содержанием
- [ ] Структура директорий src/
- [ ] Корневой package.json обновлен
- [ ] Начальные файлы созданы

---

## Валидация

```bash
# Установить зависимости
npm install

# Проверить структуру workspace
npm run build --workspace=@mcp-framework/cli

# Должна быть ошибка (нет кода), но workspace должен резолвиться
```

---

## Критерии готовности

- [ ] `packages/framework/cli/` существует
- [ ] `npm install` проходит без ошибок
- [ ] Workspace резолвится корректно
- [ ] Все файлы конфигурации на месте
- [ ] README.md создан
- [ ] Структура src/ создана
