# –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–Ω–æ–µ —Ä–µ–≤—å—é: –ü–ª–∞–Ω –≤—ã–Ω–æ—Å–∞ CLI –≤ framework

**–†–µ–≤—å—é–µ—Ä:** Senior Software Architect
**–î–∞—Ç–∞:** 2025-11-22
**–û—Ü–µ–Ω–∫–∞:** 7.5/10 ‚Äî –•–æ—Ä–æ—à–∏–π –ø–ª–∞–Ω, –Ω–æ –µ—Å—Ç—å –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏–µ –ø—Ä–æ–±–µ–ª—ã

---

## ‚úÖ –°–∏–ª—å–Ω—ã–µ —Å—Ç–æ—Ä–æ–Ω—ã

### 1. –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–Ω—ã–π –¥–∏–∑–∞–π–Ω
- ‚úÖ **–ü—Ä–∞–≤–∏–ª—å–Ω—ã–π dependency graph** ‚Äî CLI –∑–∞–≤–∏—Å–∏—Ç —Ç–æ–ª—å–∫–æ –æ—Ç infrastructure
- ‚úÖ **Generic –ø–æ–¥—Ö–æ–¥** ‚Äî TConfig –ø–∞—Ä–∞–º–µ—Ç—Ä–∏–∑–∞—Ü–∏—è –∫–æ—Ä—Ä–µ–∫—Ç–Ω–∞
- ‚úÖ **Separation of concerns** ‚Äî –º–µ—Ö–∞–Ω–∏–∑–º –æ—Ç–¥–µ–ª–µ–Ω –æ—Ç —Å–æ–¥–µ—Ä–∂–∞–Ω–∏—è
- ‚úÖ **Open/Closed principle** ‚Äî –ª–µ–≥–∫–æ –¥–æ–±–∞–≤–∏—Ç—å –Ω–æ–≤—ã–π –∫–æ–Ω–Ω–µ–∫—Ç–æ—Ä –±–µ–∑ –∏–∑–º–µ–Ω–µ–Ω–∏—è framework

### 2. –ü—Ä–æ—Ü–µ—Å—Å
- ‚úÖ **–ü–æ—ç—Ç–∞–ø–Ω—ã–π –ø–æ–¥—Ö–æ–¥** ‚Äî —Å–Ω–∏–∂–∞–µ—Ç —Ä–∏—Å–∫–∏
- ‚úÖ **–ü–∞—Ä–∞–ª–ª–µ–ª–∏–∑–∞—Ü–∏—è** ‚Äî —ç—Ç–∞–ø—ã 3 –∏ 6 –º–æ–∂–Ω–æ –¥–µ–ª–∞—Ç—å –æ–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω–æ
- ‚úÖ **–í–∞–ª–∏–¥–∞—Ü–∏—è –ø–æ—Å–ª–µ –∫–∞–∂–¥–æ–≥–æ —ç—Ç–∞–ø–∞** ‚Äî –±—ã—Å—Ç—Ä–∞—è –æ–±—Ä–∞—Ç–Ω–∞—è —Å–≤—è–∑—å

### 3. –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ
- ‚úÖ **–ü–æ–∫—Ä—ã—Ç–∏–µ ‚â•90%** ‚Äî —Ö–æ—Ä–æ—à–∏–π —Ç–∞—Ä–≥–µ—Ç
- ‚úÖ **Unit + Integration —Ç–µ—Å—Ç—ã** ‚Äî –ø—Ä–∞–≤–∏–ª—å–Ω—ã–π –ø–æ–¥—Ö–æ–¥

---

## üö® –ö—Ä–∏—Ç–∏—á–µ—Å–∫–∏–µ –ø—Ä–æ–±–ª–µ–º—ã

### 1. ‚ùå –û—Ç—Å—É—Ç—Å—Ç–≤–∏–µ –º–∏–≥—Ä–∞—Ü–∏–æ–Ω–Ω–æ–π —Å—Ç—Ä–∞—Ç–µ–≥–∏–∏

**–ü—Ä–æ–±–ª–µ–º–∞:** –ü–ª–∞–Ω –Ω–µ –æ–ø–∏—Å—ã–≤–∞–µ—Ç, –∫–∞–∫ –æ–±–µ—Å–ø–µ—á–∏—Ç—å –ø–ª–∞–≤–Ω—É—é –º–∏–≥—Ä–∞—Ü–∏—é –±–µ–∑ –ø—Ä–æ—Å—Ç–æ—è.

**–ß—Ç–æ –Ω–µ —Ö–≤–∞—Ç–∞–µ—Ç:**
- –ù–µ—Ç —Å—Ç—Ä–∞—Ç–µ–≥–∏–∏ co-existence —Å—Ç–∞—Ä–æ–≥–æ –∏ –Ω–æ–≤–æ–≥–æ –∫–æ–¥–∞
- –ù–µ—Ç feature flag –¥–ª—è –ø–æ—Å—Ç–µ–ø–µ–Ω–Ω–æ–≥–æ –≤–∫–ª—é—á–µ–Ω–∏—è
- –ù–µ –æ–ø–∏—Å–∞–Ω rollback plan –µ—Å–ª–∏ —á—Ç–æ-—Ç–æ —Å–ª–æ–º–∞–µ—Ç—Å—è
- –ù–µ—Ç smoke tests –Ω–∞ production-like –æ–∫—Ä—É–∂–µ–Ω–∏–∏

**–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è:**
```markdown
## –≠—Ç–∞–ø 5.5: Feature Flag Strategy (–î–û–ë–ê–í–ò–¢–¨)

1. –î–æ–±–∞–≤–∏—Ç—å feature flag –≤ yandex-tracker:
   ```typescript
   const USE_FRAMEWORK_CLI = process.env.USE_FRAMEWORK_CLI === 'true';

   if (USE_FRAMEWORK_CLI) {
     // –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å @mcp-framework/cli
   } else {
     // –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —Å—Ç–∞—Ä—ã–π –∫–æ–¥
   }
   ```

2. –ü–æ—ç—Ç–∞–ø–Ω–æ–µ –≤–∫–ª—é—á–µ–Ω–∏–µ:
   - –ù–µ–¥–µ–ª—è 1: –¢–æ–ª—å–∫–æ –≤ dev —Å—Ä–µ–¥–µ
   - –ù–µ–¥–µ–ª—è 2: Beta –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏
   - –ù–µ–¥–µ–ª—è 3: 50% –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
   - –ù–µ–¥–µ–ª—è 4: 100% –µ—Å–ª–∏ –Ω–µ—Ç –ø—Ä–æ–±–ª–µ–º

3. Rollback plan:
   - –û—Å—Ç–∞–≤–∏—Ç—å —Å—Ç–∞—Ä—ã–π –∫–æ–¥ –¥–æ –ø–æ–ª–Ω–æ–≥–æ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è —Ä–∞–±–æ—Ç—ã –Ω–æ–≤–æ–≥–æ
   - –£–¥–∞–ª–∏—Ç—å —Å—Ç–∞—Ä—ã–π –∫–æ–¥ —Ç–æ–ª—å–∫–æ —á–µ—Ä–µ–∑ 2-4 –Ω–µ–¥–µ–ª–∏ –ø–æ—Å–ª–µ –º–∏–≥—Ä–∞—Ü–∏–∏
```

### 2. ‚ùå –ù–µ—Ç –æ–±—Ä–∞–±–æ—Ç–∫–∏ Breaking Changes

**–ü—Ä–æ–±–ª–µ–º–∞:** –ü–ª–∞–Ω —É–¥–∞–ª—è–µ—Ç —Å—Ç–∞—Ä—ã–π –∫–æ–¥ —Å—Ä–∞–∑—É (—ç—Ç–∞–ø 5.3), –Ω–æ –Ω–µ –æ–ø–∏—Å—ã–≤–∞–µ—Ç:
- –ö–∞–∫ —É–≤–µ–¥–æ–º–∏—Ç—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π –æ breaking changes
- Semantic versioning —Å—Ç—Ä–∞—Ç–µ–≥–∏—é
- Deprecation period

**–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è:**
```markdown
## Semantic Versioning

- @mcp-framework/cli: –Ω–∞—á–∞—Ç—å —Å 1.0.0
- yandex-tracker: major bump (2.0.0 ‚Üí 3.0.0) –µ—Å–ª–∏ –ø—É–±–ª–∏—á–Ω—ã–π API –∏–∑–º–µ–Ω–∏–ª—Å—è

## Deprecation Strategy

1. –ï—Å–ª–∏ yandex-tracker CLI –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –≤–Ω–µ—à–Ω–∏–º–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º–∏:
   - –î–æ–±–∞–≤–∏—Ç—å @deprecated –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–∏
   - –î–æ–±–∞–≤–∏—Ç—å runtime warnings
   - –ü–µ—Ä–∏–æ–¥ deprecation: –º–∏–Ω–∏–º—É–º 1 minor release –∏–ª–∏ 3 –º–µ—Å—è—Ü–∞

2. CHANGELOG.md:
   - –û–ø–∏—Å–∞—Ç—å –≤—Å–µ breaking changes
   - –ü—Ä–µ–¥–æ—Å—Ç–∞–≤–∏—Ç—å migration guide
   - –ü—Ä–∏–º–µ—Ä—ã –¥–æ/–ø–æ—Å–ª–µ
```

### 3. ‚ùå –û—Ç—Å—É—Ç—Å—Ç–≤–∏–µ –∞–Ω–∞–ª–∏–∑–∞ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏

**–ü—Ä–æ–±–ª–µ–º–∞:** –ù–µ –ø—Ä–æ–≤–µ—Ä—è–µ—Ç—Å—è:
- –†–∞–∑–º–µ—Ä bundle –ø–æ—Å–ª–µ –∏–∑–º–µ–Ω–µ–Ω–∏–π
- Startup time CLI
- Memory footprint
- Import cost (tree-shaking)

**–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è:**
```markdown
## –≠—Ç–∞–ø 7.15: Performance Benchmarks (–î–û–ë–ê–í–ò–¢–¨)

1. Bundle size analysis:
   ```bash
   npm run analyze-bundle
   # framework/cli –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å <200KB
   # yandex-tracker –Ω–µ –¥–æ–ª–∂–µ–Ω –≤—ã—Ä–∞—Å—Ç–∏ >10%
   ```

2. Startup benchmarks:
   ```bash
   time npm run mcp:connect -- --help
   # –î–æ: X ms
   # –ü–æ—Å–ª–µ: –Ω–µ –±–æ–ª–µ–µ X + 20% ms
   ```

3. Tree-shaking verification:
   - –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —á—Ç–æ –Ω–µ–∏—Å–ø–æ–ª—å–∑—É–µ–º—ã–µ –∫–æ–Ω–Ω–µ–∫—Ç–æ—Ä—ã –Ω–µ –ø–æ–ø–∞–¥–∞—é—Ç –≤ bundle
   - –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å webpack-bundle-analyzer
```

### 4. ‚ö†Ô∏è –ù–µ–¥–æ—Å—Ç–∞—Ç–æ—á–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫

**–ü—Ä–æ–±–ª–µ–º–∞:** –ü–ª–∞–Ω –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç "happy path", –Ω–æ –Ω–µ –æ–ø–∏—Å—ã–≤–∞–µ—Ç:
- –ß—Ç–æ –¥–µ–ª–∞—Ç—å –µ—Å–ª–∏ –∫–æ–Ω–Ω–µ–∫—Ç–æ—Ä –Ω–µ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω
- –û–±—Ä–∞–±–æ—Ç–∫–∞ –∫–æ—Ä—Ä–∞–ø—Ç–µ–¥ config —Ñ–∞–π–ª–æ–≤
- Validation errors –≤ –ø—Ä–æ–º–ø—Ç–∞—Ö
- Network failures –ø—Ä–∏ —É—Å—Ç–∞–Ω–æ–≤–∫–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π

**–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è:**
```markdown
## Error Handling Strategy

1. Graceful degradation:
   - –ï—Å–ª–∏ –∫–æ–Ω–Ω–µ–∫—Ç–æ—Ä –Ω–µ–¥–æ—Å—Ç—É–ø–µ–Ω ‚Äî –ø–æ–∫–∞–∑–∞—Ç—å –ø–æ–Ω—è—Ç–Ω–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ
   - –ï—Å–ª–∏ config –∫–æ—Ä—Ä–∞–ø—Ç–µ–¥ ‚Äî –ø—Ä–µ–¥–ª–æ–∂–∏—Ç—å –ø–µ—Ä–µ—Å–æ–∑–¥–∞—Ç—å
   - –ï—Å–ª–∏ validation fail ‚Äî –ø–æ–∫–∞–∑–∞—Ç—å —á—Ç–æ –∏–º–µ–Ω–Ω–æ –Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω–æ

2. Error codes:
   ```typescript
   export enum CLIErrorCode {
     NO_CLIENTS_INSTALLED = 'CLI_001',
     CONFIG_CORRUPTED = 'CLI_002',
     CONNECTION_FAILED = 'CLI_003',
     VALIDATION_FAILED = 'CLI_004',
   }
   ```

3. Logging:
   - –õ–æ–≥–∏—Ä–æ–≤–∞—Ç—å –≤—Å–µ –æ—à–∏–±–∫–∏ —Å context
   - –ü—Ä–µ–¥–æ—Å—Ç–∞–≤–∏—Ç—å --verbose flag –¥–ª—è –æ—Ç–ª–∞–¥–∫–∏
```

---

## ‚ö†Ô∏è –°–µ—Ä—å–µ–∑–Ω—ã–µ –∑–∞–º–µ—á–∞–Ω–∏—è

### 5. ‚ö†Ô∏è –°–ª–æ–∂–Ω–æ—Å—Ç—å Generic —Ç–∏–ø–æ–≤

**–ü—Ä–æ–±–ª–µ–º–∞:** Generic —Å 2-3 –ø–∞—Ä–∞–º–µ—Ç—Ä–∞–º–∏ –º–æ–∂–µ—Ç –±—ã—Ç—å —Å–ª–æ–∂–µ–Ω –¥–ª—è –ø–æ–Ω–∏–º–∞–Ω–∏—è:

```typescript
// –ú–æ–∂–µ—Ç —Å—Ç–∞—Ç—å —Å–ª–∏—à–∫–æ–º —Å–ª–æ–∂–Ω—ã–º
export class InteractivePrompter<
  TConfig extends BaseMCPServerConfig,
  TPrompts extends ConfigPromptDefinition<TConfig>[]
> { ... }
```

**–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è:**
- –û–≥—Ä–∞–Ω–∏—á–∏—Ç—å generic –ø–∞—Ä–∞–º–µ—Ç—Ä—ã –¥–æ 1-2 –º–∞–∫—Å–∏–º—É–º
- –ü—Ä–µ–¥–æ—Å—Ç–∞–≤–∏—Ç—å helper types –¥–ª—è —É–ø—Ä–æ—â–µ–Ω–∏—è
- –î–æ–±–∞–≤–∏—Ç—å –ø—Ä–∏–º–µ—Ä—ã –¥–ª—è –∫–∞–∂–¥–æ–≥–æ —Å–ª–æ–∂–Ω–æ–≥–æ generic

### 6. ‚ö†Ô∏è –û—Ç—Å—É—Ç—Å—Ç–≤–∏–µ E2E —Ç–µ—Å—Ç–æ–≤

**–ü—Ä–æ–±–ª–µ–º–∞:** –ü–ª–∞–Ω –≤–∫–ª—é—á–∞–µ—Ç unit –∏ integration —Ç–µ—Å—Ç—ã, –Ω–æ –Ω–µ—Ç:
- E2E —Ç–µ—Å—Ç–æ–≤ —Ä–µ–∞–ª—å–Ω–æ–≥–æ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è –∫ MCP –∫–ª–∏–µ–Ω—Ç—É
- –¢–µ—Å—Ç–æ–≤ –Ω–∞ —Ä–∞–∑–Ω—ã—Ö –û–° (macOS, Linux, Windows)
- Smoke tests –≤ CI/CD

**–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è:**
```markdown
## –≠—Ç–∞–ø 6.25: E2E Testing (–î–û–ë–ê–í–ò–¢–¨)

1. –ù–∞—Å—Ç—Ä–æ–∏—Ç—å GitHub Actions matrix:
   - os: [ubuntu-latest, macos-latest, windows-latest]
   - node: [18, 20, 22]

2. E2E —Å—Ü–µ–Ω–∞—Ä–∏–π:
   - –£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å mock MCP –∫–ª–∏–µ–Ω—Ç
   - –ó–∞–ø—É—Å—Ç–∏—Ç—å connect –∫–æ–º–∞–Ω–¥—É —Å fixture –¥–∞–Ω–Ω—ã–º–∏
   - –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —á—Ç–æ config —Ñ–∞–π–ª —Å–æ–∑–¥–∞–ª—Å—è
   - –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —á—Ç–æ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ —Ä–∞–±–æ—Ç–∞–µ—Ç
   - –ó–∞–ø—É—Å—Ç–∏—Ç—å disconnect
   - –ü—Ä–æ–≤–µ—Ä–∏—Ç—å cleanup

3. Smoke tests:
   - –ó–∞–ø—É—Å–∫–∞—Ç—å –ø—Ä–∏ –∫–∞–∂–¥–æ–º PR
   - –ë–ª–æ–∫–∏—Ä–æ–≤–∞—Ç—å merge –ø—Ä–∏ failure
```

### 7. ‚ö†Ô∏è –ù–µ–¥–æ—Å—Ç–∞—Ç–æ—á–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è API

**–ü—Ä–æ–±–ª–µ–º–∞:** –ü–ª–∞–Ω —É–ø–æ–º–∏–Ω–∞–µ—Ç API.md, –Ω–æ –Ω–µ –æ–ø–∏—Å—ã–≤–∞–µ—Ç:
- JSDoc –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–∏ –¥–ª—è –∫–∞–∂–¥–æ–≥–æ public API
- TypeDoc –≥–µ–Ω–µ—Ä–∞—Ü–∏—è
- –ñ–∏–≤—ã–µ –ø—Ä–∏–º–µ—Ä—ã (code playground)

**–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è:**
```markdown
## Documentation Standards

1. JSDoc –¥–ª—è –≤—Å–µ—Ö public API:
   ```typescript
   /**
    * Generic CLI –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è MCP –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è–º–∏
    *
    * @template TConfig - –¢–∏–ø –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ —Å–µ—Ä–≤–µ—Ä–∞
    * @example
    * ```typescript
    * const prompter = new InteractivePrompter<MyConfig>(prompts);
    * const config = await prompter.promptServerConfig();
    * ```
    */
   export class InteractivePrompter<TConfig> { ... }
   ```

2. TypeDoc:
   - –î–æ–±–∞–≤–∏—Ç—å npm script: `docs:generate`
   - –ü—É–±–ª–∏–∫–æ–≤–∞—Ç—å –Ω–∞ GitHub Pages
   - –í–∫–ª—é—á–∏—Ç—å –≤ CI/CD

3. Examples:
   - –î–æ–±–∞–≤–∏—Ç—å –≤ examples/ —Ä–µ–∞–ª—å–Ω—ã–µ —Ä–∞–±–æ—á–∏–µ –ø—Ä–∏–º–µ—Ä—ã
   - README –¥–ª—è –∫–∞–∂–¥–æ–≥–æ –ø—Ä–∏–º–µ—Ä–∞
   - –ó–∞–ø—É—Å–∫–∞–µ–º—ã–µ —á–µ—Ä–µ–∑ npm run example:*
```

---

## üí° –£–ª—É—á—à–µ–Ω–∏—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—ã

### 8. üí° Dependency Injection –¥–ª—è –∫–æ–Ω–Ω–µ–∫—Ç–æ—Ä–æ–≤

**–¢–µ–∫—É—â–∏–π –ø–æ–¥—Ö–æ–¥:** Registry —Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä—É–µ—Ç –∫–æ–Ω–Ω–µ–∫—Ç–æ—Ä—ã –≤—Ä—É—á–Ω—É—é

```typescript
// –¢–µ–∫—É—â–µ–µ (–≤ YT bin/mcp-connect.ts)
const registry = new ConnectorRegistry();
registry.register(new ClaudeDesktopConnector());
registry.register(new ClaudeCodeConnector());
// ... –≤—Ä—É—á–Ω—É—é –¥–ª—è –∫–∞–∂–¥–æ–≥–æ
```

**–ü—Ä–µ–¥–ª–æ–∂–µ–Ω–∏–µ:** Plugin system —Å auto-discovery

```typescript
// framework/cli/src/plugins/plugin-system.ts
export interface CLIPlugin {
  name: string;
  connectors: Array<new () => MCPConnector>;
}

// yandex-tracker –º–æ–∂–µ—Ç –ø—Ä–æ—Å—Ç–æ –∏–º–ø–æ—Ä—Ç–∏—Ä–æ–≤–∞—Ç—å –ø–ª–∞–≥–∏–Ω—ã
import { standardPlugins } from '@mcp-framework/cli';

const registry = new ConnectorRegistry();
registry.loadPlugins(standardPlugins); // auto-register –≤—Å–µ
```

**–ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞:**
- –õ–µ–≥—á–µ –¥–æ–±–∞–≤–∏—Ç—å –Ω–æ–≤—ã–π –∫–æ–Ω–Ω–µ–∫—Ç–æ—Ä (–ø—Ä–æ—Å—Ç–æ –¥–æ–±–∞–≤–∏—Ç—å –≤ plugins)
- –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–æ–π –∑–∞–≥—Ä—É–∑–∫–∏
- –£–ø—Ä–æ—â–µ–Ω–∏–µ –∫–æ–¥–∞ –≤ bin/mcp-connect.ts

### 9. üí° Builder pattern –¥–ª—è –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏

**–¢–µ–∫—É—â–∏–π –ø–æ–¥—Ö–æ–¥:** –ü—Ä—è–º–æ–µ —Å–æ–∑–¥–∞–Ω–∏–µ –æ–±—ä–µ–∫—Ç–æ–≤

```typescript
const configManager = new ConfigManager<Config>({
  projectName: '...',
  safeFields: [...],
});
```

**–ü—Ä–µ–¥–ª–æ–∂–µ–Ω–∏–µ:** Builder –¥–ª—è —á–∏—Ç–∞–µ–º–æ—Å—Ç–∏

```typescript
const configManager = ConfigManagerBuilder
  .forProject('yandex-tracker')
  .withSafeFields('orgId', 'apiBase')
  .excludeSecrets('token')
  .build<YandexTrackerMCPConfig>();
```

**–ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞:**
- –ë–æ–ª–µ–µ —á–∏—Ç–∞–µ–º—ã–π –∫–æ–¥
- –í–∞–ª–∏–¥–∞—Ü–∏—è –Ω–∞ —ç—Ç–∞–ø–µ —Å–±–æ—Ä–∫–∏
- Fluent API

### 10. üí° Webhook —Å–∏—Å—Ç–µ–º–∞ –¥–ª—è —Å–æ–±—ã—Ç–∏–π

**–î–æ–±–∞–≤–∏—Ç—å event system:**

```typescript
// framework/cli
export enum CLIEvent {
  BEFORE_CONNECT = 'before:connect',
  AFTER_CONNECT = 'after:connect',
  CONNECT_FAILED = 'connect:failed',
}

export class ConnectorRegistry {
  on(event: CLIEvent, handler: (data: unknown) => void): void;
  emit(event: CLIEvent, data: unknown): void;
}

// yandex-tracker –º–æ–∂–µ—Ç —Å–ª—É—à–∞—Ç—å —Å–æ–±—ã—Ç–∏—è
registry.on(CLIEvent.AFTER_CONNECT, (data) => {
  Logger.info('YT: Connection established');
  // –û—Ç–ø—Ä–∞–≤–∏—Ç—å –º–µ—Ç—Ä–∏–∫—É, —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ –∏ —Ç.–¥.
});
```

**–ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞:**
- –†–∞—Å—à–∏—Ä—è–µ–º–æ—Å—Ç—å –±–µ–∑ –∏–∑–º–µ–Ω–µ–Ω–∏—è framework
- Telemetry –∏ –∞–Ω–∞–ª–∏—Ç–∏–∫–∞
- Custom workflows

---

## üîí –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å

### 11. üîí Secrets management

**–•–æ—Ä–æ—à–æ:** ConfigManager –Ω–µ —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç —Ç–æ–∫–µ–Ω—ã

**–£–ª—É—á—à–µ–Ω–∏–µ:** –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å —Å–∏—Å—Ç–µ–º–Ω—ã–º–∏ keychain

```typescript
// framework/cli/src/utils/secrets-manager.ts
export class SecretsManager {
  async storeSecret(key: string, value: string): Promise<void> {
    // macOS: –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å Keychain
    // Linux: –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å libsecret
    // Windows: –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å Credential Manager
  }

  async retrieveSecret(key: string): Promise<string | undefined> {
    // –î–æ—Å—Ç–∞—Ç—å –∏–∑ —Å–∏—Å—Ç–µ–º–Ω–æ–≥–æ —Ö—Ä–∞–Ω–∏–ª–∏—â–∞
  }
}
```

**–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ:**
```typescript
// –í–º–µ—Å—Ç–æ –∑–∞–ø—Ä–æ—Å–∞ token –∫–∞–∂–¥—ã–π —Ä–∞–∑
const secretsManager = new SecretsManager();
let token = await secretsManager.retrieveSecret('yt-token');

if (!token) {
  token = await prompter.promptPassword('Token:');
  await secretsManager.storeSecret('yt-token', token);
}
```

### 12. üîí Input sanitization

**–î–æ–±–∞–≤–∏—Ç—å:** –°–∞–Ω–∏—Ç–∏–∑–∞—Ü–∏—è –≤—Å–µ—Ö user inputs

```typescript
// –ü—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–µ–Ω–∏–µ command injection
export function sanitizeInput(input: string): string {
  return input.replace(/[;&|`$(){}]/g, '');
}

// –í–∞–ª–∏–¥–∞—Ü–∏—è –ø—É—Ç–µ–π
export function validatePath(path: string): boolean {
  // –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —á—Ç–æ –ø—É—Ç—å –Ω–µ –≤—ã—Ö–æ–¥–∏—Ç –∑–∞ –ø—Ä–µ–¥–µ–ª—ã –¥–æ–ø—É—Å—Ç–∏–º–æ–≥–æ
  return !path.includes('..');
}
```

---

## üì¶ Versioning –∏ Release

### 13. üì¶ Changesets

**–ü—Ä–æ–±–ª–µ–º–∞:** –ü–ª–∞–Ω –Ω–µ –æ–ø–∏—Å—ã–≤–∞–µ—Ç release –ø—Ä–æ—Ü–µ—Å—Å

**–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è:** –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å changesets

```bash
npm install -D @changesets/cli
npx changeset init
```

**Workflow:**
1. –†–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫ –¥–µ–ª–∞–µ—Ç –∏–∑–º–µ–Ω–µ–Ω–∏—è
2. –ó–∞–ø—É—Å–∫–∞–µ—Ç `npx changeset` –∏ –æ–ø–∏—Å—ã–≤–∞–µ—Ç –∏–∑–º–µ–Ω–µ–Ω–∏–µ
3. CI –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —Å–æ–∑–¥–∞–µ—Ç PR —Å version bump
4. –ü—Ä–∏ merge ‚Äî –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π publish –≤ npm

### 14. üì¶ Conventional Commits

**–î–æ–±–∞–≤–∏—Ç—å:** –õ–∏–Ω—Ç–∏–Ω–≥ commit messages

```json
// package.json
{
  "commitlint": {
    "extends": ["@commitlint/config-conventional"]
  }
}
```

**–ü—Ä–∏–º–µ—Ä—ã:**
```
feat(cli): add support for Qwen client
fix(cli): handle missing config file gracefully
docs(cli): add API reference
BREAKING CHANGE: ConfigManager API changed
```

---

## üß™ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

### 15. üß™ Contract Testing

**–î–æ–±–∞–≤–∏—Ç—å:** –ö–æ–Ω—Ç—Ä–∞–∫—Ç–Ω—ã–µ —Ç–µ—Å—Ç—ã –º–µ–∂–¥—É framework –∏ yandex-tracker

```typescript
// framework/cli/tests/contracts/connector.contract.test.ts
describe('MCPConnector Contract', () => {
  it('should implement all required methods', () => {
    const connector = new MockConnector();
    expect(connector.getClientInfo).toBeDefined();
    expect(connector.isInstalled).toBeDefined();
    // ... –≤—Å–µ –º–µ—Ç–æ–¥—ã –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞
  });

  it('should return valid ClientInfo structure', async () => {
    const info = connector.getClientInfo();
    expect(info).toMatchObject({
      name: expect.any(String),
      displayName: expect.any(String),
      platforms: expect.any(Array),
    });
  });
});
```

### 16. üß™ Mutation Testing

**–û–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ:** –î–æ–±–∞–≤–∏—Ç—å mutation testing

```bash
npm install -D @stryker-mutator/core
```

**–ü—Ä–æ–≤–µ—Ä—è–µ—Ç –∫–∞—á–µ—Å—Ç–≤–æ —Ç–µ—Å—Ç–æ–≤** ‚Äî –º—É—Ç–∏—Ä—É–µ—Ç –∫–æ–¥ –∏ —Å–º–æ—Ç—Ä–∏—Ç, –ª–æ–≤—è—Ç –ª–∏ —ç—Ç–æ —Ç–µ—Å—Ç—ã

---

## üìã –ò—Ç–æ–≥–æ–≤—ã–µ —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏

### –ö—Ä–∏—Ç–∏—á–Ω–æ –∏—Å–ø—Ä–∞–≤–∏—Ç—å –ü–ï–†–ï–î –Ω–∞—á–∞–ª–æ–º —Ä–∞–±–æ—Ç—ã:

1. ‚ùå **–î–æ–±–∞–≤–∏—Ç—å –º–∏–≥—Ä–∞—Ü–∏–æ–Ω–Ω—É—é —Å—Ç—Ä–∞—Ç–µ–≥–∏—é** (Feature flags, rollback plan)
2. ‚ùå **–û–ø—Ä–µ–¥–µ–ª–∏—Ç—å Breaking Changes policy** (versioning, deprecation)
3. ‚ùå **–î–æ–±–∞–≤–∏—Ç—å performance benchmarks** (bundle size, startup time)

### –ò—Å–ø—Ä–∞–≤–∏—Ç—å –î–û —Ñ–∏–Ω–∞–ª–∏–∑–∞—Ü–∏–∏ (—ç—Ç–∞–ø 7):

4. ‚ö†Ô∏è **E2E —Ç–µ—Å—Ç—ã –Ω–∞ –≤—Å–µ—Ö –ø–ª–∞—Ç—Ñ–æ—Ä–º–∞—Ö**
5. ‚ö†Ô∏è **–£–ª—É—á—à–∏—Ç—å error handling** (error codes, logging)
6. ‚ö†Ô∏è **JSDoc + TypeDoc –≥–µ–Ω–µ—Ä–∞—Ü–∏—è**

### Nice-to-have (–º–æ–∂–Ω–æ –ø–æ—Å–ª–µ —Ä–µ–ª–∏–∑–∞):

7. üí° Plugin system –¥–ª—è –∫–æ–Ω–Ω–µ–∫—Ç–æ—Ä–æ–≤
8. üí° Builder pattern –¥–ª—è –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏
9. üí° Event system –¥–ª—è extensibility
10. üîí Keychain integration –¥–ª—è secrets
11. üì¶ Changesets –¥–ª—è release automation

---

## üéØ –§–∏–Ω–∞–ª—å–Ω–∞—è –æ—Ü–µ–Ω–∫–∞

**–û—Ü–µ–Ω–∫–∞:** 7.5/10

**–ß—Ç–æ —Ö–æ—Ä–æ—à–æ:**
- –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ –ø—Ä–∞–≤–∏–ª—å–Ω–∞—è
- Generic –ø–æ–¥—Ö–æ–¥ –∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã–π
- –ü—Ä–æ—Ü–µ—Å—Å –ø–æ—ç—Ç–∞–ø–Ω—ã–π –∏ –±–µ–∑–æ–ø–∞—Å–Ω—ã–π

**–ß—Ç–æ –∫—Ä–∏—Ç–∏—á–Ω–æ:**
- –û—Ç—Å—É—Ç—Å—Ç–≤—É–µ—Ç –º–∏–≥—Ä–∞—Ü–∏–æ–Ω–Ω–∞—è —Å—Ç—Ä–∞—Ç–µ–≥–∏—è
- –ù–µ—Ç rollback –ø–ª–∞–Ω–∞
- –ù–µ–¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ –≤–Ω–∏–º–∞–Ω–∏—è –∫ breaking changes

**–ß—Ç–æ —É–ª—É—á—à–∏—Ç—å:**
- Performance monitoring
- E2E —Ç–µ—Å—Ç—ã
- Documentation standards

**–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è:**
‚úÖ **–ú–æ–∂–Ω–æ –Ω–∞—á–∏–Ω–∞—Ç—å** –ø–æ—Å–ª–µ –¥–æ–±–∞–≤–ª–µ–Ω–∏—è –∫—Ä–∏—Ç–∏—á–Ω—ã—Ö –ø—É–Ω–∫—Ç–æ–≤ (1-3)
‚ö†Ô∏è **–°–µ—Ä—å–µ–∑–Ω—ã–µ –∑–∞–º–µ—á–∞–Ω–∏—è** (4-6) –¥–æ–±–∞–≤–∏—Ç—å –≤ –ø—Ä–æ—Ü–µ—Å—Å–µ
üí° **Nice-to-have** (7-11) ‚Äî –¥–ª—è –≤–µ—Ä—Å–∏–∏ 1.1

---

## üìù Action Items

**–î–æ –Ω–∞—á–∞–ª–∞ —Ä–∞–±–æ—Ç—ã:**
- [ ] –î–æ–±–∞–≤–∏—Ç—å —ç—Ç–∞–ø "5.5 Feature Flag Strategy"
- [ ] –û–±–Ω–æ–≤–∏—Ç—å —ç—Ç–∞–ø 5.3 ‚Äî –Ω–µ —É–¥–∞–ª—è—Ç—å —Å—Ç–∞—Ä—ã–π –∫–æ–¥ —Å—Ä–∞–∑—É
- [ ] –î–æ–±–∞–≤–∏—Ç—å —ç—Ç–∞–ø "7.15 Performance Benchmarks"
- [ ] –û–ø—Ä–µ–¥–µ–ª–∏—Ç—å semantic versioning strategy
- [ ] –ù–∞–ø–∏—Å–∞—Ç—å MIGRATION.md draft

**–í –ø—Ä–æ—Ü–µ—Å—Å–µ:**
- [ ] –î–æ–±–∞–≤–∏—Ç—å E2E —Ç–µ—Å—Ç—ã –≤ —ç—Ç–∞–ø 6.2
- [ ] –£–ª—É—á—à–∏—Ç—å error handling –≤ —ç—Ç–∞–ø–∞—Ö 4.x
- [ ] JSDoc –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–∏ –≤–æ –≤—Å–µ—Ö —ç—Ç–∞–ø–∞—Ö —Å–æ–∑–¥–∞–Ω–∏—è –∫–æ–¥–∞

**–ü–æ—Å–ª–µ —Ä–µ–ª–∏–∑–∞:**
- [ ] –†–∞—Å—Å–º–æ—Ç—Ä–µ—Ç—å plugin system
- [ ] Keychain integration
- [ ] Changesets setup
