# 4.3 Validate команда

**Тип:** Sequential
**Зависимости:** 4.2 Connect команда
**Время:** ~30 минут

---

## Задача

Перенести команду `validate` для проверки корректности конфигураций MCP клиентов.

---

## Действия

### 1. Проверить текущую реализацию

**Файл в YT:** `yandex-tracker/src/cli/commands/validate.command.ts`

Если команда специфична для YT - пропустить. Если generic - перенести.

### 2. Создать validate команду (если применимо)

**Файл:** `src/commands/validate.command.ts`

```typescript
import type { ConnectorRegistry } from '../connectors/registry.js';
import type { BaseMCPServerConfig } from '../types.js';
import { Logger } from '../utils/logger.js';

export interface ValidateCommandOptions<TConfig extends BaseMCPServerConfig> {
  registry: ConnectorRegistry<TConfig>;
}

export async function validateCommand<TConfig extends BaseMCPServerConfig>(
  options: ValidateCommandOptions<TConfig>
): Promise<void> {
  const { registry } = options;

  Logger.header('✅ Валидация конфигураций MCP клиентов');
  Logger.newLine();

  const connectors = registry.getAll();
  let hasErrors = false;

  for (const connector of connectors) {
    const info = connector.getClientInfo();
    const isInstalled = await connector.isInstalled();

    if (!isInstalled) {
      Logger.info(`${info.displayName}: ⏭️  Пропущен (не установлен)`);
      continue;
    }

    const status = await connector.getStatus();
    if (!status.connected) {
      Logger.info(`${info.displayName}: ⏭️  Пропущен (не подключен)`);
      continue;
    }

    // Проверить корректность конфигурации
    if (status.error) {
      Logger.error(`${info.displayName}: ❌ Ошибка конфигурации`);
      Logger.error(`  └─ ${status.error}`);
      hasErrors = true;
    } else {
      Logger.success(`${info.displayName}: ✅ Конфигурация корректна`);
      if (status.details) {
        Logger.info(`  └─ Конфиг: ${status.details.configPath}`);
      }
    }
  }

  Logger.newLine();

  if (hasErrors) {
    Logger.error('❌ Обнаружены ошибки конфигурации');
    process.exit(1);
  } else {
    Logger.success('✅ Все конфигурации корректны');
  }
}
```

### 3. Обновить exports (если добавили команду)

**Файл:** `src/commands/index.ts`

```typescript
export * from './status.command.js';
export * from './list.command.js';
export * from './disconnect.command.js';
export * from './connect.command.js';
export * from './validate.command.js'; // если добавили
```

---

## Результат

- [ ] Validate команда создана (или пропущена если специфична для YT)
- [ ] Exports обновлены
- [ ] `npm run build` проходит

---

## Критерии готовности

- [ ] Решение принято (перенести или оставить в YT)
- [ ] Если перенесено - работает с generic типами
- [ ] Если оставлено в YT - документировано почему
