# 6.4 Breaking Changes –∏ Migration Guide

**–¢–∏–ø:** Parallel (–º–æ–∂–Ω–æ –≤—ã–ø–æ–ª–Ω—è—Ç—å –æ–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω–æ —Å 6.1-6.3)
**–ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏:** –≠—Ç–∞–ø 5 (–≤—Å–µ)
**–í—Ä–µ–º—è:** ~1 —á–∞—Å
**–ö—Ä–∏—Ç–∏—á–Ω–æ—Å—Ç—å:** üö® –í–´–°–û–ö–ê–Ø ‚Äî –æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ –¥–ª—è major version

---

## –ó–∞–¥–∞—á–∞

–î–æ–∫—É–º–µ–Ω—Ç–∏—Ä–æ–≤–∞—Ç—å –≤—Å–µ breaking changes –∏ —Å–æ–∑–¥–∞—Ç—å –ø–æ–¥—Ä–æ–±–Ω—ã–π migration guide –¥–ª—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π.

---

## –î–µ–π—Å—Ç–≤–∏—è

### 1. –û–ø—Ä–µ–¥–µ–ª–∏—Ç—å Breaking Changes

**–î–ª—è @mcp-framework/cli (–Ω–æ–≤—ã–π –ø–∞–∫–µ—Ç):**
- ‚úÖ –ù–µ—Ç breaking changes ‚Äî —ç—Ç–æ –Ω–æ–≤—ã–π –ø–∞–∫–µ—Ç (–≤–µ—Ä—Å–∏—è 1.0.0)

**–î–ª—è yandex-tracker:**

#### Breaking Change #1: CLI Internals

**–ß—Ç–æ –∏–∑–º–µ–Ω–∏–ª–æ—Å—å:**
```typescript
// ‚ùå –ë–´–õ–û (v2.x):
import { ClaudeDesktopConnector } from './src/cli/connectors/claude-desktop';

// ‚úÖ –°–¢–ê–õ–û (v3.x):
import { ClaudeDesktopConnector } from '@mcp-framework/cli';
```

**–ö—Ç–æ –∑–∞—Ç—Ä–æ–Ω—É—Ç:**
- –†–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–∏, –∫–æ—Ç–æ—Ä—ã–µ –∏–º–ø–æ—Ä—Ç–∏—Ä–æ–≤–∞–ª–∏ CLI –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã –Ω–∞–ø—Ä—è–º—É—é
- –í–Ω–µ—à–Ω–∏–µ —Ä–∞—Å—à–∏—Ä–µ–Ω–∏—è, –∏—Å–ø–æ–ª—å–∑—É—é—â–∏–µ CLI internals

**–ú–∏–≥—Ä–∞—Ü–∏—è:**
```bash
# –û–±–Ω–æ–≤–∏—Ç—å –∏–º–ø–æ—Ä—Ç—ã
npm install @mcp-framework/cli
# –ó–∞–º–µ–Ω–∏—Ç—å –≤—Å–µ –∏–º–ø–æ—Ä—Ç—ã —Å ./cli/... –Ω–∞ @mcp-framework/cli
```

#### Breaking Change #2: CLI —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–π

**–ß—Ç–æ –∏–∑–º–µ–Ω–∏–ª–æ—Å—å:**
```
‚ùå –ë–´–õ–û:
src/cli/connectors/
src/cli/commands/
src/cli/utils/

‚úÖ –°–¢–ê–õ–û:
src/cli/bin/           (entry points)
src/cli/types.ts       (YT-specific types)
src/cli/prompts.ts     (YT-specific prompts)
src/cli-legacy/        (–≤—Ä–µ–º–µ–Ω–Ω–æ, –¥–ª—è rollback)
```

**–ö—Ç–æ –∑–∞—Ç—Ä–æ–Ω—É—Ç:**
- –°–∫—Ä–∏–ø—Ç—ã, –∫–æ—Ç–æ—Ä—ã–µ –æ–±—Ä–∞—â–∞—é—Ç—Å—è –∫ CLI —Ñ–∞–π–ª–∞–º –Ω–∞–ø—Ä—è–º—É—é
- Build –ø—Ä–æ—Ü–µ—Å—Å—ã, –∏—Å–ø–æ–ª—å–∑—É—é—â–∏–µ CLI –ø—É—Ç–∏

**–ú–∏–≥—Ä–∞—Ü–∏—è:**
```bash
# –û–±–Ω–æ–≤–∏—Ç—å –ø—É—Ç–∏ –≤ —Å–∫—Ä–∏–ø—Ç–∞—Ö
# –í–º–µ—Å—Ç–æ: src/cli/commands/connect.command.ts
# –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å: npm run mcp:connect (—á–µ—Ä–µ–∑ npm scripts)
```

### 2. –°–æ–∑–¥–∞—Ç—å CHANGELOG.md

**–§–∞–π–ª:** `packages/servers/yandex-tracker/CHANGELOG.md`

```markdown
# Changelog

All notable changes to this project will be documented in this file.

The format is based on [Keep a Changelog](https://keepachangelog.com/en/1.0.0/),
and this project adheres to [Semantic Versioning](https://semver.org/spec/v2.0.0.html).

## [3.0.0] - 2025-XX-XX

### üö® BREAKING CHANGES

#### CLI Migration to @mcp-framework/cli

CLI —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª –≤—ã–Ω–µ—Å–µ–Ω –≤ –æ—Ç–¥–µ–ª—å–Ω—ã–π framework –ø–∞–∫–µ—Ç –¥–ª—è –ø–µ—Ä–µ–∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è.

**–î–ª—è –∫–æ–Ω–µ—á–Ω—ã—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π:**
- ‚úÖ –ö–æ–º–∞–Ω–¥—ã —Ä–∞–±–æ—Ç–∞—é—Ç –∫–∞–∫ —Ä–∞–Ω—å—à–µ (`npm run mcp:connect` –∏ —Ç.–¥.)
- ‚úÖ –ù–∏–∫–∞–∫–∏—Ö –∏–∑–º–µ–Ω–µ–Ω–∏–π –≤ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–∏
- ‚ö†Ô∏è –ü–µ—Ä–≤—ã–π –∑–∞–ø—É—Å–∫ –º–æ–∂–µ—Ç –±—ã—Ç—å –º–µ–¥–ª–µ–Ω–Ω–µ–µ (—É—Å—Ç–∞–Ω–æ–≤–∫–∞ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π)

**–î–ª—è —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–æ–≤:**
- ‚ùå –ü—Ä—è–º—ã–µ –∏–º–ø–æ—Ä—Ç—ã –∏–∑ `src/cli/connectors/*` –±–æ–ª—å—à–µ –Ω–µ —Ä–∞–±–æ—Ç–∞—é—Ç
- ‚úÖ –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ `@mcp-framework/cli` –≤–º–µ—Å—Ç–æ –≤–Ω—É—Ç—Ä–µ–Ω–Ω–∏—Ö –ø—É—Ç–µ–π
- ‚ö†Ô∏è CLI internals —Ç–µ–ø–µ—Ä—å –≤ –æ—Ç–¥–µ–ª—å–Ω–æ–º –ø–∞–∫–µ—Ç–µ

**Migration guide:** –°–º. [MIGRATION.md](./MIGRATION.md)

### Added

- Feature flag `USE_FRAMEWORK_CLI` –¥–ª—è –ø–æ—Å—Ç–µ–ø–µ–Ω–Ω–æ–≥–æ rollout
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π fallback –Ω–∞ legacy CLI –ø—Ä–∏ –æ—à–∏–±–∫–∞—Ö
- –£–ª—É—á—à–µ–Ω–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫ –≤ CLI

### Changed

- CLI —Ç–µ–ø–µ—Ä—å –∏—Å–ø–æ–ª—å–∑—É–µ—Ç `@mcp-framework/cli` –ø–æ–¥ –∫–∞–ø–æ—Ç–æ–º
- –ú–∏–Ω–∏–º–∞–ª—å–Ω–∞—è Node.js –≤–µ—Ä—Å–∏—è: 18.0.0 (–±—ã–ª–æ: 16.0.0)
- –°—Ç—Ä—É–∫—Ç—É—Ä–∞ `src/cli/` —É–ø—Ä–æ—â–µ–Ω–∞

### Deprecated

- Legacy CLI (–±—É–¥–µ—Ç —É–¥–∞–ª–µ–Ω –≤ v4.0.0, ~6 –Ω–µ–¥–µ–ª—å –ø–æ—Å–ª–µ —Ä–µ–ª–∏–∑–∞)

### Removed

- ‚ùå –ü—Ä—è–º–æ–π –¥–æ—Å—Ç—É–ø –∫ CLI internals (connectors, commands, utils)

### Fixed

- –£–ª—É—á—à–µ–Ω–∞ –æ–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è
- –ò—Å–ø—Ä–∞–≤–ª–µ–Ω—ã –ø—Ä–æ–±–ª–µ–º—ã —Å –ø—É—Ç—è–º–∏ –Ω–∞ Windows

### Security

- –°–µ–∫—Ä–µ—Ç–Ω—ã–µ –ø–æ–ª—è –±–æ–ª—å—à–µ –Ω–µ —Å–æ—Ö—Ä–∞–Ω—è—é—Ç—Å—è –≤ config —Ñ–∞–π–ª–µ
- –£–ª—É—á—à–µ–Ω–∞ –≤–∞–ª–∏–¥–∞—Ü–∏—è user input

## [2.0.0] - 2024-XX-XX

...
```

### 3. –°–æ–∑–¥–∞—Ç—å MIGRATION.md

**–§–∞–π–ª:** `packages/servers/yandex-tracker/MIGRATION.md`

```markdown
# Migration Guide: v2.x ‚Üí v3.x

## Overview

–í–µ—Ä—Å–∏—è 3.0 –≤—ã–Ω–æ—Å–∏—Ç CLI —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª –≤ –æ—Ç–¥–µ–ª—å–Ω—ã–π framework –ø–∞–∫–µ—Ç `@mcp-framework/cli`.

**–ó–∞—Ç—Ä–æ–Ω—É—Ç—ã:** –†–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–∏, –∏—Å–ø–æ–ª—å–∑—É—é—â–∏–µ CLI internals

**–ù–ï –∑–∞—Ç—Ä–æ–Ω—É—Ç—ã:** –ö–æ–Ω–µ—á–Ω—ã–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ (–∫–æ–º–∞–Ω–¥—ã —Ä–∞–±–æ—Ç–∞—é—Ç –∫–∞–∫ —Ä–∞–Ω—å—à–µ)

---

## For End Users üë•

### –ù–∏—á–µ–≥–æ –Ω–µ –Ω—É–∂–Ω–æ –¥–µ–ª–∞—Ç—å ‚úÖ

CLI –∫–æ–º–∞–Ω–¥—ã —Ä–∞–±–æ—Ç–∞—é—Ç –∫–∞–∫ —Ä–∞–Ω—å—à–µ:

```bash
npm run mcp:connect     # —Ä–∞–±–æ—Ç–∞–µ—Ç
npm run mcp:disconnect  # —Ä–∞–±–æ—Ç–∞–µ—Ç
npm run mcp:status      # —Ä–∞–±–æ—Ç–∞–µ—Ç
npm run mcp:list        # —Ä–∞–±–æ—Ç–∞–µ—Ç
```

### –ï—Å–ª–∏ –≤–æ–∑–Ω–∏–∫–ª–∏ –ø—Ä–æ–±–ª–µ–º—ã ‚ö†Ô∏è

–í—Ä–µ–º–µ–Ω–Ω—ã–π –æ—Ç–∫–∞—Ç –Ω–∞ legacy –≤–µ—Ä—Å–∏—é:

```bash
export USE_FRAMEWORK_CLI=false
npm run mcp:connect
```

–°–æ–æ–±—â–∏—Ç–µ –æ –ø—Ä–æ–±–ª–µ–º–µ: [GitHub Issues](https://github.com/FractalizeR/mcp_server_yandex_tracker/issues)

---

## For Developers üíª

### Breaking Changes

#### 1. CLI Imports

**‚ùå –ù–µ —Ä–∞–±–æ—Ç–∞–µ—Ç:**
```typescript
// v2.x
import { ClaudeDesktopConnector } from './src/cli/connectors/claude-desktop';
import { connectCommand } from './src/cli/commands/connect.command';
```

**‚úÖ –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ:**
```typescript
// v3.x
import {
  ClaudeDesktopConnector,
  connectCommand
} from '@mcp-framework/cli';
```

**–ú–∏–≥—Ä–∞—Ü–∏—è:**
```bash
# 1. –£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –Ω–æ–≤—ã–π –ø–∞–∫–µ—Ç
npm install @mcp-framework/cli

# 2. –û–±–Ω–æ–≤–∏—Ç—å –∏–º–ø–æ—Ä—Ç—ã
sed -i "s|from './src/cli/connectors|from '@mcp-framework/cli'|g" **/*.ts
sed -i "s|from './src/cli/commands|from '@mcp-framework/cli'|g" **/*.ts
sed -i "s|from './src/cli/utils|from '@mcp-framework/cli'|g" **/*.ts
```

#### 2. CLI File Paths

**‚ùå –ù–µ —Ä–∞–±–æ—Ç–∞–µ—Ç:**
```bash
# v2.x
node src/cli/commands/connect.command.js
```

**‚úÖ –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ:**
```bash
# v3.x
npm run mcp:connect
# –ò–ª–∏
node dist/cli/bin/mcp-connect.js
```

#### 3. Custom Connectors

–ï—Å–ª–∏ –≤—ã —Å–æ–∑–¥–∞–ª–∏ —Å–≤–æ–π –∫–æ–Ω–Ω–µ–∫—Ç–æ—Ä:

**‚ùå v2.x:**
```typescript
import { BaseConnector } from './src/cli/connectors/base/base-connector';

class MyConnector extends BaseConnector {
  // ...
}
```

**‚úÖ v3.x:**
```typescript
import { BaseConnector } from '@mcp-framework/cli';

class MyConnector extends BaseConnector {
  // ...
}

// –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è
import { ConnectorRegistry } from '@mcp-framework/cli';

const registry = new ConnectorRegistry();
registry.register(new MyConnector());
```

---

## Versioning Strategy

### @mcp-framework/cli

- **1.0.0** ‚Äî Initial release
- **Semver:** Strict semantic versioning
- **Breaking changes:** Only in major versions

### yandex-tracker

- **3.0.0** ‚Äî CLI migration (current)
- **4.0.0** ‚Äî Legacy CLI removal (~6 weeks after 3.0.0)

---

## Rollback Strategy

### –ï—Å–ª–∏ –Ω—É–∂–Ω–æ –≤–µ—Ä–Ω—É—Ç—å—Å—è –∫ v2.x

```bash
# –û—Ç–∫–∞—Ç —á–µ—Ä–µ–∑ npm
npm install mcp-server-yandex-tracker@2.x

# –ò–ª–∏ —á–µ—Ä–µ–∑ git
git checkout v2.x.x
npm install
```

### –ï—Å–ª–∏ –Ω—É–∂–µ–Ω legacy CLI –≤ v3.x

```bash
# Feature flag
export USE_FRAMEWORK_CLI=false
npm run mcp:connect
```

---

## Timeline

- **Week 1:** Dev environment testing
- **Week 2:** Beta users (USE_FRAMEWORK_CLI=true)
- **Week 3:** 50% rollout
- **Week 4:** 100% rollout
- **Week 6:** Remove legacy CLI (v4.0.0)

---

## FAQ

**Q: –ù—É–∂–Ω–æ –ª–∏ –º–Ω–µ —á—Ç–æ-—Ç–æ –¥–µ–ª–∞—Ç—å –∫–∞–∫ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é?**
A: –ù–µ—Ç, CLI –∫–æ–º–∞–Ω–¥—ã —Ä–∞–±–æ—Ç–∞—é—Ç –∫–∞–∫ —Ä–∞–Ω—å—à–µ.

**Q: –ú–æ–π —Å–∫—Ä–∏–ø—Ç –∏–º–ø–æ—Ä—Ç–∏—Ä—É–µ—Ç CLI –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã. –ß—Ç–æ –¥–µ–ª–∞—Ç—å?**
A: –û–±–Ω–æ–≤–∏—Ç–µ –∏–º–ø–æ—Ä—Ç—ã –Ω–∞ `@mcp-framework/cli`. –°–º. —Å–µ–∫—Ü–∏—é "For Developers".

**Q: CLI –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç –ø–æ—Å–ª–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è. –ß—Ç–æ –¥–µ–ª–∞—Ç—å?**
A: –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ `USE_FRAMEWORK_CLI=false` –¥–ª—è –æ—Ç–∫–∞—Ç–∞ –∏ —Å–æ–æ–±—â–∏—Ç–µ –æ –ø—Ä–æ–±–ª–µ–º–µ.

**Q: –ö–æ–≥–¥–∞ –±—É–¥–µ—Ç —É–¥–∞–ª–µ–Ω legacy CLI?**
A: –ß–µ—Ä–µ–∑ 6 –Ω–µ–¥–µ–ª—å –ø–æ—Å–ª–µ —Ä–µ–ª–∏–∑–∞ 3.0.0 (–≤ –≤–µ—Ä—Å–∏–∏ 4.0.0).

**Q: –ö–∞–∫ –º–Ω–µ —Å–æ–∑–¥–∞—Ç—å —Å–≤–æ–π –∫–æ–Ω–Ω–µ–∫—Ç–æ—Ä?**
A: –°–º. [@mcp-framework/cli –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—é](../../framework/cli/README.md).

---

## Support

- **Issues:** https://github.com/FractalizeR/mcp_server_yandex_tracker/issues
- **Discussions:** https://github.com/FractalizeR/mcp_server_yandex_tracker/discussions
- **Email:** fractalizer@example.com
```

### 4. –û–±–Ω–æ–≤–∏—Ç—å package.json –≤–µ—Ä—Å–∏–∏

**–û–ø—Ä–µ–¥–µ–ª–∏—Ç—å –Ω–æ–≤—ã–µ –≤–µ—Ä—Å–∏–∏:**

```json
// packages/framework/cli/package.json
{
  "version": "1.0.0"  // –Ω–æ–≤—ã–π –ø–∞–∫–µ—Ç
}

// packages/servers/yandex-tracker/package.json
{
  "version": "3.0.0"  // MAJOR bump (breaking changes)
}
```

### 5. –î–æ–±–∞–≤–∏—Ç—å deprecation warnings

**–§–∞–π–ª:** `packages/servers/yandex-tracker/src/cli-legacy/bin/mcp-connect.ts`

```typescript
// –î–æ–±–∞–≤–∏—Ç—å –≤ –Ω–∞—á–∞–ª–æ —Ñ–∞–π–ª–∞
if (process.env.USE_FRAMEWORK_CLI !== 'false') {
  console.warn('');
  console.warn('‚ö†Ô∏è  WARNING: Legacy CLI is deprecated');
  console.warn('   It will be removed in v4.0.0');
  console.warn('   Please report any issues with new CLI at:');
  console.warn('   https://github.com/FractalizeR/mcp_server_yandex_tracker/issues');
  console.warn('');
}
```

---

## –†–µ–∑—É–ª—å—Ç–∞—Ç

- [ ] Breaking changes –∏–¥–µ–Ω—Ç–∏—Ñ–∏—Ü–∏—Ä–æ–≤–∞–Ω—ã
- [ ] CHANGELOG.md —Å–æ–∑–¥–∞–Ω
- [ ] MIGRATION.md —Å–æ–∑–¥–∞–Ω —Å –ø–æ–¥—Ä–æ–±–Ω—ã–º–∏ –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è–º–∏
- [ ] package.json –≤–µ—Ä—Å–∏–∏ –æ–±–Ω–æ–≤–ª–µ–Ω—ã
- [ ] Deprecation warnings –¥–æ–±–∞–≤–ª–µ–Ω—ã
- [ ] FAQ —Å–µ–∫—Ü–∏—è –Ω–∞–ø–∏—Å–∞–Ω–∞

---

## –ö—Ä–∏—Ç–µ—Ä–∏–∏ –≥–æ—Ç–æ–≤–Ω–æ—Å—Ç–∏

- [ ] –í—Å–µ breaking changes –¥–æ–∫—É–º–µ–Ω—Ç–∏—Ä–æ–≤–∞–Ω—ã
- [ ] Migration guide –ø–æ–Ω—è—Ç–µ–Ω –∏ –ø–æ–ª–æ–Ω
- [ ] –í–µ—Ä—Å–∏–∏ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—Ç semver
- [ ] Rollback —Å—Ç—Ä–∞—Ç–µ–≥–∏—è –æ–ø–∏—Å–∞–Ω–∞
- [ ] Timeline –æ–ø—Ä–µ–¥–µ–ª–µ–Ω
