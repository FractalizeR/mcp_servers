# –≠—Ç–∞–ø 1.1: –ú–∏–≥—Ä–∞—Ü–∏—è Comments –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–æ–≤ (Sequential)

**–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç:** High
**–¢–∏–ø –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è:** Sequential
**–í—Ä–µ–º—è:** ~15 –º–∏–Ω—É—Ç
**–ö–æ–ª–∏—á–µ—Å—Ç–≤–æ:** 4 tools
**–°–ª–æ–∂–Ω–æ—Å—Ç—å:** –ü—Ä–æ—Å—Ç–∞—è

---

## üéØ –¶–µ–ª—å

–ú–∏–≥—Ä–∏—Ä–æ–≤–∞—Ç—å –≤—Å–µ 4 –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–∞ –∫–∞—Ç–µ–≥–æ—Ä–∏–∏ Comments –Ω–∞ –∞–≤—Ç–æ–≥–µ–Ω–µ—Ä–∞—Ü–∏—é MCP definition.

---

## üìã –ò–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã –¥–ª—è –º–∏–≥—Ä–∞—Ü–∏–∏

1. **add-comment** - `comments/add/add-comment.tool.ts`
2. **delete-comment** - `comments/delete/delete-comment.tool.ts`
3. **edit-comment** - `comments/edit/edit-comment.tool.ts`
4. **get-comments** - `comments/get/get-comments.tool.ts`

**–í—Å–µ –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã –ø—Ä–æ—Å—Ç—ã–µ**, –∏–º–µ—é—Ç —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—É—é —Å—Ç—Ä—É–∫—Ç—É—Ä—É.

---

## ‚úÖ –ß–µ–∫-–ª–∏—Å—Ç –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è

### –î–ª—è –∫–∞–∂–¥–æ–≥–æ –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–∞:

- [ ] **add-comment**
  - [ ] –û—Ç–∫—Ä—ã—Ç—å `comments/add/add-comment.tool.ts`
  - [ ] –î–æ–±–∞–≤–∏—Ç—å –º–µ—Ç–æ–¥ `getParamsSchema()` –≤–æ–∑–≤—Ä–∞—â–∞—é—â–∏–π `AddCommentParamsSchema`
  - [ ] –ü–æ–º–µ—Ç–∏—Ç—å `buildDefinition()` –∫–∞–∫ `@deprecated`
  - [ ] –ó–∞–ø—É—Å—Ç–∏—Ç—å —Ç–µ—Å—Ç—ã: `npm test -- add-comment`
  - [ ] –ü—Ä–æ–≤–µ—Ä–∏—Ç—å, —á—Ç–æ definition –≥–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç—Å—è –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ

- [ ] **delete-comment**
  - [ ] –û—Ç–∫—Ä—ã—Ç—å `comments/delete/delete-comment.tool.ts`
  - [ ] –î–æ–±–∞–≤–∏—Ç—å –º–µ—Ç–æ–¥ `getParamsSchema()` –≤–æ–∑–≤—Ä–∞—â–∞—é—â–∏–π `DeleteCommentParamsSchema`
  - [ ] –ü–æ–º–µ—Ç–∏—Ç—å `buildDefinition()` –∫–∞–∫ `@deprecated`
  - [ ] –ó–∞–ø—É—Å—Ç–∏—Ç—å —Ç–µ—Å—Ç—ã: `npm test -- delete-comment`
  - [ ] –ü—Ä–æ–≤–µ—Ä–∏—Ç—å, —á—Ç–æ definition –≥–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç—Å—è –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ

- [ ] **edit-comment**
  - [ ] –û—Ç–∫—Ä—ã—Ç—å `comments/edit/edit-comment.tool.ts`
  - [ ] –î–æ–±–∞–≤–∏—Ç—å –º–µ—Ç–æ–¥ `getParamsSchema()` –≤–æ–∑–≤—Ä–∞—â–∞—é—â–∏–π `EditCommentParamsSchema`
  - [ ] –ü–æ–º–µ—Ç–∏—Ç—å `buildDefinition()` –∫–∞–∫ `@deprecated`
  - [ ] –ó–∞–ø—É—Å—Ç–∏—Ç—å —Ç–µ—Å—Ç—ã: `npm test -- edit-comment`
  - [ ] –ü—Ä–æ–≤–µ—Ä–∏—Ç—å, —á—Ç–æ definition –≥–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç—Å—è –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ

- [ ] **get-comments**
  - [ ] –û—Ç–∫—Ä—ã—Ç—å `comments/get/get-comments.tool.ts`
  - [ ] –î–æ–±–∞–≤–∏—Ç—å –º–µ—Ç–æ–¥ `getParamsSchema()` –≤–æ–∑–≤—Ä–∞—â–∞—é—â–∏–π `GetCommentsParamsSchema`
  - [ ] –ü–æ–º–µ—Ç–∏—Ç—å `buildDefinition()` –∫–∞–∫ `@deprecated`
  - [ ] –ó–∞–ø—É—Å—Ç–∏—Ç—å —Ç–µ—Å—Ç—ã: `npm test -- get-comments`
  - [ ] –ü—Ä–æ–≤–µ—Ä–∏—Ç—å, —á—Ç–æ definition –≥–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç—Å—è –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ

### –§–∏–Ω–∞–ª–∏–∑–∞—Ü–∏—è:

- [ ] –ó–∞–ø—É—Å—Ç–∏—Ç—å –≤—Å–µ —Ç–µ—Å—Ç—ã comments: `npm test -- comments`
- [ ] –ó–∞–ø—É—Å—Ç–∏—Ç—å –ø–æ–ª–Ω—É—é –≤–∞–ª–∏–¥–∞—Ü–∏—é: `npm run validate:quiet`
- [ ] –°–æ–∑–¥–∞—Ç—å –∫–æ–º–º–∏—Ç:
  ```bash
  git commit -m "feat(migration): migrate comments tools to autogeneration (4/47)"
  ```
- [ ] –ü—É—à –∏–∑–º–µ–Ω–µ–Ω–∏–π
- [ ] –û–±–Ω–æ–≤–∏—Ç—å —Å—Ç–∞—Ç—É—Å –≤ –ø–ª–∞–Ω–µ

---

## üìù –®–∞–±–ª–æ–Ω –∏–∑–º–µ–Ω–µ–Ω–∏–π

### –ü—Ä–∏–º–µ—Ä –¥–ª—è `add-comment.tool.ts`:

#### –ë–´–õ–û (old approach):

```typescript
export class AddCommentTool extends BaseTool<YandexTrackerFacade> {
  static override readonly METADATA = ADD_COMMENT_TOOL_METADATA;

  private readonly definition = new AddCommentDefinition();

  protected buildDefinition(): ToolDefinition {
    return this.definition.build();
  }

  async execute(params: ToolCallParams): Promise<ToolResult> {
    const validation = this.validateParams(params, AddCommentParamsSchema);
    // ...
  }
}
```

#### –°–¢–ê–õ–û (new approach):

```typescript
export class AddCommentTool extends BaseTool<YandexTrackerFacade> {
  static override readonly METADATA = ADD_COMMENT_TOOL_METADATA;

  /**
   * –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –≥–µ–Ω–µ—Ä–∞—Ü–∏—è definition –∏–∑ Zod schema
   * –≠—Ç–æ –∏—Å–∫–ª—é—á–∞–µ—Ç –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å –Ω–µ—Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏—è schema ‚Üî definition
   */
  protected override getParamsSchema(): typeof AddCommentParamsSchema {
    return AddCommentParamsSchema;
  }

  /**
   * @deprecated –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –∞–≤—Ç–æ–≥–µ–Ω–µ—Ä–∞—Ü–∏—è —á–µ—Ä–µ–∑ getParamsSchema()
   */
  protected buildDefinition(): ToolDefinition {
    // Fallback –¥–ª—è –æ–±—Ä–∞—Ç–Ω–æ–π —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç–∏ (–Ω–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –µ—Å–ª–∏ getParamsSchema() –æ–ø—Ä–µ–¥–µ–ª–µ–Ω)
    const definition = new AddCommentDefinition();
    return definition.build();
  }

  async execute(params: ToolCallParams): Promise<ToolResult> {
    const validation = this.validateParams(params, AddCommentParamsSchema);
    // ...
  }
}
```

### –ò–∑–º–µ–Ω–µ–Ω–∏—è (diff):

```diff
export class AddCommentTool extends BaseTool<YandexTrackerFacade> {
  static override readonly METADATA = ADD_COMMENT_TOOL_METADATA;

- private readonly definition = new AddCommentDefinition();
+  /**
+   * –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –≥–µ–Ω–µ—Ä–∞—Ü–∏—è definition –∏–∑ Zod schema
+   * –≠—Ç–æ –∏—Å–∫–ª—é—á–∞–µ—Ç –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å –Ω–µ—Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏—è schema ‚Üî definition
+   */
+  protected override getParamsSchema(): typeof AddCommentParamsSchema {
+    return AddCommentParamsSchema;
+  }

+  /**
+   * @deprecated –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –∞–≤—Ç–æ–≥–µ–Ω–µ—Ä–∞—Ü–∏—è —á–µ—Ä–µ–∑ getParamsSchema()
+   */
  protected buildDefinition(): ToolDefinition {
+    // Fallback –¥–ª—è –æ–±—Ä–∞—Ç–Ω–æ–π —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç–∏ (–Ω–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –µ—Å–ª–∏ getParamsSchema() –æ–ø—Ä–µ–¥–µ–ª–µ–Ω)
+    const definition = new AddCommentDefinition();
    return this.definition.build();
  }
```

---

## üß™ –ü—Ä–æ–≤–µ—Ä–∫–∞ –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ—Å—Ç–∏

### –ü–æ—Å–ª–µ –º–∏–≥—Ä–∞—Ü–∏–∏ –∫–∞–∂–¥–æ–≥–æ –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–∞:

```bash
# 1. –ó–∞–ø—É—Å—Ç–∏—Ç—å unit-—Ç–µ—Å—Ç—ã –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–∞
npm test -- add-comment.test.ts

# 2. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å, —á—Ç–æ definition –≥–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç—Å—è
npm test -- add-comment.smoke.test.ts  # –µ—Å–ª–∏ –µ—Å—Ç—å
```

### –ü–æ—Å–ª–µ –º–∏–≥—Ä–∞—Ü–∏–∏ –≤—Å–µ—Ö comments:

```bash
# –ó–∞–ø—É—Å—Ç–∏—Ç—å –≤—Å–µ —Ç–µ—Å—Ç—ã –∫–∞—Ç–µ–≥–æ—Ä–∏–∏
npm test -- comments

# –ü–æ–ª–Ω–∞—è –≤–∞–ª–∏–¥–∞—Ü–∏—è –ø—Ä–æ–µ–∫—Ç–∞
npm run validate:quiet
```

**–û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç:** –í—Å–µ —Ç–µ—Å—Ç—ã –ø—Ä–æ—Ö–æ–¥—è—Ç (2165/2165)

---

## üìä –ú–µ—Ç—Ä–∏–∫–∏

**–î–æ –º–∏–≥—Ä–∞—Ü–∏–∏:**
- –ò–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–æ–≤ —Å –∞–≤—Ç–æ–≥–µ–Ω–µ—Ä–∞—Ü–∏–µ–π: 2/49 (4%)
- –§–∞–π–ª–æ–≤ `.definition.ts`: 49

**–ü–æ—Å–ª–µ –º–∏–≥—Ä–∞—Ü–∏–∏:**
- –ò–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–æ–≤ —Å –∞–≤—Ç–æ–≥–µ–Ω–µ—Ä–∞—Ü–∏–µ–π: 6/49 (12%)
- –§–∞–π–ª–æ–≤ `.definition.ts`: 49 (–µ—â–µ –Ω–µ —É–¥–∞–ª–µ–Ω—ã)

---

## üîó –°–ª–µ–¥—É—é—â–∏–π —ç—Ç–∞–ø

–ü–æ—Å–ª–µ –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è –ø–µ—Ä–µ—Ö–æ–¥–∏—Ç—å –∫ **—ç—Ç–∞–ø—É 1.2** (Checklists) - 4 tools

---

## ‚ö†Ô∏è –í–æ–∑–º–æ–∂–Ω—ã–µ –ø—Ä–æ–±–ª–µ–º—ã

### 1. –¢–µ—Å—Ç—ã –ø–∞–¥–∞—é—Ç –ø–æ—Å–ª–µ –º–∏–≥—Ä–∞—Ü–∏–∏

**–ü—Ä–∏—á–∏–Ω–∞:** –í–æ–∑–º–æ–∂–Ω–æ, schema –∏–º–µ–µ—Ç –Ω–µ—Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–µ —Ç–∏–ø—ã
**–†–µ—à–µ–Ω–∏–µ:** –ü—Ä–æ–≤–µ—Ä–∏—Ç—å, –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç –ª–∏ `generateDefinitionFromSchema` –∏—Å–ø–æ–ª—å–∑—É–µ–º—ã–µ Zod —Ç–∏–ø—ã

### 2. Definition –≥–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç—Å—è –Ω–µ–∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ

**–ü—Ä–∏—á–∏–Ω–∞:** –°–ª–æ–∂–Ω–∞—è schema —Å union/intersection types
**–†–µ—à–µ–Ω–∏–µ:** –û—Å—Ç–∞–≤–∏—Ç—å —Ä—É—á–Ω–æ–π `buildDefinition()` –¥–ª—è —ç—Ç–æ–≥–æ –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–∞, —Å–æ–∑–¥–∞—Ç—å issue –¥–ª—è —É–ª—É—á—à–µ–Ω–∏—è –≥–µ–Ω–µ—Ä–∞—Ç–æ—Ä–∞

### 3. –ò–º–ø–æ—Ä—Ç—ã –Ω–µ –Ω–∞–π–¥–µ–Ω—ã

**–ü—Ä–∏—á–∏–Ω–∞:** –ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω—ã–π –ø—É—Ç—å –∫ schema
**–†–µ—à–µ–Ω–∏–µ:** –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –∏–º–ø–æ—Ä—Ç `AddCommentParamsSchema` –≤ –Ω–∞—á–∞–ª–µ —Ñ–∞–π–ª–∞

---

## ‚úÖ –ö—Ä–∏—Ç–µ—Ä–∏–∏ –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è

- [x] –í—Å–µ 4 –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–∞ –º–∏–≥—Ä–∏—Ä–æ–≤–∞–Ω—ã
- [x] –ú–µ—Ç–æ–¥ `getParamsSchema()` –¥–æ–±–∞–≤–ª–µ–Ω –≤–æ –≤—Å–µ tools
- [x] –ú–µ—Ç–æ–¥ `buildDefinition()` –ø–æ–º–µ—á–µ–Ω –∫–∞–∫ `@deprecated`
- [x] –í—Å–µ —Ç–µ—Å—Ç—ã –ø—Ä–æ—Ö–æ–¥—è—Ç
- [x] `npm run validate:quiet` –±–µ–∑ –æ—à–∏–±–æ–∫
- [x] –ö–æ–º–º–∏—Ç —Å–æ–∑–¥–∞–Ω –∏ –∑–∞–ø—É—à–µ–Ω
- [x] –°—Ç–∞—Ç—É—Å –ø–ª–∞–Ω–∞ –æ–±–Ω–æ–≤–ª–µ–Ω

---

**–í—Ä–µ–º—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è:** ~15 –º–∏–Ω—É—Ç
**–†–µ–∑—É–ª—å—Ç–∞—Ç:** 4 –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–∞ –º–∏–≥—Ä–∏—Ä–æ–≤–∞–Ω—ã (6/49 total = 12%)
