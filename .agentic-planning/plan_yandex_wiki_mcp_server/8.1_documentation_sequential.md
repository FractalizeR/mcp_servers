# Этап 8.1: Documentation (Sequential)

## Цель
Создать документацию для пакета.

## Зависимости
- Этап 7.1 (Tests) завершён

## Чек-лист

### 1. README.md
- [ ] Создать `packages/servers/yandex-wiki/README.md`

```markdown
# MCP Server for Yandex Wiki

MCP сервер для работы с API Yandex Wiki.

## Установка

```bash
npm install mcp-server-yandex-wiki
```

## Конфигурация

### Обязательные переменные окружения

| Переменная | Описание |
|------------|----------|
| `YANDEX_WIKI_TOKEN` | OAuth токен для Wiki API |
| `YANDEX_ORG_ID` | ID организации (Яндекс 360) |

Или для Yandex Cloud:

| Переменная | Описание |
|------------|----------|
| `YANDEX_WIKI_TOKEN` | OAuth токен |
| `YANDEX_CLOUD_ORG_ID` | ID организации (Cloud) |

### Опциональные переменные

| Переменная | Default | Описание |
|------------|---------|----------|
| `LOG_LEVEL` | `info` | Уровень логирования |
| `REQUEST_TIMEOUT` | `30000` | Таймаут запросов (мс) |

## Использование

### С Claude Desktop

Добавьте в `claude_desktop_config.json`:

```json
{
  "mcpServers": {
    "yandex-wiki": {
      "command": "npx",
      "args": ["mcp-server-yandex-wiki"],
      "env": {
        "YANDEX_WIKI_TOKEN": "your-token",
        "YANDEX_ORG_ID": "your-org-id"
      }
    }
  }
}
```

## Доступные инструменты

### Pages

| Tool | Описание |
|------|----------|
| `yw_get_page` | Получить страницу по slug |
| `yw_get_page_by_id` | Получить страницу по ID |
| `yw_create_page` | Создать страницу |
| `yw_update_page` | Обновить страницу |
| `yw_delete_page` | Удалить страницу |
| `yw_clone_page` | Клонировать страницу |
| `yw_append_content` | Добавить контент |

### Helpers

| Tool | Описание |
|------|----------|
| `yw_ping` | Проверка подключения |

## Примеры

### Получить страницу

```
yw_get_page(slug: "users/docs/readme", fields: "attributes,content")
```

### Создать страницу

```
yw_create_page(
  page_type: "page",
  slug: "users/docs/new-page",
  title: "New Page",
  content: "# Hello World"
)
```

## API Reference

Base URL: `https://api.wiki.yandex.net/v1/`

Документация API: https://yandex.ru/support/wiki/ru/api-ref/

## License

MIT
```

### 2. CLAUDE.md
- [ ] Создать `packages/servers/yandex-wiki/CLAUDE.md`

```markdown
# CLAUDE.md — Yandex Wiki MCP Server

## Обязательно прочитай

- [Корневой CLAUDE.md](../../../CLAUDE.md) — правила monorepo
- [ARCHITECTURE.md](../../../ARCHITECTURE.md) — архитектура

## Структура пакета

```
src/
├── index.ts                 # Entry point
├── constants.ts             # MCP_TOOL_PREFIX = 'yw'
├── config/                  # Конфигурация
├── wiki_api/
│   ├── api_operations/      # HTTP операции
│   ├── entities/            # Типы данных
│   ├── dto/                 # Request DTOs
│   └── facade/              # Facade + Services
├── tools/
│   ├── api/pages/           # Page tools
│   └── helpers/             # Ping tool
└── composition-root/        # DI контейнер
```

## Добавление нового Tool

1. Создать директорию `src/tools/api/{category}/{action}/`
2. Создать файлы:
   - `{name}.schema.ts` — Zod schema
   - `{name}.metadata.ts` — метаданные
   - `{name}.tool.ts` — класс tool
   - `index.ts` — реэкспорт
3. Добавить в `composition-root/definitions/tool-definitions.ts`
4. Запустить `npm run validate`

## Naming Conventions

- Tool prefix: `yw_`
- Tool names: `yw_get_page`, `yw_create_page`
- Operations: `GetPageOperation`, `CreatePageOperation`
- Services: `PageService`, `GridService`

## API особенности

- Base URL: `https://api.wiki.yandex.net/v1/`
- Update через POST (не PATCH)
- Асинхронные операции (clone) возвращают status_url
- ID страницы: integer (`idx`)
- Slug страницы: string path

## Валидация

```bash
npm run validate        # lint + typecheck + test
npm run validate:quiet  # для AI агентов
```
```

### 3. Module READMEs
- [ ] Создать `src/wiki_api/entities/README.md`
- [ ] Создать `src/wiki_api/dto/README.md`
- [ ] Создать `src/wiki_api/api_operations/README.md`
- [ ] Создать `src/wiki_api/facade/README.md`
- [ ] Создать `src/tools/README.md`
- [ ] Создать `src/composition-root/README.md`

### 4. Обновить корневую документацию
- [ ] Добавить yandex-wiki в `DOCS.md`
- [ ] Добавить в `README.md` список серверов

## Валидация
```bash
npm run validate:docs  # Проверка лимитов документации
```

## Результат
- README.md для пользователей
- CLAUDE.md для разработчиков
- Module READMEs для внутренней навигации
