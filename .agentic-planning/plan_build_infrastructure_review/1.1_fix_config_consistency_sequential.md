# 1.1 Исправление консистентности конфигураций (Sequential)

**Приоритет:** Высокий
**Тип:** Sequential (изменения влияют друг на друга)
**Оценка:** ~30 минут

---

## Чеклист

### 1. Исправить корневой tsconfig.json

- [ ] Добавить `packages/framework/cli` в references
- [ ] Добавить `packages/servers/yandex-wiki` в references
- [ ] Добавить `packages/servers/ticktick` в references

**Файл:** `tsconfig.json`

```json
{
  "files": [],
  "references": [
    { "path": "./packages/framework/infrastructure" },
    { "path": "./packages/framework/cli" },
    { "path": "./packages/framework/core" },
    { "path": "./packages/framework/search" },
    { "path": "./packages/servers/yandex-tracker" },
    { "path": "./packages/servers/yandex-wiki" },
    { "path": "./packages/servers/ticktick" }
  ]
}
```

### 2. Исправить vitest.workspace.ts

- [ ] Добавить `packages/framework/cli`
- [ ] Добавить `packages/servers/yandex-wiki`
- [ ] Добавить `packages/servers/ticktick`

**Файл:** `vitest.workspace.ts`

### 3. Исправить knip.json

- [ ] Добавить workspace для `packages/framework/cli`
- [ ] Добавить workspace для `packages/servers/yandex-wiki`
- [ ] Добавить workspace для `packages/servers/ticktick`

**Файл:** `knip.json`

### 4. Исправить references в пакетах

- [ ] `packages/framework/cli/tsconfig.json` — добавить reference на infrastructure
- [ ] `packages/framework/search/tsconfig.json` — добавить reference на infrastructure (помимо core)

### 5. Валидация

- [ ] Запустить `npm run build` — проверить сборку всех пакетов
- [ ] Запустить `npm run typecheck` — проверить типы
- [ ] Запустить `npm run test` — проверить тесты

---

## Критерии завершения

- Все пакеты включены в корневые конфигурации
- `npm run build` проходит без ошибок
- `npm run validate:quiet` проходит без ошибок
