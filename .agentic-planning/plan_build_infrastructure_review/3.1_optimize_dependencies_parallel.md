# 3.1 Оптимизация devDependencies (Parallel)

**Приоритет:** Низкий
**Тип:** Parallel (независимая задача)
**Оценка:** ~20 минут

---

## Анализ дублирования

Следующие devDependencies дублируются во всех пакетах:

| Dependency | infrastructure | core | cli | search | yandex-tracker | yandex-wiki | ticktick |
|-----------|---------------|------|-----|--------|----------------|-------------|----------|
| @types/node | ✓ | ✓ | ✓ | ✓ | ✓ | ✓ | ✓ |
| rimraf | ✓ | ✓ | ✓ | - | - | - | - |
| tsc-alias | ✓ | ✓ | ✓ | ✓ | ✓ | ✓ | ✓ |
| typescript | ✓ | ✓ | ✓ | ✓ | ✓ | ✓ | ✓ |
| vitest | ✓ | ✓ | ✓ | ✓ | ✓ | ✓ | ✓ |
| vite-tsconfig-paths | ✓ | ✓ | ✓ | ✓ | ✓ | ✓ | ✓ |
| tsx | - | - | - | ✓ | ✓ | ✓ | ✓ |

---

## Чеклист

### 1. Решить: hoisting или оставить как есть

**Вариант A: Hoist в корень (рекомендуется)**
- Убрать дублирующиеся devDependencies из пакетов
- npm workspaces автоматически резолвит из корня
- Меньше размер node_modules, быстрее установка

**Вариант B: Оставить как есть**
- Пакеты самодостаточны
- Проще публиковать отдельно
- Больше контроля над версиями

**Рекомендация:** Вариант A для общих инструментов (typescript, vitest, etc.)

### 2. Если выбран Вариант A — выполнить hoisting

- [ ] Убрать из `packages/framework/infrastructure/package.json`:
  - `@types/node`, `rimraf`, `tsc-alias`, `typescript`, `vitest`, `vite-tsconfig-paths`

- [ ] Убрать из `packages/framework/core/package.json`:
  - `@types/node`, `rimraf`, `tsc-alias`, `typescript`, `vitest`, `vite-tsconfig-paths`

- [ ] Убрать из `packages/framework/cli/package.json`:
  - `@types/node`, `rimraf`, `tsc-alias`, `typescript`, `vitest`, `vite-tsconfig-paths`

- [ ] Убрать из `packages/framework/search/package.json`:
  - `@types/node`, `tsc-alias`, `tsx`, `typescript`, `vitest`, `vite-tsconfig-paths`

- [ ] Убрать из `packages/servers/yandex-tracker/package.json`:
  - `@types/node`, `tsc-alias`, `tsx`, `typescript`, `vitest`, `vite-tsconfig-paths`

- [ ] Убрать из `packages/servers/yandex-wiki/package.json`:
  - `@types/node`, `tsc-alias`, `tsx`, `typescript`, `vitest`, `vite-tsconfig-paths`

- [ ] Убрать из `packages/servers/ticktick/package.json`:
  - `@types/node`, `tsc-alias`, `tsx`, `typescript`, `vitest`, `vite-tsconfig-paths`

### 3. Добавить недостающие в корень

- [ ] Проверить что `vite-tsconfig-paths` есть в корневом package.json
- [ ] Добавить если отсутствует

### 4. Переустановить зависимости

- [ ] Запустить `npm run clean:all`
- [ ] Запустить `npm install`

### 5. Валидация

- [ ] Запустить `npm run build`
- [ ] Запустить `npm run test`
- [ ] Запустить `npm run validate:quiet`

---

## Критерии завершения

- Общие devDependencies в корне
- Пакеты не содержат дублирующихся зависимостей
- Сборка и тесты проходят
