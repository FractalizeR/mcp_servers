# Phase 0.1: –ü–æ–¥–≥–æ—Ç–æ–≤–∫–∞ (–±–ª–æ–∫–∏—Ä—É—é—â–∏–π —ç—Ç–∞–ø)

**–¶–µ–ª—å:** –°–æ–∑–¥–∞—Ç—å –±–∞–∑–æ–≤—É—é —Å—Ç—Ä—É–∫—Ç—É—Ä—É –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–π –∏ –º–∏–Ω–∏–º–∞–ª—å–Ω—ã–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è –∫–æ–Ω—Ñ–∏–≥–æ–≤ –¥–ª—è –ø–æ–¥–¥–µ—Ä–∂–∫–∏ –ø–∞—Ä–∞–ª–ª–µ–ª—å–Ω—ã—Ö —ç—Ç–∞–ø–æ–≤.

**–í–µ—Ç–∫–∞:** `main` (–∏–ª–∏ —Ç–µ–∫—É—â–∞—è —Ä–∞–±–æ—á–∞—è –≤–µ—Ç–∫–∞)

**–ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏:** –Ω–µ—Ç

**–ë–ª–æ–∫–∏—Ä—É–µ—Ç:** –≤—Å–µ —ç—Ç–∞–ø—ã Phase 1

---

## ‚úÖ –ß–µ–∫-–ª–∏—Å—Ç

### 0. –°–æ–∑–¥–∞–Ω–∏–µ backup –ø–µ—Ä–µ–¥ –º–∏–≥—Ä–∞—Ü–∏–µ–π

- [ ] –°–æ–∑–¥–∞—Ç—å git tag –¥–ª—è –æ—Ç–∫–∞—Ç–∞ –≤ —Å–ª—É—á–∞–µ –ø—Ä–æ–±–ª–µ–º:
```bash
git tag backup-before-multi-server-migration
git push origin backup-before-multi-server-migration
```

- [ ] –£–±–µ–¥–∏—Ç—å—Å—è —á—Ç–æ –≤—Å–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è –∑–∞–∫–æ–º–º–∏—á–µ–Ω—ã:
```bash
git status  # –¥–æ–ª–∂–Ω–æ –±—ã—Ç—å: nothing to commit, working tree clean
```

- [ ] –°–æ—Ö—Ä–∞–Ω–∏—Ç—å –º–µ—Ç—Ä–∏–∫–∏ –î–û –º–∏–≥—Ä–∞—Ü–∏–∏ (–¥–ª—è —Å—Ä–∞–≤–Ω–µ–Ω–∏—è –ø–æ—Å–ª–µ):
```bash
# –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ —Ñ–∞–π–ª–æ–≤
find packages/ -type f | wc -l > /tmp/migration-files-before.txt

# –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ —Ç–µ—Å—Ç–æ–≤
npm run test 2>&1 | grep -E "Test Files|Tests" | tee /tmp/migration-tests-before.txt

# –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø–∞–∫–µ—Ç–æ–≤
ls -la packages/ > /tmp/migration-structure-before.txt

echo "‚úÖ –ú–µ—Ç—Ä–∏–∫–∏ —Å–æ—Ö—Ä–∞–Ω–µ–Ω—ã –≤ /tmp/migration-*-before.txt"
```

### 0.1. –ü–ª–∞–Ω –æ—Ç–∫–∞—Ç–∞ (–µ—Å–ª–∏ —á—Ç–æ-—Ç–æ –ø–æ–π–¥–µ—Ç –Ω–µ —Ç–∞–∫)

**‚ö†Ô∏è –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ —Ç–æ–ª—å–∫–æ –µ—Å–ª–∏ –º–∏–≥—Ä–∞—Ü–∏—è –ø–æ–ª–Ω–æ—Å—Ç—å—é –ø—Ä–æ–≤–∞–ª–∏–ª–∞—Å—å!**

–ï—Å–ª–∏ –º–∏–≥—Ä–∞—Ü–∏—è –ø—Ä–æ–≤–∞–ª–∏—Ç—Å—è –Ω–∞ –ª—é–±–æ–º —ç—Ç–∞–ø–µ:

```bash
# 1. –í–µ—Ä–Ω—É—Ç—å—Å—è –∫ backup —Ç–µ–≥—É
git reset --hard backup-before-multi-server-migration

# 2. –£–¥–∞–ª–∏—Ç—å –∞—Ä—Ç–µ—Ñ–∞–∫—Ç—ã –º–∏–≥—Ä–∞—Ü–∏–∏ (–µ—Å–ª–∏ –µ—Å—Ç—å)
rm -rf packages/framework packages/servers

# 3. –ü–µ—Ä–µ—É—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏
npm install
npm run build

# 4. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —á—Ç–æ –≤—Å–µ —Ä–∞–±–æ—Ç–∞–µ—Ç
npm run test
npm run validate
```

### 1. –°–æ–∑–¥–∞–Ω–∏–µ –Ω–æ–≤–æ–π —Å—Ç—Ä—É–∫—Ç—É—Ä—ã –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–π

- [ ] –°–æ–∑–¥–∞—Ç—å `packages/framework/`
- [ ] –°–æ–∑–¥–∞—Ç—å `packages/servers/`
- [ ] –°–æ–∑–¥–∞—Ç—å `.gitkeep` —Ñ–∞–π–ª—ã –≤ –Ω–æ–≤—ã—Ö –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—è—Ö

```bash
mkdir -p packages/framework packages/servers
touch packages/framework/.gitkeep packages/servers/.gitkeep
```

### 2. –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –∫–æ—Ä–Ω–µ–≤–æ–≥–æ package.json

- [ ] –û–±–Ω–æ–≤–∏—Ç—å `workspaces` –¥–ª—è –Ω–æ–≤–æ–π —Å—Ç—Ä—É–∫—Ç—É—Ä—ã:

```json
{
  "workspaces": [
    "packages/framework/*",
    "packages/servers/*"
  ]
}
```

- [ ] –°–æ—Ö—Ä–∞–Ω–∏—Ç—å —Å—Ç–∞—Ä—ã–µ workspace –ø—É—Ç–∏ –¥–ª—è —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç–∏ (–≤—Ä–µ–º–µ–Ω–Ω–æ):

```json
{
  "workspaces": [
    "packages/infrastructure",
    "packages/core",
    "packages/search",
    "packages/yandex-tracker",
    "packages/framework/*",
    "packages/servers/*"
  ]
}
```

### 3. –°–æ–∑–¥–∞–Ω–∏–µ –±–∞–∑–æ–≤—ã—Ö tsconfig —Ñ–∞–π–ª–æ–≤

- [ ] –°–æ–∑–¥–∞—Ç—å `packages/framework/tsconfig.base.json` (–∫–æ–ø–∏—è –Ω–∞—Å—Ç—Ä–æ–µ–∫)
- [ ] –°–æ–∑–¥–∞—Ç—å `packages/servers/tsconfig.base.json` (–∫–æ–ø–∏—è –Ω–∞—Å—Ç—Ä–æ–µ–∫)

### 4. –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ .dependency-cruiser.cjs

- [ ] –î–æ–±–∞–≤–∏—Ç—å –ø—Ä–∞–≤–∏–ª–∞ –¥–ª—è –Ω–æ–≤–æ–π —Å—Ç—Ä—É–∫—Ç—É—Ä—ã:
  - `packages/framework/infrastructure` ‚Äî –±–∞–∑–∞ (0 deps)
  - `packages/framework/core` ‚Üí –º–æ–∂–µ—Ç –∑–∞–≤–∏—Å–µ—Ç—å –æ—Ç infrastructure
  - `packages/framework/search` ‚Üí –º–æ–∂–µ—Ç –∑–∞–≤–∏—Å–µ—Ç—å –æ—Ç core
  - `packages/servers/*` ‚Üí –º–æ–∂–µ—Ç –∑–∞–≤–∏—Å–µ—Ç—å –æ—Ç –≤—Å–µ—Ö framework –ø–∞–∫–µ—Ç–æ–≤

- [ ] –í—Ä–µ–º–µ–Ω–Ω–æ —Ä–∞–∑—Ä–µ—à–∏—Ç—å —Å—Ç–∞—Ä—ã–µ –ø—É—Ç–∏ –¥–ª—è –º–∏–≥—Ä–∞—Ü–∏–∏

### 5. –í–∞–ª–∏–¥–∞—Ü–∏—è –ø–æ–¥–≥–æ—Ç–æ–≤–∫–∏

- [ ] `npm install` ‚Äî —É—Å–ø–µ—à–Ω–æ
- [ ] `npm run build` ‚Äî —Å–æ–±–∏—Ä–∞–µ—Ç —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–µ –ø–∞–∫–µ—Ç—ã
- [ ] `npm run depcruise` ‚Äî –Ω–µ—Ç –æ—à–∏–±–æ–∫ (—Å—Ç–∞—Ä—ã–µ –ø—Ä–∞–≤–∏–ª–∞ –µ—â–µ —Ä–∞–±–æ—Ç–∞—é—Ç)

---

## üì§ –†–µ–∑—É–ª—å—Ç–∞—Ç —ç—Ç–∞–ø–∞

- ‚úÖ –ù–æ–≤–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–π —Å–æ–∑–¥–∞–Ω–∞
- ‚úÖ Workspace –Ω–∞—Å—Ç—Ä–æ–µ–Ω –¥–ª—è –æ–±–µ–∏—Ö —Å—Ç—Ä—É–∫—Ç—É—Ä (—Å—Ç–∞—Ä–æ–π –∏ –Ω–æ–≤–æ–π)
- ‚úÖ –ë–∞–∑–æ–≤—ã–µ –∫–æ–Ω—Ñ–∏–≥–∏ —Å–æ–∑–¥–∞–Ω—ã
- ‚úÖ –í–∞–ª–∏–¥–∞—Ü–∏—è –ø—Ä–æ—Ö–æ–¥–∏—Ç

---

## üöÄ –ü–æ—Å–ª–µ –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è

–ö–æ–º–º–∏—Ç –∏ –ø—É—à:
```
git add packages/framework packages/servers package.json .dependency-cruiser.cjs
git commit -m "chore: –ø–æ–¥–≥–æ—Ç–æ–≤–∏—Ç—å —Å—Ç—Ä—É–∫—Ç—É—Ä—É –¥–ª—è multi-server –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—ã

- –°–æ–∑–¥–∞—Ç—å packages/framework –∏ packages/servers
- –û–±–Ω–æ–≤–∏—Ç—å workspaces –¥–ª—è –ø–æ–¥–¥–µ—Ä–∂–∫–∏ –Ω–æ–≤–æ–π —Å—Ç—Ä—É–∫—Ç—É—Ä—ã
- –î–æ–±–∞–≤–∏—Ç—å –±–∞–∑–æ–≤—ã–µ tsconfig –¥–ª—è –Ω–æ–≤—ã—Ö –∫–∞—Ç–µ–≥–æ—Ä–∏–π –ø–∞–∫–µ—Ç–æ–≤
- –û–±–Ω–æ–≤–∏—Ç—å dependency-cruiser –ø—Ä–∞–≤–∏–ª–∞

Ref: Phase 0.1 migration plan

ü§ñ Generated with Claude Code
Co-Authored-By: Claude <noreply@anthropic.com>"
git push
```

**–ì–æ—Ç–æ–≤–æ –∫ Phase 1** ‚Äî –ø–∞—Ä–∞–ª–ª–µ–ª—å–Ω—ã–µ —ç—Ç–∞–ø—ã –º–æ–≥—É—Ç –Ω–∞—á–∏–Ω–∞—Ç—å—Å—è!
