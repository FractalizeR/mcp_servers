# Migration Plan: Multi-Server Architecture

**–¶–µ–ª—å:** –†–µ—Å—Ç—Ä—É–∫—Ç—É—Ä–∏–∑–∞—Ü–∏—è monorepo –¥–ª—è –ø–æ–¥–¥–µ—Ä–∂–∫–∏ –º–Ω–æ–∂–µ—Å—Ç–≤–µ–Ω–Ω—ã—Ö MCP —Å–µ—Ä–≤–µ—Ä–æ–≤

**–î–∞—Ç–∞ —Å–æ–∑–¥–∞–Ω–∏—è:** 2025-11-17

---

## üìã –û–±—â–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø–ª–∞–Ω–∞

### Phase 0: –ü–æ–¥–≥–æ—Ç–æ–≤–∫–∞ (–ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ, –≤ main)
- **0.1_preparation.md** ‚Äî —Å–æ–∑–¥–∞–Ω–∏–µ –±–∞–∑–æ–≤–æ–π —Å—Ç—Ä—É–∫—Ç—É—Ä—ã, workspace –Ω–∞—Å—Ç—Ä–æ–π–∫–∞

### Phase 1: –ü–∞—Ä–∞–ª–ª–µ–ª—å–Ω–æ–µ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ (4 –Ω–µ–∑–∞–≤–∏—Å–∏–º—ã—Ö –≤–µ—Ç–∫–∏)
- **1.1_move_framework_packages.md** ‚Äî –ø–µ—Ä–µ–º–µ—â–µ–Ω–∏–µ infrastructure, core, search
- **1.2_move_server_package.md** ‚Äî –ø–µ—Ä–µ–º–µ—â–µ–Ω–∏–µ yandex-tracker, —Å–º–µ–Ω–∞ scope
- **1.3_prepare_build_configs.md** ‚Äî –∏–º–µ–Ω–æ–≤–∞–Ω–Ω—ã–µ –±–∞–Ω–¥–ª—ã, tsup –∫–æ–Ω—Ñ–∏–≥–∏
- **1.4_update_documentation.md** ‚Äî –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ –≤—Å–µ–π –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏

### Phase 2: –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è –∏ —Ñ–∏–Ω–∞–ª–∏–∑–∞—Ü–∏—è (–ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ)
- **2.1_integration_and_validation.md** ‚Äî –º–µ—Ä–¥–∂ –≤–µ—Ç–æ–∫, —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ
- **2.2_ci_cd_updates.md** ‚Äî –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ GitHub Actions workflows
- **2.3_final_validation.md** ‚Äî —Ñ–∏–Ω–∞–ª—å–Ω—ã–µ –ø—Ä–æ–≤–µ—Ä–∫–∏, –ø—É–±–ª–∏–∫–∞—Ü–∏—è

---

## üîÑ Workflow –¥–ª—è –ø–∞—Ä–∞–ª–ª–µ–ª—å–Ω–æ–≥–æ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è

### –®–∞–≥ 1: –í—ã–ø–æ–ª–Ω–∏—Ç—å Phase 0
–û–¥–∏–Ω –ò–ò –∞–≥–µ–Ω—Ç –∏–ª–∏ —á–µ–ª–æ–≤–µ–∫ –≤—ã–ø–æ–ª–Ω—è–µ—Ç 0.1_preparation.md –≤ main –≤–µ—Ç–∫–µ.

### –®–∞–≥ 2: –ó–∞–ø—É—Å—Ç–∏—Ç—å 4 –ø–∞—Ä–∞–ª–ª–µ–ª—å–Ω—ã—Ö –∞–≥–µ–Ω—Ç–∞
–ü–æ—Å–ª–µ –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è Phase 0, –∑–∞–ø—É—Å—Ç–∏—Ç—å 4 –æ—Ç–¥–µ–ª—å–Ω—ã—Ö –∞–≥–µ–Ω—Ç–∞ –≤ –ø–∞—Ä–∞–ª–ª–µ–ª—å–Ω—ã—Ö –≤–µ—Ç–∫–∞—Ö:

**–ê–≥–µ–Ω—Ç A:**
```bash
git checkout -b claude/migrate-framework-packages-{session-id}
# –í—ã–ø–æ–ª–Ω–∏—Ç—å 1.1_move_framework_packages.md
```

**–ê–≥–µ–Ω—Ç B:**
```bash
git checkout -b claude/migrate-server-package-{session-id}
# –í—ã–ø–æ–ª–Ω–∏—Ç—å 1.2_move_server_package.md
```

**–ê–≥–µ–Ω—Ç C:**
```bash
git checkout -b claude/prepare-build-configs-{session-id}
# –í—ã–ø–æ–ª–Ω–∏—Ç—å 1.3_prepare_build_configs.md
```

**–ê–≥–µ–Ω—Ç D:**
```bash
git checkout -b claude/update-docs-multi-server-{session-id}
# –í—ã–ø–æ–ª–Ω–∏—Ç—å 1.4_update_documentation.md
```

### –®–∞–≥ 3: –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è
–ü–æ—Å–ª–µ –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è –≤—Å–µ—Ö Phase 1 –≤–µ—Ç–æ–∫:

**–ê–≥–µ–Ω—Ç E (–∏–ª–∏ —Ç–æ—Ç –∂–µ —á—Ç–æ Phase 0):**
```bash
git checkout -b claude/integration-multi-server-{session-id}
# –í—ã–ø–æ–ª–Ω–∏—Ç—å 2.1_integration_and_validation.md
# –í—ã–ø–æ–ª–Ω–∏—Ç—å 2.2_ci_cd_updates.md
# –í—ã–ø–æ–ª–Ω–∏—Ç—å 2.3_final_validation.md
```

---

## ‚ö†Ô∏è –ò–∑–≤–µ—Å—Ç–Ω—ã–µ –∫–æ–Ω—Ñ–ª–∏–∫—Ç—ã –º–µ–∂–¥—É –≤–µ—Ç–∫–∞–º–∏

### –ö–æ–Ω—Ñ–ª–∏–∫—Ç 1: package.json (bin section)
- **–í–µ—Ç–∫–∏:** 1.2 (move server) vs 1.3 (build configs)
- **–§–∞–π–ª:** `packages/servers/yandex-tracker/package.json`
- **–†–∞–∑—Ä–µ—à–µ–Ω–∏–µ:** –í–∑—è—Ç—å –≤–µ—Ä—Å–∏—é –∏–∑ 1.3 (—Å `yandex-tracker.bundle.js`)

### –ö–æ–Ω—Ñ–ª–∏–∫—Ç 2: –ö–æ—Ä–Ω–µ–≤–æ–π package.json (workspaces)
- **–í–µ—Ç–∫–∏:** –ü–æ—Ç–µ–Ω—Ü–∏–∞–ª—å–Ω–æ –≤—Å–µ Phase 1
- **–§–∞–π–ª:** `package.json`
- **–†–∞–∑—Ä–µ—à–µ–Ω–∏–µ:** –û–±—ä–µ–¥–∏–Ω–∏—Ç—å –æ–±–∞ workspace –º–∞—Å—Å–∏–≤–∞

### –ö–æ–Ω—Ñ–ª–∏–∫—Ç 3: .dependency-cruiser.cjs
- **–í–µ—Ç–∫–∏:** 1.1 (framework) vs 1.2 (server)
- **–§–∞–π–ª:** `.dependency-cruiser.cjs`
- **–†–∞–∑—Ä–µ—à–µ–Ω–∏–µ:** –û–±—ä–µ–¥–∏–Ω–∏—Ç—å –ø—Ä–∞–≤–∏–ª–∞ –¥–ª—è –æ–±–µ–∏—Ö –∫–∞—Ç–µ–≥–æ—Ä–∏–π

---

## üìä –ü—Ä–æ–≥—Ä–µ—Å—Å

### Phase 0
- [x] 0.1_preparation.md ‚úÖ **–ó–ê–í–ï–†–®–ï–ù–û** (commit: 564e1c0)

### Phase 1 (–ø–∞—Ä–∞–ª–ª–µ–ª—å–Ω–æ)
- [ ] 1.1_move_framework_packages.md
- [ ] 1.2_move_server_package.md
- [ ] 1.3_prepare_build_configs.md
- [ ] 1.4_update_documentation.md

### Phase 2
- [ ] 2.1_integration_and_validation.md
- [ ] 2.2_ci_cd_updates.md
- [ ] 2.3_final_validation.md

---

## üéØ –û–∂–∏–¥–∞–µ–º—ã–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã

–ü–æ—Å–ª–µ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –≤—Å–µ–≥–æ –ø–ª–∞–Ω–∞:

```
packages/
‚îú‚îÄ‚îÄ framework/              ‚Üí –ü–µ—Ä–µ–∏—Å–ø–æ–ª—å–∑—É–µ–º—ã–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã
‚îÇ   ‚îú‚îÄ‚îÄ infrastructure/     ‚Üí @mcp-framework/infrastructure
‚îÇ   ‚îú‚îÄ‚îÄ core/              ‚Üí @mcp-framework/core
‚îÇ   ‚îî‚îÄ‚îÄ search/            ‚Üí @mcp-framework/search
‚îî‚îÄ‚îÄ servers/               ‚Üí MCP —Å–µ—Ä–≤–µ—Ä—ã
    ‚îî‚îÄ‚îÄ yandex-tracker/    ‚Üí @mcp-server/yandex-tracker
        ‚îî‚îÄ‚îÄ dist/yandex-tracker.bundle.js
```

**–ò–∑–º–µ–Ω–µ–Ω–∏—è:**
- ‚úÖ –ù–æ–≤–∞—è –∫–∞—Ç–µ–≥–æ—Ä–∏–∑–∞—Ü–∏—è –ø–∞–∫–µ—Ç–æ–≤ (framework vs servers)
- ‚úÖ Scope –¥–ª—è —Å–µ—Ä–≤–µ—Ä–∞: `@mcp-server/yandex-tracker`
- ‚úÖ –ò–º–µ–Ω–æ–≤–∞–Ω–Ω—ã–π –±–∞–Ω–¥–ª: `yandex-tracker.bundle.js`
- ‚úÖ –ì–æ—Ç–æ–≤–Ω–æ—Å—Ç—å –∫ –¥–æ–±–∞–≤–ª–µ–Ω–∏—é –Ω–æ–≤—ã—Ö —Å–µ—Ä–≤–µ—Ä–æ–≤ (GitHub, Jira, etc.)
- ‚úÖ –û–±–Ω–æ–≤–ª–µ–Ω–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è
- ‚úÖ –ù–∞—Å—Ç—Ä–æ–µ–Ω–Ω—ã–π CI/CD

---

## üìû –ö–æ–æ—Ä–¥–∏–Ω–∞—Ü–∏—è –º–µ–∂–¥—É –∞–≥–µ–Ω—Ç–∞–º–∏

**–ï—Å–ª–∏ –∞–≥–µ–Ω—Ç—ã —Ä–∞–±–æ—Ç–∞—é—Ç –ø–∞—Ä–∞–ª–ª–µ–ª—å–Ω–æ:**

1. **–ö–æ–º–º—É–Ω–∏–∫–∞—Ü–∏—è:** –ö–∞–∂–¥—ã–π –∞–≥–µ–Ω—Ç –ø–∏—à–µ—Ç —Å—Ç–∞—Ç—É—Å –≤ –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–∏ –∫ PR —Å–≤–æ–µ–π –≤–µ—Ç–∫–∏
2. **–ë–ª–æ–∫–∏—Ä–æ–≤–∫–∏:** Phase 1 –∞–≥–µ–Ω—Ç—ã –ù–ï –±–ª–æ–∫–∏—Ä—É—é—Ç –¥—Ä—É–≥ –¥—Ä—É–≥–∞ (–Ω–µ–∑–∞–≤–∏—Å–∏–º—ã)
3. **–ü–æ—Ä—è–¥–æ–∫ –º–µ—Ä–¥–∂–∞:** –°–º. 2.1_integration_and_validation.md (framework ‚Üí server ‚Üí configs ‚Üí docs)
4. **–ö–æ–Ω—Ñ–ª–∏–∫—Ç—ã:** –†–∞–∑—Ä–µ—à–∞—é—Ç—Å—è –≤ Phase 2.1 –æ–¥–Ω–∏–º –∞–≥–µ–Ω—Ç–æ–º/—á–µ–ª–æ–≤–µ–∫–æ–º

---

## üöÄ –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç

–î–ª—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è/–∫–æ–æ—Ä–¥–∏–Ω–∞—Ç–æ—Ä–∞ –∞–≥–µ–Ω—Ç–æ–≤:

```bash
# 1. –í—ã–ø–æ–ª–Ω–∏—Ç—å Phase 0 (–≤ main)
cd /home/user/mcp_server_yandex_tracker
git checkout main
# –°–ª–µ–¥–æ–≤–∞—Ç—å .agentic-planning/plan_multi_server_architecture/0.1_preparation.md

# 2. –ó–∞–ø—É—Å—Ç–∏—Ç—å 4 –ø–∞—Ä–∞–ª–ª–µ–ª—å–Ω—ã—Ö —Å–µ—Å—Å–∏–∏ Claude Code
# –ö–∞–∂–¥–æ–π —Å–µ—Å—Å–∏–∏ –¥–∞—Ç—å –ø—Ä–æ–º–ø—Ç:
"–í—ã–ø–æ–ª–Ω–∏ Phase 1.X –∏–∑ –ø–ª–∞–Ω–∞ .agentic-planning/plan_multi_server_architecture/"

# 3. –ü–æ—Å–ª–µ –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è –≤—Å–µ—Ö Phase 1 ‚Äî –∑–∞–ø—É—Å—Ç–∏—Ç—å Phase 2
"–í—ã–ø–æ–ª–Ω–∏ Phase 2 (–∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è) –∏–∑ –ø–ª–∞–Ω–∞ –º–∏–≥—Ä–∞—Ü–∏–∏"
```

---

## ‚úÖ –ö—Ä–∏—Ç–µ—Ä–∏–∏ —É—Å–ø–µ—Ö–∞

–ú–∏–≥—Ä–∞—Ü–∏—è —Å—á–∏—Ç–∞–µ—Ç—Å—è —É—Å–ø–µ—à–Ω–æ–π –µ—Å–ª–∏:

- [ ] –í—Å–µ –ø–∞–∫–µ—Ç—ã —Å–æ–±–∏—Ä–∞—é—Ç—Å—è –±–µ–∑ –æ—à–∏–±–æ–∫
- [ ] –í—Å–µ —Ç–µ—Å—Ç—ã –ø—Ä–æ—Ö–æ–¥—è—Ç (100% pass rate)
- [ ] `npm run validate` —É—Å–ø–µ—à–Ω–∞
- [ ] `npm run depcruise` –±–µ–∑ –æ—à–∏–±–æ–∫
- [ ] MCP —Å–µ—Ä–≤–µ—Ä –∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è –∏ —Ä–∞–±–æ—Ç–∞–µ—Ç
- [ ] CLI –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã —Ä–∞–±–æ—Ç–∞—é—Ç
- [ ] –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –∞–∫—Ç—É–∞–ª—å–Ω–∞
- [ ] CI/CD –ø—Ä–æ—Ö–æ–¥–∏—Ç
- [ ] –ü–∞–∫–µ—Ç—ã –æ–ø—É–±–ª–∏–∫–æ–≤–∞–Ω—ã –≤ npm (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)

---

**–ê–≤—Ç–æ—Ä –ø–ª–∞–Ω–∞:** Claude Code
**–í–µ—Ä—Å–∏—è:** 1.0
**–ü–æ—Å–ª–µ–¥–Ω–µ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ:** 2025-11-17
