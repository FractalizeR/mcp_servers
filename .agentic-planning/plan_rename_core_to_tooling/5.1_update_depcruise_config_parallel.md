# –≠—Ç–∞–ø 5.1: –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ dependency-cruiser –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ (PARALLEL)

**Execution Type:** Parallel
**–ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏:** –≠—Ç–∞–ø 3 –∑–∞–≤–µ—Ä—à–µ–Ω
**–ú–æ–∂–Ω–æ –Ω–∞—á–∏–Ω–∞—Ç—å:** –ü–æ—Å–ª–µ —É—Å–ø–µ—à–Ω–æ–≥–æ –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è —ç—Ç–∞–ø–∞ 3
**–ú–æ–∂–Ω–æ –≤—ã–ø–æ–ª–Ω—è—Ç—å –ø–∞—Ä–∞–ª–ª–µ–ª—å–Ω–æ —Å:** 4.1, 4.2, 5.2, 5.3
**–û–∂–∏–¥–∞–µ–º–æ–µ –≤—Ä–µ–º—è:** 10 –º–∏–Ω—É—Ç

---

## üéØ –¶–µ–ª—å —ç—Ç–∞–ø–∞

–û–±–Ω–æ–≤–∏—Ç—å `.dependency-cruiser.cjs` –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é –¥–ª—è –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ–π –≤–∞–ª–∏–¥–∞—Ü–∏–∏ dependency graph —Å –Ω–æ–≤—ã–º –Ω–∞–∑–≤–∞–Ω–∏–µ–º –ø–∞–∫–µ—Ç–∞.

---

## ‚úÖ –ß–µ–∫-–ª–∏—Å—Ç –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è

### 5.1.1 –û—Ç–∫—Ä—ã—Ç—å –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–æ–Ω–Ω—ã–π —Ñ–∞–π–ª

- [ ] –û—Ç–∫—Ä—ã—Ç—å `.dependency-cruiser.cjs` –≤ –∫–æ—Ä–Ω–µ –ø—Ä–æ–µ–∫—Ç–∞
- [ ] –ù–∞–π—Ç–∏ –≤—Å–µ —É–ø–æ–º–∏–Ω–∞–Ω–∏—è "core" –≤ —Ñ–∞–π–ª–µ

**–§–∞–π–ª:** `.dependency-cruiser.cjs`

**–ö–æ–º–∞–Ω–¥—ã –¥–ª—è –ø–æ–∏—Å–∫–∞:**
```bash
grep -n "core" .dependency-cruiser.cjs
```

**–û–∂–∏–¥–∞–µ–º—ã–µ —Å–æ–≤–ø–∞–¥–µ–Ω–∏—è:** –ù–µ—Å–∫–æ–ª—å–∫–æ –ø—Ä–∞–≤–∏–ª –≤–∞–ª–∏–¥–∞—Ü–∏–∏ dependency graph.

### 5.1.2 –û–±–Ω–æ–≤–∏—Ç—å –ø—Ä–∞–≤–∏–ª–æ "infrastructure-bottom-layer"

–ù–∞–π—Ç–∏ –ø—Ä–∞–≤–∏–ª–æ, –∫–æ—Ç–æ—Ä–æ–µ –ø—Ä–æ–≤–µ—Ä—è–µ—Ç —á—Ç–æ infrastructure –Ω–µ –∑–∞–≤–∏—Å–∏—Ç –æ—Ç –¥—Ä—É–≥–∏—Ö –ø–∞–∫–µ—Ç–æ–≤.

- [ ] –ó–∞–º–µ–Ω–∏—Ç—å —É–ø–æ–º–∏–Ω–∞–Ω–∏—è "core" –Ω–∞ "tooling" –≤ path patterns

**–¢–µ–∫—É—â–µ–µ –ø—Ä–∞–≤–∏–ª–æ (–ø—Ä–∏–º–µ—Ä–Ω–æ —Å—Ç—Ä–æ–∫–∏ 30-40):**
```javascript
{
  name: 'infrastructure-bottom-layer',
  comment: 'Infrastructure ‚Äî –±–∞–∑–æ–≤—ã–π —Å–ª–æ–π, –Ω–µ –∑–∞–≤–∏—Å–∏—Ç –æ—Ç –¥—Ä—É–≥–∏—Ö framework –ø–∞–∫–µ—Ç–æ–≤',
  from: {
    path: '^packages/(infrastructure|framework/infrastructure)/',
  },
  to: {
    path: '^packages/(core|search|cli|yandex-tracker|framework/(core|search)|servers/)/',
    //              ^^^^                                          ^^^^
  },
}
```

**–û–±–Ω–æ–≤–∏—Ç—å –Ω–∞:**
```javascript
to: {
  path: '^packages/(tooling|search|cli|yandex-tracker|framework/(tooling|search)|servers/)/',
  //              ^^^^^^^                                          ^^^^^^^
}
```

### 5.1.3 –û–±–Ω–æ–≤–∏—Ç—å –ø—Ä–∞–≤–∏–ª–æ "core-depends-only-on-infrastructure"

–ù–∞–π—Ç–∏ –ø—Ä–∞–≤–∏–ª–æ, –∫–æ—Ç–æ—Ä–æ–µ –ø—Ä–æ–≤–µ—Ä—è–µ—Ç –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ core –ø–∞–∫–µ—Ç–∞.

- [ ] –ü–µ—Ä–µ–∏–º–µ–Ω–æ–≤–∞—Ç—å —Å–∞–º–æ –ø—Ä–∞–≤–∏–ª–æ
- [ ] –û–±–Ω–æ–≤–∏—Ç—å path patterns
- [ ] –û–±–Ω–æ–≤–∏—Ç—å –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π

**–¢–µ–∫—É—â–µ–µ –ø—Ä–∞–≤–∏–ª–æ (–ø—Ä–∏–º–µ—Ä–Ω–æ —Å—Ç—Ä–æ–∫–∏ 42-52):**
```javascript
{
  name: 'core-depends-only-on-infrastructure',
  comment: 'Core –º–æ–∂–µ—Ç –∑–∞–≤–∏—Å–µ—Ç—å —Ç–æ–ª—å–∫–æ –æ—Ç infrastructure',
  from: {
    path: '^packages/(core|framework/core)/',
  },
  to: {
    path: '^packages/(search|cli|yandex-tracker|framework/search|servers/)/',
  },
}
```

**–û–±–Ω–æ–≤–∏—Ç—å –Ω–∞:**
```javascript
{
  name: 'tooling-depends-only-on-infrastructure',
  comment: 'Tooling –º–æ–∂–µ—Ç –∑–∞–≤–∏—Å–µ—Ç—å —Ç–æ–ª—å–∫–æ –æ—Ç infrastructure',
  from: {
    path: '^packages/(tooling|framework/tooling)/',
  },
  to: {
    path: '^packages/(search|cli|yandex-tracker|framework/search|servers/)/',
  },
}
```

### 5.1.4 –û–±–Ω–æ–≤–∏—Ç—å –ø—Ä–∞–≤–∏–ª–æ "search-depends-only-on-core-and-infrastructure"

–ù–∞–π—Ç–∏ –ø—Ä–∞–≤–∏–ª–æ –¥–ª—è search –ø–∞–∫–µ—Ç–∞.

- [ ] –ü–µ—Ä–µ–∏–º–µ–Ω–æ–≤–∞—Ç—å –ø—Ä–∞–≤–∏–ª–æ
- [ ] –û–±–Ω–æ–≤–∏—Ç—å –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π

**–¢–µ–∫—É—â–µ–µ –ø—Ä–∞–≤–∏–ª–æ (–ø—Ä–∏–º–µ—Ä–Ω–æ —Å—Ç—Ä–æ–∫–∏ 54-64):**
```javascript
{
  name: 'search-depends-only-on-core-and-infrastructure',
  comment: 'Search –º–æ–∂–µ—Ç –∑–∞–≤–∏—Å–µ—Ç—å —Ç–æ–ª—å–∫–æ –æ—Ç core –∏ infrastructure',
  // ...
}
```

**–û–±–Ω–æ–≤–∏—Ç—å –Ω–∞:**
```javascript
{
  name: 'search-depends-only-on-tooling-and-infrastructure',
  comment: 'Search –º–æ–∂–µ—Ç –∑–∞–≤–∏—Å–µ—Ç—å —Ç–æ–ª—å–∫–æ –æ—Ç tooling –∏ infrastructure',
  // ...
}
```

### 5.1.5 –û–±–Ω–æ–≤–∏—Ç—å –ø—Ä–∞–≤–∏–ª–æ "no-reverse-dependencies"

–ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ø—Ä–∞–≤–∏–ª–æ, –∑–∞–ø—Ä–µ—â–∞—é—â–µ–µ –æ–±—Ä–∞—Ç–Ω—ã–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏.

- [ ] –û–±–Ω–æ–≤–∏—Ç—å path patterns –µ—Å–ª–∏ —É–ø–æ–º–∏–Ω–∞–µ—Ç—Å—è core

**–¢–µ–∫—É—â–µ–µ –ø—Ä–∞–≤–∏–ª–æ (–ø—Ä–∏–º–µ—Ä–Ω–æ —Å—Ç—Ä–æ–∫–∏ 18-28):**
```javascript
{
  name: 'no-reverse-dependencies',
  comment: '–ó–∞–ø—Ä–µ—Ç –æ–±—Ä–∞—Ç–Ω—ã—Ö –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π –≤ –≥—Ä–∞—Ñ–µ –ø–∞–∫–µ—Ç–æ–≤',
  from: {
    path: '^packages/(infrastructure|core|search|framework/(infrastructure|core|search))/',
    //                              ^^^^                                    ^^^^
  },
  // ...
}
```

**–û–±–Ω–æ–≤–∏—Ç—å –Ω–∞:**
```javascript
from: {
  path: '^packages/(infrastructure|tooling|search|framework/(infrastructure|tooling|search))/',
  //                              ^^^^^^^                                    ^^^^^^^
}
```

### 5.1.6 –ü—Ä–æ–≤–µ—Ä–∫–∞ –¥—Ä—É–≥–∏—Ö —É–ø–æ–º–∏–Ω–∞–Ω–∏–π

- [ ] –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —á—Ç–æ –Ω–µ—Ç –¥—Ä—É–≥–∏—Ö —É–ø–æ–º–∏–Ω–∞–Ω–∏–π "core" –≤ —Ñ–∞–π–ª–µ
- [ ] –£–±–µ–¥–∏—Ç—å—Å—è —á—Ç–æ –≤—Å–µ path patterns –æ–±–Ω–æ–≤–ª–µ–Ω—ã

**–ö–æ–º–∞–Ω–¥—ã:**
```bash
grep -i "core" .dependency-cruiser.cjs
```

**–û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç:** –ù–µ—Ç —Å–æ–≤–ø–∞–¥–µ–Ω–∏–π (–∏–ª–∏ —Ç–æ–ª—å–∫–æ –≤ –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏—è—Ö –Ω–µ —Å–≤—è–∑–∞–Ω–Ω—ã—Ö —Å @mcp-framework/core).

### 5.1.7 –í–∞–ª–∏–¥–∞—Ü–∏—è –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏

- [ ] –ó–∞–ø—É—Å—Ç–∏—Ç—å dependency-cruiser –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏
- [ ] –£–±–µ–¥–∏—Ç—å—Å—è —á—Ç–æ –ø—Ä–∞–≤–∏–ª–∞ –∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã

**–ö–æ–º–∞–Ω–¥—ã:**
```bash
npm run depcruise
```

**–û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç:**
- –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –≤–∞–ª–∏–¥–Ω–∞
- –í—Å–µ –ø—Ä–∞–≤–∏–ª–∞ –ø—Ä–æ—Ö–æ–¥—è—Ç (–∏–ª–∏ –ø–æ–∫–∞–∑—ã–≤–∞—é—Ç –æ–∂–∏–¥–∞–µ–º—ã–µ –Ω–∞—Ä—É—à–µ–Ω–∏—è, –µ—Å–ª–∏ –æ–Ω–∏ –µ—Å—Ç—å)

**–ï—Å–ª–∏ –µ—Å—Ç—å –æ—à–∏–±–∫–∏:**
- –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Å–∏–Ω—Ç–∞–∫—Å–∏—Å .cjs —Ñ–∞–π–ª–∞
- –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —á—Ç–æ –≤—Å–µ path patterns –∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã
- –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —á—Ç–æ —ç—Ç–∞–ø—ã 2-3 –∑–∞–≤–µ—Ä—à–µ–Ω—ã (–ø–∞–∫–µ—Ç –ø–µ—Ä–µ–∏–º–µ–Ω–æ–≤–∞–Ω, dependencies –æ–±–Ω–æ–≤–ª–µ–Ω—ã)

### 5.1.8 –§–∏–Ω–∞–ª—å–Ω–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞

- [ ] –£–±–µ–¥–∏—Ç—å—Å—è —á—Ç–æ –≤—Å–µ –ø—Ä–∞–≤–∏–ª–∞ –æ–±–Ω–æ–≤–ª–µ–Ω—ã
- [ ] –ù–∏–∫–∞–∫–∏—Ö —É–ø–æ–º–∏–Ω–∞–Ω–∏–π —Å—Ç–∞—Ä–æ–≥–æ –Ω–∞–∑–≤–∞–Ω–∏—è "core" –Ω–µ –æ—Å—Ç–∞–ª–æ—Å—å

**–ö–æ–º–∞–Ω–¥—ã:**
```bash
grep -n "@mcp-framework/core" .dependency-cruiser.cjs
grep -n "framework/core" .dependency-cruiser.cjs
grep -n "packages/core" .dependency-cruiser.cjs
```

**–û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç:** –ù–µ—Ç —Å–æ–≤–ø–∞–¥–µ–Ω–∏–π.

---

## üìä –ö—Ä–∏—Ç–µ—Ä–∏–∏ –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è —ç—Ç–∞–ø–∞

- ‚úÖ –í—Å–µ —É–ø–æ–º–∏–Ω–∞–Ω–∏—è "core" –∑–∞–º–µ–Ω–µ–Ω—ã –Ω–∞ "tooling" –≤ path patterns
- ‚úÖ –ù–∞–∑–≤–∞–Ω–∏—è –ø—Ä–∞–≤–∏–ª –æ–±–Ω–æ–≤–ª–µ–Ω—ã (–≥–¥–µ –ø—Ä–∏–º–µ–Ω–∏–º–æ)
- ‚úÖ –ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–∏ –æ–±–Ω–æ–≤–ª–µ–Ω—ã
- ‚úÖ `npm run depcruise` –ø—Ä–æ—Ö–æ–¥–∏—Ç —É—Å–ø–µ—à–Ω–æ
- ‚úÖ –ù–µ—Ç —É–ø–æ–º–∏–Ω–∞–Ω–∏–π —Å—Ç–∞—Ä–æ–≥–æ –Ω–∞–∑–≤–∞–Ω–∏—è –≤ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏

---

## üö® –í–∞–∂–Ω—ã–µ –∑–∞–º–µ—á–∞–Ω–∏—è

1. –≠—Ç–æ—Ç —ç—Ç–∞–ø **–º–æ–∂–Ω–æ –≤—ã–ø–æ–ª–Ω—è—Ç—å –ø–∞—Ä–∞–ª–ª–µ–ª—å–Ω–æ** —Å —ç—Ç–∞–ø–∞–º–∏ 4.x, 5.2, 5.3
2. –ï—Å–ª–∏ –≤—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è –ø–∞—Ä–∞–ª–ª–µ–ª—å–Ω–æ —Å –¥—Ä—É–≥–∏–º–∏ –∞–≥–µ–Ω—Ç–∞–º–∏:
   - –†–∞–±–æ—Ç–∞—Ç—å –≤ –æ—Ç–¥–µ–ª—å–Ω–æ–π –≤–µ—Ç–∫–µ
   - Merge –ø–æ—Å–ª–µ –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è –≤—Å–µ—Ö –ø–∞—Ä–∞–ª–ª–µ–ª—å–Ω—ã—Ö —ç—Ç–∞–ø–æ–≤
3. **–ù–ï –∫–æ–º–º–∏—Ç–∏—Ç—å** –¥–æ –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è —ç—Ç–∞–ø–∞ 6 (–∏–ª–∏ –∫–æ–æ—Ä–¥–∏–Ω–∞—Ü–∏–∏ —Å –¥—Ä—É–≥–∏–º–∏ –∞–≥–µ–Ω—Ç–∞–º–∏)

---

## ‚ö†Ô∏è –í–æ–∑–º–æ–∂–Ω—ã–µ –ø—Ä–æ–±–ª–µ–º—ã

**–ü—Ä–æ–±–ª–µ–º–∞:** depcruise –≤—ã–¥–∞–µ—Ç –æ—à–∏–±–∫–∏ –≤–∞–ª–∏–¥–∞—Ü–∏–∏
**–†–µ—à–µ–Ω–∏–µ:**
- –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —á—Ç–æ —ç—Ç–∞–ø—ã 2-3 –∑–∞–≤–µ—Ä—à–µ–Ω—ã
- –ü—Ä–æ–≤–µ—Ä–∏—Ç—å path patterns –≤ –ø—Ä–∞–≤–∏–ª–∞—Ö
- –ó–∞–ø—É—Å—Ç–∏—Ç—å —Å --validate –¥–ª—è –ø–æ–¥—Ä–æ–±–Ω–æ–≥–æ –≤—ã–≤–æ–¥–∞

**–ü—Ä–æ–±–ª–µ–º–∞:** –°–∏–Ω—Ç–∞–∫—Å–∏—á–µ—Å–∫–∞—è –æ—à–∏–±–∫–∞ –≤ .cjs
**–†–µ—à–µ–Ω–∏–µ:** –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —á—Ç–æ –≤—Å–µ –∫–∞–≤—ã—á–∫–∏ –∏ —Å–∫–æ–±–∫–∏ –∑–∞–∫—Ä—ã—Ç—ã –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ

---

## ‚û°Ô∏è –°–ª–µ–¥—É—é—â–∏–µ —à–∞–≥–∏

–ü–æ—Å–ª–µ –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è —ç—Ç–æ–≥–æ —ç—Ç–∞–ø–∞:
- –ï—Å–ª–∏ —Ä–∞–±–æ—Ç–∞–µ—à—å **–ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ**: –ø–µ—Ä–µ–π—Ç–∏ –∫ `5.2_update_turbo_config_parallel.md`
- –ï—Å–ª–∏ —Ä–∞–±–æ—Ç–∞–µ—à—å **–ø–∞—Ä–∞–ª–ª–µ–ª—å–Ω–æ**: –¥–æ–∂–¥–∞—Ç—å—Å—è –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è –¥—Ä—É–≥–∏—Ö –ø–∞—Ä–∞–ª–ª–µ–ª—å–Ω—ã—Ö —ç—Ç–∞–ø–æ–≤ –ø–µ—Ä–µ–¥ merge
