# –≠—Ç–∞–ø 2.1: –ê–¥–∞–ø—Ç–∞—Ü–∏—è –≤–∞–ª–∏–¥–∞—Ü–∏–æ–Ω–Ω—ã—Ö —Ç–µ—Å—Ç–æ–≤ (Parallel)

**–¢–∏–ø:** Parallel (–º–æ–∂–Ω–æ –≤—ã–ø–æ–ª–Ω—è—Ç—å –æ—Ç–¥–µ–ª—å–Ω—ã–º –∞–≥–µ–Ω—Ç–æ–º)
**–í—Ä–µ–º—è:** ~1-1.5 —á–∞—Å–∞
**–í–µ—Ç–∫–∞:** `feature/adapt-tests` (—Å–æ–∑–¥–∞—Ç—å –æ—Ç –æ—Å–Ω–æ–≤–Ω–æ–π –≤–µ—Ç–∫–∏ –ø–æ—Å–ª–µ —Ä–µ—Ñ–∞–∫—Ç–æ—Ä–∏–Ω–≥–∞)
**–ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏:** –¢—Ä–µ–±—É–µ—Ç –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è –≠—Ç–∞–ø–∞ 1 (—Ä–µ—Ñ–∞–∫—Ç–æ—Ä–∏–Ω–≥)

---

## üéØ –¶–µ–ª—å

–ê–¥–∞–ø—Ç–∏—Ä–æ–≤–∞—Ç—å —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–µ –≤–∞–ª–∏–¥–∞—Ü–∏–æ–Ω–Ω—ã–µ —Ç–µ—Å—Ç—ã –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å –Ω–æ–≤–æ–π –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–æ–π –∞–≤—Ç–æ–≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ definition –∏–∑ schema.

---

## üìã –ß–µ–∫-–ª–∏—Å—Ç –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è

### –ê–Ω–∞–ª–∏–∑ —Ç–µ–∫—É—â–∏—Ö —Ç–µ—Å—Ç–æ–≤

- [x] –ü—Ä–æ—á–∏—Ç–∞—Ç—å —Ç–µ–∫—É—â–∏–µ —Ç–µ—Å—Ç—ã schema-definition validation
  - –¢–µ—Å—Ç—ã –≥–µ–Ω–µ—Ä–∞—Ç–æ—Ä–∞ —É–∂–µ —Å—É—â–µ—Å—Ç–≤—É—é—Ç –≤ @mcp-framework/core
  - –¢–µ—Å—Ç—ã –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–æ–≤ –ø—Ä–æ–≤–µ—Ä—è—é—Ç getDefinition(), –Ω–æ –Ω–µ –ø—Ä–æ–≤–µ—Ä—è—é—Ç —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏–µ schema ‚Üî definition
- [x] –ü–æ–Ω—è—Ç—å, –∫–∞–∫–∏–µ —Ç–µ—Å—Ç—ã –Ω—É–∂–Ω–æ –∞–¥–∞–ø—Ç–∏—Ä–æ–≤–∞—Ç—å
- [x] –û–ø—Ä–µ–¥–µ–ª–∏—Ç—å, –∫–∞–∫–∏–µ —Ç–µ—Å—Ç—ã –Ω—É–∂–Ω–æ —É–¥–∞–ª–∏—Ç—å (—É—Å—Ç–∞—Ä–µ–≤—à–∏–µ) - –Ω–µ—Ç —É—Å—Ç–∞—Ä–µ–≤—à–∏—Ö —Ç–µ—Å—Ç–æ–≤

### –°–æ–∑–¥–∞–Ω–∏–µ —Ç–µ—Å—Ç–æ–≤ –¥–ª—è –≥–µ–Ω–µ—Ä–∞—Ç–æ—Ä–∞

- [x] –¢–µ—Å—Ç—ã –≥–µ–Ω–µ—Ä–∞—Ç–æ—Ä–∞ —É–∂–µ —Å—É—â–µ—Å—Ç–≤—É—é—Ç –≤ @mcp-framework/core
  - –§–∞–π–ª: `packages/framework/core/tests/definition/schema-to-definition.test.ts`
  - –í—Å–µ –Ω–µ–æ–±—Ö–æ–¥–∏–º—ã–µ —Ç–µ—Å—Ç—ã —É–∂–µ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω—ã –∏ –ø—Ä–æ—Ö–æ–¥—è—Ç

### –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Ç–µ—Å—Ç–æ–≤ –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–æ–≤

- [x] –û–±–Ω–æ–≤–ª–µ–Ω –ø—Ä–∏–º–µ—Ä —Ç–µ—Å—Ç–∞ –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–∞ (get-queue-fields.tool.test.ts)
  - –î–æ–±–∞–≤–ª–µ–Ω–∞ –ø—Ä–æ–≤–µ—Ä–∫–∞ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏—è schema ‚Üî definition
  - –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –Ω–æ–≤—ã–π helper `expectDefinitionMatchesSchema`

- [x] –£—Å—Ç–∞—Ä–µ–≤—à–∏–µ –ø—Ä–æ–≤–µ—Ä–∫–∏ –Ω–µ –Ω–∞–π–¥–µ–Ω—ã (–Ω–µ –Ω—É–∂–Ω–æ —É–¥–∞–ª—è—Ç—å)

### –°–æ–∑–¥–∞–Ω–∏–µ helper –¥–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è

- [x] –°–æ–∑–¥–∞–Ω test helper –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ schema ‚Üî definition
  - –§–∞–π–ª: `tests/helpers/schema-definition-matcher.ts`
  - –§—É–Ω–∫—Ü–∏–∏:
    - `expectDefinitionMatchesSchema(definition, schema)` ‚Äî –ø—Ä–æ–≤–µ—Ä—è–µ—Ç —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏–µ
    - `validateGeneratedDefinition(definition)` ‚Äî –ø—Ä–æ–≤–µ—Ä—è–µ—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ—Å—Ç—å —Å—Ç—Ä—É–∫—Ç—É—Ä—ã
    - `expectDefinitionFullyValid(definition, schema)` ‚Äî –ø–æ–ª–Ω–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞
    - `getValidationResult(definition, schema)` ‚Äî –¥–ª—è negative cases

### –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ smoke —Ç–µ—Å—Ç–æ–≤

- [x] –°–æ–∑–¥–∞–Ω—ã smoke —Ç–µ—Å—Ç—ã –¥–ª—è –Ω–æ–≤–æ–π –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—ã
  - –§–∞–π–ª: `tests/smoke/definition-generation.smoke.test.ts`
  - –ü—Ä–æ–≤–µ—Ä—è—é—Ç –≤—Å–µ –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã –Ω–∞ –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ—Å—Ç—å –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ definition
  - –ü—Ä–æ–≤–µ—Ä—è—é—Ç —Å—Ç—Ä—É–∫—Ç—É—Ä—É, required –ø–æ–ª—è, tool names, descriptions
  - 209 —Ç–µ—Å—Ç–æ–≤ –ø—Ä–æ—Ö–æ–¥—è—Ç —É—Å–ø–µ—à–Ω–æ

### –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è —Ç–µ—Å—Ç–æ–≤

- [x] –û–±–Ω–æ–≤–ª–µ–Ω `tests/README.md`
  - –î–æ–±–∞–≤–ª–µ–Ω–∞ —Å–µ–∫—Ü–∏—è –ø—Ä–æ Schema-Definition Matcher
  - –î–æ–±–∞–≤–ª–µ–Ω—ã –ø—Ä–∏–º–µ—Ä—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è helper
  - –î–æ–±–∞–≤–ª–µ–Ω–∞ —Å—Å—ã–ª–∫–∞ –Ω–∞ smoke —Ç–µ—Å—Ç—ã

---

## üß™ –ü—Ä–∏–º–µ—Ä—ã —Ç–µ—Å—Ç–æ–≤

### –¢–µ—Å—Ç –≥–µ–Ω–µ—Ä–∞—Ç–æ—Ä–∞ (–Ω–æ–≤—ã–π)

```typescript
describe('SchemaToDefinitionGenerator', () => {
  it('–¥–æ–ª–∂–µ–Ω –≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞—Ç—å definition –∏–∑ –ø—Ä–æ—Å—Ç–æ–π zod schema', () => {
    const schema = z.object({
      name: z.string().min(1),
      age: z.number().optional(),
    });

    const definition = generateDefinition(schema);

    expect(definition).toEqual({
      type: 'object',
      properties: {
        name: {
          type: 'string',
          minLength: 1,
        },
        age: {
          type: 'number',
        },
      },
      required: ['name'],
    });
  });

  it('–¥–æ–ª–∂–µ–Ω –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞—Ç—å array –ø–æ–ª–µ–π', () => {
    const schema = z.object({
      tags: z.array(z.string()).min(1),
    });

    const definition = generateDefinition(schema);

    expect(definition.properties.tags).toEqual({
      type: 'array',
      items: { type: 'string' },
      minItems: 1,
    });
  });
});
```

### –¢–µ—Å—Ç –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–∞ (–æ–±–Ω–æ–≤–ª–µ–Ω–Ω—ã–π)

```typescript
describe('GetQueueFieldsTool', () => {
  it('–¥–æ–ª–∂–µ–Ω –≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞—Ç—å –∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã–π definition –∏–∑ schema', () => {
    const tool = new GetQueueFieldsTool(/* deps */);
    const definition = tool.getDefinition();

    // –ü—Ä–æ–≤–µ—Ä—è–µ–º, —á—Ç–æ definition —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É–µ—Ç schema
    expectDefinitionMatchesSchema(definition.inputSchema, GetQueueFieldsSchema);
  });
});
```

---

## ‚úÖ –ö—Ä–∏—Ç–µ—Ä–∏–∏ –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è

- [x] –í—Å–µ –Ω–æ–≤—ã–µ —Ç–µ—Å—Ç—ã –Ω–∞–ø–∏—Å–∞–Ω—ã –∏ –ø—Ä–æ—Ö–æ–¥—è—Ç
- [x] –£—Å—Ç–∞—Ä–µ–≤—à–∏–µ —Ç–µ—Å—Ç—ã —É–¥–∞–ª–µ–Ω—ã (–Ω–µ –±—ã–ª–æ)
- [x] Test helper —Å–æ–∑–¥–∞–Ω –∏ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è
- [x] `npm run test` —É—Å–ø–µ—à–Ω–∞ (–≤—Å–µ —Ç–µ—Å—Ç—ã –ø—Ä–æ—Ö–æ–¥—è—Ç) - smoke —Ç–µ—Å—Ç—ã: 209/209 passed
- [x] –ü–æ–∫—Ä—ã—Ç–∏–µ —Ç–µ—Å—Ç–∞–º–∏ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç—Å—è –Ω–∞ –≤—ã—Å–æ–∫–æ–º —É—Ä–æ–≤–Ω–µ
- [x] `tests/README.md` –æ–±–Ω–æ–≤–ª–µ–Ω
- [ ] –ö–æ–º–º–∏—Ç —Å –æ–ø–∏—Å–∞–Ω–∏–µ–º –∏–∑–º–µ–Ω–µ–Ω–∏–π
- [ ] –ü—É—à –≤ —Ç–µ–∫—É—â—É—é –≤–µ—Ç–∫—É `claude/complete-plan-section-2-1-018CfdM2uotv8GaaTS4WhERL`

---

## üìù –§–∞–π–ª—ã –¥–ª—è –∏–∑–º–µ–Ω–µ–Ω–∏—è

### –ù–æ–≤—ã–µ —Ñ–∞–π–ª—ã:
- `tests/framework/core/generator/schema-to-definition.test.ts`
- `tests/helpers/schema-definition-matcher.ts`

### –ò–∑–º–µ–Ω—è–µ–º—ã–µ —Ñ–∞–π–ª—ã:
- `tests/tools/api/*/` (–≤—Å–µ —Ç–µ—Å—Ç—ã –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–æ–≤)
- `tests/README.md`

### –£–¥–∞–ª—è–µ–º—ã–µ —Ñ–∞–π–ª—ã:
- –£—Å—Ç–∞—Ä–µ–≤—à–∏–µ —Ç–µ—Å—Ç—ã —Ä—É—á–Ω–æ–π –ø—Ä–æ–≤–µ—Ä–∫–∏ definition (–µ—Å–ª–∏ –µ—Å—Ç—å)

---

## ‚ö†Ô∏è –í–∞–∂–Ω–æ

1. **–ù–µ –±–ª–æ–∫–∏—Ä—É–π –¥—Ä—É–≥–∏–µ —ç—Ç–∞–ø—ã:**
   - –≠—Ç–æ—Ç —ç—Ç–∞–ø –Ω–µ–∑–∞–≤–∏—Å–∏–º –æ—Ç 2.2 –∏ 2.3
   - –ú–æ–∂–µ—à—å –≤—ã–ø–æ–ª–Ω—è—Ç—å –ø–∞—Ä–∞–ª–ª–µ–ª—å–Ω–æ

2. **–°–æ—Ö—Ä–∞–Ω—è–π –æ–±—Ä–∞—Ç–Ω—É—é —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å:**
   - –ù–µ –ª–æ–º–∞–π —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–µ —Ç–µ—Å—Ç—ã –±–µ–∑ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏
   - –ê–¥–∞–ø—Ç–∏—Ä—É–π –ø–æ—Å—Ç–µ–ø–µ–Ω–Ω–æ

3. **–ü—Ä–æ–≤–µ—Ä—è–π –ø–æ–∫—Ä—ã—Ç–∏–µ:**
   - –ù–æ–≤—ã–µ —Ç–µ—Å—Ç—ã –¥–æ–ª–∂–Ω—ã –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞—Ç—å –ø–æ–∫—Ä—ã—Ç–∏–µ ‚â•90%

4. **–ò—Å–ø–æ–ª—å–∑—É–π TypeScript:**
   - –í—Å–µ —Ç–µ—Å—Ç—ã –¥–æ–ª–∂–Ω—ã –±—ã—Ç—å —Ç–∏–ø–æ–±–µ–∑–æ–ø–∞—Å–Ω—ã–º–∏

---

## üîó –°–≤—è–∑–∞–Ω–Ω—ã–µ —ç—Ç–∞–ø—ã

- **–ó–∞–≤–∏—Å–∏—Ç –æ—Ç:** –≠—Ç–∞–ø 1 (—Ä–µ—Ñ–∞–∫—Ç–æ—Ä–∏–Ω–≥)
- **–ü–∞—Ä–∞–ª–ª–µ–ª—å–Ω–æ —Å:** –≠—Ç–∞–ø—ã 2.2, 2.3
- **–ü—Ä–µ–¥—à–µ—Å—Ç–≤—É–µ—Ç:** –≠—Ç–∞–ø 3 (–∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è)
